(this.webpackJsonptabit=this.webpackJsonptabit||[]).push([[0],{108:function(t,e,n){"use strict";var i=n(16),r=n(1),o=n(2),a=n(134);function s(t,e){if(t<1||e<1)throw new Error("x<1 || y<1");for(;Math.max(t,e)%Math.min(t,e)!==0;)t>e?t%=e:e%=t;return Math.min(t,e)}var u=function(){function t(e,n){if(Object(r.a)(this,t),0===e.length)throw new Error("patternArray must not be zero length");this.rep=e,this.resolution=n}return Object(o.a)(t,[{key:"length",value:function(){return this.rep.length*this.resolution}},{key:"empty",value:function(){return 0===this.rep.reduce((function(t,e){return t+e}))}},{key:"_sumOverlapsOfArrays",value:function(t,e){for(var n=0,i=0;i<t.length;++i)t[i]&&e[i]&&n++;return n}},{key:"countOverlaps",value:function(t){if(this.resolution===t.resolution)return this._sumOverlapsOfArrays(this.rep,t.rep);var e=s(this.resolution,t.resolution),n=this.formatResolution(e),i=t.formatResolution(e);return this._sumOverlapsOfArrays(n.rep,i.rep)}},{key:"aggregate",value:function(e){if(this.resolution===e.resolution){for(var n=Math.max(this.rep.length,e.rep.length),i=new Array(n).fill(0),r=0;r<i.length;++r)i[r]=(r<this.rep.length?this.rep[r]:0)||(r<e.rep.length?e.rep[r]:0);return new t(i,this.resolution)}var o=s(this.resolution,e.resolution),a=this.formatResolution(o),u=e.formatResolution(o);return a.aggregate(u)}},{key:"format",value:function(e){var n=this.resolution*this.rep.length,i=this.toPoints(),r=t.representPoints(i,e,n);return r?new t(r,e):null}},{key:"toPoints",value:function(){var t,e=[],n=Object(i.a)(Array(this.rep.length).keys());try{for(n.s();!(t=n.n()).done;){var r=t.value;this.rep[r]&&e.push(this.resolution*r)}}catch(o){n.e(o)}finally{n.f()}return e}}],[{key:"representPoints",value:function(t,e,n){if(n<=0)throw new Error("size must be greater than zero");if(n<e||n%e!==0)throw new Error("resolution must be less than size and divide it evenly");var r,o=new Array(n/e).fill(0),a=Object(i.a)(t);try{for(a.s();!(r=a.n()).done;){var s=r.value;if(s%e!==0)throw new Error("Failed to represent point "+s.toString()+" at resolution "+e.toString());if(s>=n)throw new Error("Failed to represent point "+s.toString()+" for invalid specified size "+n.toString());o[s/e]=1}}catch(u){a.e(u)}finally{a.f()}return o}},{key:"fromPositions",value:function(e,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=null!==i&&void 0!==i?i:Object(a.a)(e,n);return new t(t.representPoints(e,r,n),r)}}]),t}();e.a=u},134:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var i=n(16);function r(t,e){for(var n=t.concat([e]),r=0,o=[48,24,16,12,8,6,4,3,2,1];r<o.length;r++){var a,s=o[r],u=!0,c=Object(i.a)(n);try{for(c.s();!(a=c.n()).done;){if(a.value%s!==0){u=!1;break}}}catch(l){c.e(l)}finally{c.f()}if(u)return s}throw new Error("Failed to predict base")}},139:function(t,e,n){"use strict";function i(){var t=navigator.userAgent||navigator.vendor||window.opera;return[/Android/i,/webOS/i,/iPhone/i,/iPad/i,/iPod/i,/BlackBerry/i,/Windows Phone/i].some((function(e){return t.match(e)}))}n.d(e,"a",(function(){return i}))},141:function(t,e,n){"use strict";var i=n(18),r=n(1),o=n(2),a=n(16),s=n(15),u=function(){function t(){Object(r.a)(this,t)}return Object(o.a)(t,null,[{key:"createWebContext",value:function(){return new(window.AudioContext||window.webkitAudioContext||Object)}},{key:"determineMinResolution",value:function(t,e){for(var n=48,i=function(){var e=Object(s.a)(o[r],2),i=e[0],a=e[1];t.filter((function(t){return t.id.toString()===i})).length>0&&!a.empty()&&(n=Math.min(n,a.resolution))},r=0,o=Object.entries(e);r<o.length;r++)i();return n}},{key:"determineTrackLength",value:function(t,e){for(var n=48,i=function(){var e=Object(s.a)(o[r],2),i=e[0],a=e[1];t.filter((function(t){return t.id.toString()===i})).length>0&&!a.empty()&&(n=Math.max(n,a.length()))},r=0,o=Object.entries(e);r<o.length;r++)i();return n}},{key:"peakAmplitude",value:function(t){for(var e=0,n=0;n<t.numberOfChannels;n++)for(var i=t.getChannelData(n),r=0;r<i.length;++r)e=Math.max(Math.abs(i[r]),e);return e}},{key:"normalizeAudioBuffer",value:function(e){var n=t.peakAmplitude(e);if(n>1)for(var i=0;i<e.numberOfChannels;i++)for(var r=e.getChannelData(i),o=0;o<r.length;++o)r[o]=r[o]/n;return e}},{key:"createMasterTrack",value:function(e,n,i,r,o){for(var u=t.determineTrackLength(i,n),c=44100*(u*(60/o*1e3/48))/1e3,l=Math.floor(c),m=Math.floor(l/u),p=e.createBuffer(2,l,44100),h=0;h<p.numberOfChannels;h++)for(var d=p.getChannelData(h),f=function(){var t=Object(s.a)(j[b],2),e=t[0],n=t[1],o=i.filter((function(t){return t.id.toString()===e}));if(o.length>0&&o[0].id in r&&!n.empty()){var u,c=r[o[0].id],l=2===c.numberOfChannels?c.getChannelData(h):c.getChannelData(0),p=n.toPoints(),f=Object(a.a)(p);try{for(f.s();!(u=f.n()).done;)for(var g=u.value*m,v=0;v<c.length;++v)d[g+v]=d[g+v]+l[v]}catch(O){f.e(O)}finally{f.f()}}},b=0,j=Object.entries(n);b<j.length;b++)f();return t.normalizeAudioBuffer(p)}},{key:"createAudioSource",value:function(t,e,n){var i=t.createBufferSource();return i.buffer=e,i.loop=!0,null!==n&&(i.playbackRate.value=n/100),i.connect(t.destination),i}},{key:"createOneShotAudioSource",value:function(t,e,n){var i=t.createBufferSource();return i.buffer=e,i.loop=!1,null!==n&&(i.playbackRate.value=n/100),i.connect(t.destination),i}}]),t}(),c=n(25),l=["circAfrique v4","DeathMetal","The Black Pearl 1.0","GMRockKit","TR808EmulationKit"],m=function(t){return Math.pow(t,2.5)},p=function(t,e){var n=e.samplesReady();return function(i,r){if(n||(n=e.samplesReady())){for(var o=r%(t.length/t.resolution),a=0,u=Object.entries(t.tracks);a<u.length;a++){var l=Object(s.a)(u[a],2),m=l[0];if(l[1].rep[o]){var p=e.samples[m];void 0!==p&&p.player.start(i)}}e.onPatternTimeChange&&c.a.schedule((function(){var n=o*t.resolution%t.length;e.onPatternTimeChange(n)}),i)}}},h=function(){function t(e,n,i,o){Object(r.a)(this,t),this.samples={},this.sequences={},this.currentPattern=null,this.gain=new c.b,this.gain.toDestination(),this.onPatternTimeChange=o,c.f.bpm.value=i,c.f.loop=!0,this.sampleCount=0,this.expectedSampleCount=0,this.patternDetails={};var m,p=[],h=Object(a.a)(n);try{for(h.s();!(m=h.n()).done;){var d=m.value;this.patternDetails[d.name]={resolution:u.determineMinResolution(e,d.instrumentTracks),length:u.determineTrackLength(e,d.instrumentTracks),name:d.name,tracks:d.instrumentTracks},this.populateSamples(e,d.instrumentTracks,p)}}catch(k){h.e(k)}finally{h.f()}if(this.sequences=this.createSequences(e,n),this.currentPatternName=null,p.length>0){var f,b="Failed to load samples for instruments:\n",j=function(t){var e,n=[],i=Object(a.a)(t);try{for(i.s();!(e=i.n()).done;){var r,o=Object(s.a)(e.value,2),u=o[0],c=o[1],l=!0,m=Object(a.a)(n);try{for(m.s();!(r=m.n()).done;){var p=Object(s.a)(r.value,2),h=p[0],d=p[1];if(u===h&&c===d){l=!1;break}}}catch(k){m.e(k)}finally{m.f()}l&&n.push([u,c])}}catch(k){i.e(k)}finally{i.f()}return n.sort(),n}(p),g=Object(a.a)(j);try{for(g.s();!(f=g.n()).done;){var v=Object(s.a)(f.value,2),O=v[0];b+="    -"+v[1],""!==O&&(b+=" ("+O+")"),b+="\n"}}catch(k){g.e(k)}finally{g.f()}b+="This is typically because they belong to commercial sound libraries. tabit's supported drumkits are\n"+l.join(", ")+".",alert(b)}}return Object(o.a)(t,[{key:"samplesReady",value:function(){return this.sampleCount===this.expectedSampleCount}},{key:"populateSamples",value:function(t,e,n){var i=this;this.sampleCount=0;for(var r=function(){var e=Object(s.a)(a[o],1)[0],r=t.filter((function(t){return t.id.toString()===e}));if(r.length>0){var u=r[0],p=m(Math.min(Math.max(0,u.volume),1));if(u.id in i.samples)return"continue";if("drumkit"in u&&"filename"in u&&l.includes(u.drumkit)){var h=u.filename.replace(".flac",".wav"),d=new c.c("/tabit/wav/"+u.drumkit+"/"+h,(function(){i.sampleCount++}));d.mute=u.muted;var f=new c.b(p,"normalRange");d.connect(f),f.connect(i.gain),i.samples[u.id]={player:d,gain:f},i.expectedSampleCount++}else if("drumkit"in u){var b=function(t,e){var n=e.toLowerCase();return n.includes("kick")?"The Black Pearl 1.0/PearlKick-Hard.wav":n.includes("stick")?"DeathMetal/16297_ltibbits_sticks_low_pitch.wav":n.includes("tom")?"TR808EmulationKit/808_Tom_Mid.wav":n.includes("clap")?"TR808EmulationKit/808_Clap.wav":n.includes("snare")?"GMRockKit/Snare-Soft.wav":n.includes("cowbell")?"GMRockKit/Cowbell-Softest.wav":null}(u.drumkit,u.name);if(null!==b){var j=new c.c("/tabit/wav/"+b,(function(){i.sampleCount++}));j.mute=u.muted;var g=new c.b(p,"normalRange");j.connect(g),g.connect(i.gain),i.samples[u.id]={player:j,gain:g},i.expectedSampleCount++}else n.push([u.drumkit,u.name])}else n.push(["",u.name])}},o=0,a=Object.entries(e);o<a.length;o++)r()}},{key:"createSequences",value:function(t,e){var n,r={},o=Object(a.a)(e);try{for(o.s();!(n=o.n()).done;){var s=n.value,l=u.determineMinResolution(t,s.instrumentTracks),m=u.determineTrackLength(t,s.instrumentTracks),h=p(this.patternDetails[s.name],this);r[s.name]=new c.d(h,Object(i.a)(Array(m/l).keys()),c.e("4n")*(l/48)),r[s.name]._part.mute=!0,r[s.name].start(0)}}catch(d){o.e(d)}finally{o.f()}return r}},{key:"setActivePattern",value:function(t){var e=this,n=null!==this.currentPatternName?this.currentPatternName:null,i=this.patternDetails[t].length,r=null!==n?this.patternDetails[n]:null,o=c.f.loopEnd-c.f.toSeconds(c.f.position),a=function(o){null!==n&&(e.sequences[n]._part.mute=!0),null!==n&&r===i||c.f.setLoopPoints(0,c.e("4n")*(i/48)),e.sequences[t]._part.mute=!1,e.currentPatternName=t};null!==n&&"started"===c.f.state&&o>0&&o<c.f.toSeconds(c.e("8n"))?c.f.scheduleOnce(a,c.e("0")):a()}},{key:"play",value:function(){c.g().then((function(){c.f.start()}))}},{key:"stop",value:function(){var t=this;"started"===c.f.state&&(c.f.stop(),this.onPatternTimeChange&&c.a.schedule((function(){t.onPatternTimeChange(null)}),c.f.now()))}},{key:"setMutedForInstrument",value:function(t,e){this.samples[t].player.mute=e}},{key:"setVolumeForInstrument",value:function(t,e){this.samples[t].gain.set({gain:m(e)})}},{key:"setTempo",value:function(t){c.f.bpm.value=t}}]),t}();e.a=h},184:function(t,e,n){"use strict";(function(t,i){var r=n(39),o=n(15),a=n(16),s=n(1),u=n(2),c=n(7),l=n(4),m=n(3),p=n(8),h=n(0),d=n.n(h),f=n(12),b=n(259),j=n(285),g=n(263),v=(n(346),n(455)),O=n(448),k=n(459),y=n(190),x=n(451),S=n(294),w=n(452),C=n(289),T=n(192),R=n(293),P=n(53),M=n(65),A=n(282),N=n.n(A),F=n(283),I=n.n(F),D=n(279),E=n.n(D),L=n(280),B=n.n(L),_=n(284),z=n.n(_),G=n(196),K=n(193),J=n(195),V=n(194),W=n(142),q=n(13),U=n(281),H=n.n(U),X=n(104),Y=n(185),$=n(93),Z=n(81),Q=n(49),tt=n(54),et=n(272),nt=n(108),it=n(273),rt=n(141),ot=n(274),at=n(30),st=n(110),ut=n.n(st),ct=n(187),lt=n.n(ct),mt=n(277),pt=n.n(mt),ht=n(139),dt=n(278),ft=n(450),bt=n(449),jt=n(59),gt=Object(k.a)(Object(y.a)({palette:{type:"dark",primary:{main:"#36d9be"},secondary:{main:"#f50057"}}})),vt=function(t){return t&&"keydown"===t.type&&("Tab"===t.key||"Shift"===t.key)},Ot=function(t){return"https://cors-anywhere.herokuapp.com/"+function(t){return"https://jsonbase.com/tabit-song/"+t}(t)},kt={position:"absolute",bottom:0,width:"95%",textAlign:"center",backgroundColor:"#282c34",zIndex:gt.zIndex.drawer},yt={modal:{display:"flex",alignItems:"center",justifyContent:"center"},paper:{backgroundColor:gt.palette.background.paper,border:"2px solid #000",boxShadow:gt.shadows[5],padding:gt.spacing(2,4,3)}},xt=function(e){Object(l.a)(h,e);var n=Object(m.a)(h);function h(t){var e;Object(s.a)(this,h),e=n.call(this,t);var i=localStorage.getItem("tabit-history");return e.state={instruments:null,instrumentIndex:null,instrumentMask:null,patterns:null,formatSettings:Object.assign({},Y.a),patternSettings:[],loadedFile:null,selectedPattern:null,settingsOpen:!1,patternsOpen:!1,progress:null,showSharingDialog:!1,showTitleOptions:void 0===e.props.match.params.song,songName:null,permanentUrl:"",history:i?JSON.parse(i).sort((function(t,e){return e.date-t.date})):[]},e.pattern=d.a.createRef(),document.app=Object(c.a)(e),e}return Object(u.a)(h,[{key:"recordSongVisited",value:function(){var t=this.getExportState(),e=this.encodeState(t),n=ut()(e),i=Array.from(this.state.history),r=i.filter((function(e){return e.id===n&&e.name===t.songName}));if(0!==r.length)r[0].date=Date.now();else{var o={name:t.songName,id:n,date:Date.now(),content:e};i.push(o)}var a=i.sort((function(t,e){return e.date-t.date})).slice(0,10);this.setState({history:a},(function(){localStorage.setItem("tabit-history",JSON.stringify(a))}))}},{key:"fetchSong",value:function(t,e){var n=this;fetch(Ot(t)).then((function(t){return t.json()})).then((function(i){var r=n.decodeState(i);if(ut()(i)!==t)throw new Error("Hash did not match");n.handleJson(e,r)})).catch((function(i){n.setState({showTitleOptions:!0}),alert("Song "+(null!==e&&void 0!==e?e:t)+" could not be found.")}))}},{key:"loadLocalSong",value:function(t){var e=this;this.setState({showTitleOptions:!1}),Promise.resolve(t).then((function(t){var n=e.decodeState(t.content);if(ut()(t.content)!==t.id)throw new Error("Hash did not match");e.handleJson(t.name,n)})).catch((function(n){e.setState({showTitleOptions:!0}),alert("Failed to load song "+t.name+". Encountered error "+n.toString())}))}},{key:"componentDidMount",value:function(){this.props.match.params.song&&this.fetchSong(this.props.match.params.song)}},{key:"getExportState",value:function(){return{instruments:this.state.instruments,instrumentIndex:this.state.instrumentIndex,patterns:this.state.patterns,formatSettings:this.state.formatSettings,patternSettings:this.state.patternSettings,songName:this.state.songName,version:"1.1.0"}}},{key:"save",value:function(){var t="download.tabit";if(this.state.loadedFile){var e=this.state.loadedFile.split(".");t=1===e.length?e[0]+".tabit":e.slice(0,e.length-1).join(".")+".tabit"}var n=JSON.stringify(this.getExportState(),null,4),i=new Blob([n],{type:"application/json"});Object(it.saveAs)(i,t)}},{key:"encodeState",value:function(t){var e=JSON.stringify(this.getExportState());return{state:lt.a.deflateSync(e).toString("base64")}}},{key:"decodeState",value:function(e){var n=new t(e.state,"base64"),i=lt.a.inflateSync(n);return JSON.parse(i)}},{key:"share",value:function(){var t=this,e=this.encodeState(this.getExportState()),n=ut()(e),i=Ot(n),r={method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)},o=window.origin+"/tabit/song/"+n;fetch(i,r).then((function(e){t.setState({permanentUrl:o,showSharingDialog:!0})})).catch((function(t){alert("Couldn't upload song at this time. Sorry for any inconvenience.")}))}},{key:"figurePatternSettings",value:function(t){return Array.from(t,(function(t){return Q.a.guessPerPatternSettings(t.instrumentTracks)}))}},{key:"songNameFromFile",value:function(t){return null===t||void 0===t?null:t.includes(".")?t.split(".").slice(0,-1).join("."):t}},{key:"handleJson",value:function(t,e){var n,i=this;this.setState({instrumentIndex:e.instrumentIndex,instrumentMask:Object($.b)(e.instrumentIndex,e.instruments),instruments:e.instruments,patterns:function(t){var e,n=[],i=Object(a.a)(t);try{for(i.s();!(e=i.n()).done;){for(var r=e.value,s={},u=0,c=Object.entries(r.instrumentTracks);u<c.length;u++){var l=Object(o.a)(c[u],2),m=l[0],p=l[1];s[m]=new nt.a(p.rep,p.resolution)}var h=Object.assign({},r);h.instrumentTracks=s,n.push(h)}}catch(d){i.e(d)}finally{i.f()}return n}(e.patterns),formatSettings:e.formatSettings,patternSettings:e.patternSettings,loadedFile:null!==t&&void 0!==t?t:e.loadedFile,selectedPattern:0===e.patterns.length?null:0,patternsOpen:0!==e.patterns.length,songName:null!==t&&void 0!==t?t:null!==(n=e.songName)&&void 0!==n?n:e.loadedFile?this.songNameFromFile(e.loadedFile):"untitled"},(function(){i.audio=new rt.a(i.state.instrumentIndex,i.state.patterns,100,(function(t){i.onPatternTimeChange(t)})),i.audio.setActivePattern(i.state.patterns[i.state.selectedPattern].name),i.recordSongVisited()}))}},{key:"handleFileImport",value:function(t){var e=this;t.file.name.includes("h2song")?g.a.parseHydrogenPromise(t.content).then((function(n){var i,r=Object(Z.c)(n.instruments,Z.a,n.patterns),o=Object(Z.b)(n.instruments,n.patterns),s=Object(a.a)(o);try{for(s.s();!(i=s.n()).done;){i.value.volume=.5}}catch(u){s.e(u)}finally{s.f()}e.setState({instrumentIndex:o,instrumentMask:Object($.b)(o,r),instruments:r,patterns:n.patterns,patternSettings:e.figurePatternSettings(n.patterns),loadedFile:t.file.name,patternsOpen:!0,selectedPattern:0===n.patterns.length?null:0,songName:e.songNameFromFile(t.file.name)},(function(){e.audio=new rt.a(e.state.instrumentIndex,e.state.patterns,100,(function(t){e.onPatternTimeChange(t)})),e.audio.setActivePattern(e.state.patterns[e.state.selectedPattern].name),e.recordSongVisited()}))})).catch((function(e){alert("Failed to load file "+t.file.name+" with error "+e)})):Promise.resolve(t.content).then(JSON.parse).then((function(n){e.handleJson(e.songNameFromFile(t.file.name),n)})).catch((function(e){alert("Failed to load file "+t.file.name+" with error "+e)}))}},{key:"loadExample",value:function(){var t,e=this,n=function(t){var e,n=Object(a.a)(t.patterns);try{for(n.s();!(e=n.n()).done;){for(var i=e.value,r={},s=0,u=Object.entries(i.instrumentTracks);s<u.length;s++){var c=Object(o.a)(u[s],2),l=c[0],m=c[1];r[l]=new nt.a(m.rep,m.resolution)}i.instrumentTracks=r}}catch(p){n.e(p)}finally{n.f()}return t}(et),i=Object(Z.c)(n.instruments,Z.a,n.patterns),r=Object(Z.b)(n.instruments,n.patterns),s=Object(a.a)(r);try{for(s.s();!(t=s.n()).done;){t.value.volume=.5}}catch(u){s.e(u)}finally{s.f()}this.setState({instrumentIndex:r,instrumentMask:Object($.b)(r,i),instruments:i,patterns:n.patterns,selectedPattern:0===n.patterns.length?null:0,loadedFile:"kuva.example",patternsOpen:!0,patternSettings:this.figurePatternSettings(n.patterns),songName:"kuva"},(function(){e.audio=new rt.a(e.state.instrumentIndex,e.state.patterns,100,(function(t){e.onPatternTimeChange(t)})),e.audio.setActivePattern(e.state.patterns[e.state.selectedPattern].name)}))}},{key:"selectPattern",value:function(t){this.audio.setActivePattern(this.state.patterns[t].name),this.setState({selectedPattern:t})}},{key:"renderPattern",value:function(t,e){var n=this;return Object(p.jsxs)(d.a.Fragment,{children:[Object(p.jsx)(j.a,{instruments:this.state.instruments,tracks:t.instrumentTracks,config:e,active:this.state.progress,ref:this.pattern}),Object(p.jsx)(ot.a,{onPlay:function(){n.audio&&n.audio.play()},onStop:function(){n.audio&&n.audio.stop()},onTempoChange:function(t){n.audio&&n.audio.setTempo(t)}})]})}},{key:"onPatternTimeChange",value:function(t){this.pattern.current.onPatternTimeChange(t)}},{key:"getTrackLength",value:function(t){for(var e=48,n=0,i=Object.entries(t.instrumentTracks);n<i.length;n++){var r=Object(o.a)(i[n],2)[1];e=Math.max(e,r.length())}return e}},{key:"getResolution",value:function(t){for(var e=48,n=0,i=Object.entries(t.instrumentTracks);n<i.length;n++){var r=Object(o.a)(i[n],2)[1];e=Math.min(e,r.resolution)}return e}},{key:"renderTitlePage",value:function(){var t=this,e=null!=this.state.patterns&&0===this.state.patterns.length?Object(p.jsxs)(v.a,{severity:"error",children:[this.state.loadedFile," contained no patterns! Try another."]}):"",n=Object(p.jsxs)(d.a.Fragment,{children:[Object(p.jsx)(M.a,{variant:"contained",onClick:this.loadExample.bind(this),style:{margin:"1em"},children:"Load example"}),Object(p.jsx)(b.a,{style:{margin:"1em"},variant:"contained",onImport:this.handleFileImport.bind(this),accept:".tabit,.h2song"}),e]}),i=Object(p.jsxs)(d.a.Fragment,{children:[Object(p.jsx)("p",{children:" Loading song... "}),Object(p.jsx)(O.a,{})]});return Object(p.jsxs)(d.a.Fragment,{children:[Object(p.jsxs)("div",{children:[Object(p.jsx)("h2",{children:"tabit"}),Object(p.jsx)("p",{children:"I read .h2songs and write tab"}),this.state.showTitleOptions?n:i]}),Object(p.jsx)("div",{style:{marginLeft:"auto",marginRight:"auto"},children:this.state.history.length>0?Object(p.jsx)(dt.a,{data:this.state.history,onClick:function(e){t.loadLocalSong(e)}}):""}),Object(p.jsx)("div",{style:kt,children:Object(p.jsxs)("p",{children:["tabit relies on publicly available sound libraries listed at ",Object(p.jsx)("a",{href:"https://github.com/andrew-murray/tabit",children:"https://github.com/andrew-murray/tabit"})]})})]})}},{key:"renderPatternDrawer",value:function(t,e){var n,i=this,r=this.props,o=function(t){vt(t)||i.setState({patternsOpen:!1})};return Object(p.jsxs)(S.a,{disableBackdropTransition:!t,disableDiscovery:t,className:r.drawer,variant:e?void 0:"persistent",open:this.state.patternsOpen,onOpen:function(t){vt(t)||i.setState({patternsOpen:!0})},onClose:o,children:[Object(p.jsx)("div",{className:r.drawerHeader,children:Object(p.jsx)(P.a,{onClick:o,children:Object(p.jsx)(E.a,{})})}),Object(p.jsx)(G.a,{}),Object(p.jsx)("div",{className:r.drawerContainer,children:Object(p.jsx)(C.a,{children:(null!==(n=this.state.patterns)&&void 0!==n?n:[]).map((function(t,e){return Object(p.jsx)(T.a,{button:!0,onClick:function(){return i.selectPattern(e)},children:Object(p.jsx)(R.a,{primary:t.name})},"drawer-pattern"+e.toString())}))})})]})}},{key:"renderSettingsDrawer",value:function(t,e,n){var i=this,r=this.props,a=function(t){vt(t)||i.setState({settingsOpen:!1})},s=this.state.patterns[this.state.selectedPattern],u={name:s.name,resolution:s.resolution,length:this.getTrackLength(s)};return Object(p.jsxs)(S.a,{disableBackdropTransition:!t,disableDiscovery:t,className:r.drawer,variant:e?void 0:"persistent",anchor:"right",open:this.state.settingsOpen,onOpen:function(t){vt(t)||i.setState({settingsOpen:!0})},onClose:a,classes:{paper:r.drawerPaper},children:[Object(p.jsx)("div",{className:r.drawerHeader,children:Object(p.jsx)(P.a,{onClick:a,children:Object(p.jsx)(B.a,{})})}),Object(p.jsx)(G.a,{}),Object(p.jsx)(Y.b,{onChange:function(t){for(var e=Array.from(i.state.patternSettings),n=Object.assign({},i.state.formatSettings),r=0,a=Object.entries(t);r<a.length;r++){var s=Object(o.a)(a[r],2),u=s[0],c=s[1];u in e[i.state.selectedPattern]?e[i.state.selectedPattern][u]=c:n[u]=c}i.setState({formatSettings:n,patternSettings:e})},settings:n,pattern:u}),Object(p.jsx)(M.a,{style:{backgroundColor:"white",color:gt.palette.background.default},onClick:function(t){i.save()},children:"Download"}),Object(p.jsx)(G.a,{}),Object(p.jsx)(M.a,{style:{backgroundColor:"white",color:gt.palette.background.default},onClick:function(t){i.share()},children:"Share"})]})}},{key:"renderSharingDialog",value:function(){var t=this;return Object(p.jsx)(K.a,{open:this.state.showSharingDialog,onClose:function(e){t.setState({showSharingDialog:!1})},"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:Object(p.jsxs)(V.a,{children:[Object(p.jsx)(W.a,{id:"alert-dialog-description",children:"Your song is available at"}),Object(p.jsxs)(W.a,{children:[this.state.permanentUrl,Object(p.jsx)(P.a,{onClick:function(e){pt()(t.state.permanentUrl)},children:Object(p.jsx)(H.a,{})})]}),Object(p.jsx)(J.a,{children:Object(p.jsx)(M.a,{onClick:function(e){t.setState({showSharingDialog:!1})},children:"Close"})})]})})}},{key:"renderMainContent",value:function(){var t=this;if(null==this.state.patterns||0===this.state.patterns.length)return this.renderTitlePage();var e=this.state.patterns[this.state.selectedPattern],n=Object.assign(Object.assign({},this.state.formatSettings),this.state.patternSettings[this.state.selectedPattern]),o=this.renderPattern(e,n),a=this.props,s=i.browser&&/iPad|iPhone|iPod/.test(navigator.userAgent),u=Object(ht.a)(),c=u?12:8;return Object(p.jsxs)(d.a.Fragment,{children:[this.renderSharingDialog(),Object(p.jsx)(bt.a,{position:"static",style:{backgroundColor:"#424242",color:"white"},children:Object(p.jsxs)(ft.a,{variant:"dense",style:{flexGrow:1},children:[Object(p.jsx)(P.a,{color:"inherit","aria-label":"home",edge:"start",onClick:function(e){t.setState({patternsOpen:!0})},className:Object(f.a)(Object(r.a)({},a.hide,!this.state.patternsOpen)),children:Object(p.jsx)(N.a,{})}),Object(p.jsx)(P.a,{color:"inherit","aria-label":"open pattern list",edge:"start",component:X.b,to:"/",children:Object(p.jsx)(I.a,{})}),Object(p.jsx)(jt.a,{variant:"h6",color:"inherit",noWrap:!0,style:{flexGrow:1,textOverflow:"ellipsis"},children:this.state.songName}),Object(p.jsx)(P.a,{color:"inherit","aria-label":"open settings",edge:"end",onClick:function(e){t.setState({settingsOpen:!0})},className:Object(f.a)(this.state.settingsOpen&&a.hide),children:Object(p.jsx)(z.a,{})})]})}),o,Object(p.jsxs)(tt.a,{container:!0,children:[Object(p.jsx)(tt.a,{item:!0,xs:(12-c)/2}),Object(p.jsx)(tt.a,{item:!0,xs:c,children:Object(p.jsx)($.a,{instruments:this.state.instruments,instrumentIndex:this.state.instrumentIndex,instrumentMask:this.state.instrumentMask,onChange:function(e){t.setState({instruments:e,instrumentMask:Object($.b)(t.state.instrumentIndex,e)})},onVolumeEvent:function(e){if("volume"in e){var n=t.state.instrumentIndex[e.instrument].id;t.audio.setVolumeForInstrument(n,e.volume)}else if("muted"in e){var i=t.state.instrumentIndex[e.instrument].id;t.audio.setMutedForInstrument(i,e.muted)}}})}),Object(p.jsx)(tt.a,{item:!0,xs:(12-c)/2})]}),this.renderPatternDrawer(s,u),this.renderSettingsDrawer(s,u,n)]})}},{key:"render",value:function(){var t=this.renderMainContent();return Object(p.jsx)("div",{className:"App",children:Object(p.jsxs)(x.a,{theme:gt,children:[Object(p.jsx)(w.a,{}),t]})})}}]),h}(d.a.Component);e.a=Object(q.a)(yt)(Object(at.g)(xt))}).call(this,n(67).Buffer,n(68))},185:function(t,e,n){"use strict";n.d(e,"b",(function(){return g})),n.d(e,"a",(function(){return v}));var i=n(39),r=n(10),o=n(8),a=(n(0),n(191)),s=n(34),u=n(458),c=n(440),l=n(439),m=n(442),p=n(290),h=n(441),d=n(454),f=n(49),b=Object(a.a)((function(t){return{formControl:{margin:t.spacing(1),minWidth:120}}}));function j(t){var e=t.replace(/([A-Z])/g," $1");return e[0].toUpperCase()+e.slice(1)}function g(t){var e=b(t),n=Object(s.a)();function a(t){return" "===t?"space":t}function g(t){return"space"===t?" ":t}var v=function(e,n){var o=Object(r.a)(Object(r.a)({},t.settings),{},Object(i.a)({},e,n));t.onChange(o)},O=function(e){var n=Object(r.a)(Object(r.a)({},t.settings),{},Object(i.a)({},e.target.name,e.target.checked));t.onChange(n)};function k(n,i){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:g,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:a,m="form-control-"+n+"-id";return Object(o.jsxs)(l.a,{variant:"filled",className:e.formControl,id:m,children:[Object(o.jsx)(u.a,{id:"settings-option-{name}",children:n}),Object(o.jsx)(d.a,{labelId:"settings-option-"+n+"-labelID",id:"settings-option-"+n+"-id",value:s(t.settings[n]),name:n,onChange:function(t){return v(t.target.name,r(t.target.value))},children:i.map((function(t){return Object(o.jsx)(c.a,{value:s(t),children:s(t)},"settings-menu-item-"+n+"-"+t)}))})]},m)}for(var y=[],x=0,S=[2,3,4,5,6,7,8,14,16,32];x<S.length;x++){var w=48*S[x];w%t.settings.beatResolution===0&&w<=t.pattern.length&&y.push(w)}y.includes(t.pattern.length)||(y.push(t.pattern.length),y.sort());for(var C=[],T=0,R=[24,36,48,72,96];T<R.length;T++){var P=R[T];P%t.pattern.resolution===0&&t.settings.lineResolution%P===0&&C.push(P)}return Object(o.jsxs)(m.a,{className:e.root,children:[f.a.FORMAT_CONFIG_STRINGS.map((function(t){return k(t[0],t[1])})).reduce((function(t,e){return[t,e]})),f.a.FORMAT_CONFIG_BOOLS.map((function(e){return n=e,Object(o.jsx)(p.a,{control:Object(o.jsx)(h.a,{checked:t.settings[n],onChange:O,name:n}),label:j(n)},"switch-"+n);var n})).reduce((function(t,e){return[t,e]})),Object(o.jsx)("div",{style:{backgroundColor:"white",color:n.palette.background.default},children:Object(o.jsxs)("p",{children:[" ",t.pattern.name+" Options"," "]})}),k("beatResolution",C,(function(t){return t.toString()}),(function(t){return parseInt(t)})),k("lineResolution",y,(function(e){return t.settings.beatResolution*parseInt(e)}),(function(e){return(e/t.settings.beatResolution).toString()}))]})}var v=f.a.DEFAULT_FORMAT_CONFIG},259:function(t,e,n){"use strict";var i=n(10),r=n(57),o=n(1),a=n(2),s=n(4),u=n(3),c=n(8),l=n(0),m=n.n(l),p=n(65),h=function(t){Object(s.a)(n,t);var e=Object(u.a)(n);function n(t){var i;return Object(o.a)(this,n),(i=e.call(this,t)).hiddenFileInput=m.a.createRef(),i}return Object(a.a)(n,[{key:"onChange",value:function(t){var e=this,n=t.target.files[0],i=new FileReader;i.onload=function(t){e.props.onImport&&e.props.onImport({file:n,content:t.target.result})},i.readAsText(n)}},{key:"render",value:function(){var t=this,e=Object(i.a)({},this.props),n=(e.onImport,e.accept),o=Object(r.a)(e,["onImport","accept"]);return Object(c.jsxs)(m.a.Fragment,{children:[Object(c.jsx)(p.a,Object(i.a)(Object(i.a)({onClick:function(e){t.hiddenFileInput.current.click()}},o),{},{children:"Import File"})),Object(c.jsx)("input",{type:"file",hidden:!0,accept:n,onChange:function(e){return t.onChange(e)},ref:this.hiddenFileInput})]})}}]),n}(m.a.Component);e.a=h},263:function(t,e,n){"use strict";var i=n(9),r=n.n(i),o=n(17),a=n(18),s=n(15),u=n(16),c=n(108),l=n(264),m=n.n(l),p=n(134);function h(t,e){var n=Array.from(t.notes,(function(t){return t.position}));return Object(p.a)(n,e)}function d(t){var e=t.song.instrumentList[0].instrument,n=Array.from(e,(function(t){var e=t.instrumentComponent[0],n={id:parseInt(t.id),name:t.name[0],volume:parseFloat(t.volume),muted:"true"===t.isMuted[0],gain:parseFloat(t.gain),drumkit:t.drumkit[0]};return"layer"in e&&(n.filename=e.layer[0].filename[0]),n})),i=t.song.patternList[0].pattern,r=Array.from(i,(function(t){var e=t.noteList[0].note,n=parseInt(t.size),i=[];return e&&(i=(i=Array.from(e,(function(t){return{position:parseInt(t.position),instrument:parseInt(t.instrument)}}))).filter((function(t){return t.position<n}))),{size:n,name:t.name[0],notes:i}})),o=Array.from(r,(function(t){var e,i=h(t,t.size),r={},o=Object(u.a)(n);try{var a=function(){var n=e.value,o=t.notes.filter((function(t){return t.instrument===n.id})),a=Array.from(o,(function(t){return t.position}));r[n.id.toString()]=c.a.fromPositions(a,t.size,i)};for(o.s();!(e=o.n()).done;)a()}catch(s){o.e(s)}finally{o.f()}return t.resolution=i,t.instrumentTracks=r,t}));if(t.song.virtualPatternList){var l=t.song.virtualPatternList[0].pattern;if(l){for(var m={},p=0,d=Array.from(l);p<d.length;p++){var f=d[p],b=f.name[0],j=Array.from(f.virtual);m[b]=new Set(j)}for(var g=0;g<20;++g){for(var v={},O=!1,k=0,y=Object.entries(m);k<y.length;k++){var x,S=Object(s.a)(y[k],2),w=S[0],C=S[1],T=new Set(C),R=Object(u.a)(T);try{for(R.s();!(x=R.n()).done;){var P=x.value;P in m&&(T=new Set([].concat(Object(a.a)(T),Object(a.a)(m[P]))))}}catch(F){R.e(F)}finally{R.f()}O=O||T.size!==C.size,v[w]=T}if(!O)break;if(20===g)throw new Error("Reached max virtual_pattern recursion depth.");m=v}for(var M=function(){var t,e=Object(s.a)(N[A],2),n=e[0],i=e[1],r=o.find((function(t){return t.name===n})),a=Object(u.a)(i);try{var c=function(){for(var e=t.value,n=o.find((function(t){return t.name===e})),i=0,a=Object.entries(n.instrumentTracks);i<a.length;i++){var u=Object(s.a)(a[i],2),c=u[0],l=u[1];if(c in r.instrumentTracks){var m=r.instrumentTracks[c].aggregate(l);m.rep.length=r.size/m.resolution,r.instrumentTracks[c]=m}else{var p=l.format(r.resolution);p.length=r.size/r.resolution,r.instrumentTracks[c]=p}}};for(a.s();!(t=a.n()).done;)c()}catch(F){a.e(F)}finally{a.f()}var l=h(r,r.size);r.resolution=l;for(var m=0,p=Object.entries(r.instrumentTracks);m<p.length;m++){var d=Object(s.a)(p[m],2),f=d[0],b=d[1];r[f]=b.format(l)}},A=0,N=Object.entries(m);A<N.length;A++)M()}}return{instruments:n,patterns:o}}function f(){return(f=Object(o.a)(r.a.mark((function t(e){var n;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=new m.a.Parser,t.abrupt("return",n.parseStringPromise(e).then(d));case 2:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var b={parseHydrogenPromise:function(t){return f.apply(this,arguments)}};e.a=b},272:function(t){t.exports=JSON.parse('{"instruments":[{"id":23,"name":"Stick","volume":0.99569,"muted":false,"gain":1,"drumkit":"GMRockKit","filename":"SideStick-Softest.wav"},{"id":24,"name":"Kick Short","volume":1,"muted":false,"gain":1,"drumkit":"TR808EmulationKit","filename":"808_Kick_Short.flac"},{"id":20,"name":"Stick","volume":0.193966,"muted":false,"gain":1,"drumkit":"DeathMetal"},{"id":26,"name":"Stick","volume":0.99569,"muted":false,"gain":1,"drumkit":"GMRockKit","filename":"SideStick-Softest.wav"},{"id":25,"name":"Kick Short","volume":1,"muted":false,"gain":1,"drumkit":"TR808EmulationKit","filename":"808_Kick_Short.flac"},{"id":22,"name":"tom02","volume":0.65,"muted":false,"gain":1,"drumkit":"DeathMetal"},{"id":27,"name":"snare","volume":0.49,"muted":false,"gain":1,"drumkit":"DeathMetal","filename":"014b.WAV"},{"id":13,"name":"Snare 1","volume":0.35,"muted":false,"gain":0.4,"drumkit":"DeathMetal"},{"id":10,"name":"Djembe4 Slap","volume":0.12931,"muted":false,"gain":1,"drumkit":"circAfrique v4","filename":"Djembe4 Slap.wav"},{"id":11,"name":"Djembe4 Tone","volume":0.12931,"muted":false,"gain":0.95,"drumkit":"circAfrique v4","filename":"Djembe4 Tone.wav"},{"id":12,"name":"Djembe4 Bass","volume":0.181034,"muted":false,"gain":1.5,"drumkit":"circAfrique v4","filename":"Djembe4 Bass.wav"},{"id":16,"name":"Shaker","volume":0.232759,"muted":false,"gain":2.2,"drumkit":"TR808EmulationKit","filename":"808_Shaker.flac"},{"id":21,"name":"Shaker","volume":1.5,"muted":false,"gain":2.45,"drumkit":"TR808EmulationKit","filename":"808_Shaker.flac"}],"patterns":[{"size":384,"name":"k-1","notes":[{"position":0,"instrument":21},{"position":0,"instrument":24},{"position":0,"instrument":26},{"position":0,"instrument":11},{"position":12,"instrument":21},{"position":24,"instrument":11},{"position":24,"instrument":21},{"position":24,"instrument":24},{"position":24,"instrument":26},{"position":24,"instrument":27},{"position":36,"instrument":21},{"position":36,"instrument":11},{"position":48,"instrument":21},{"position":48,"instrument":11},{"position":48,"instrument":23},{"position":48,"instrument":26},{"position":48,"instrument":27},{"position":60,"instrument":24},{"position":72,"instrument":10},{"position":72,"instrument":21},{"position":72,"instrument":26},{"position":84,"instrument":25},{"position":96,"instrument":23},{"position":96,"instrument":26},{"position":108,"instrument":25},{"position":120,"instrument":12},{"position":120,"instrument":25},{"position":144,"instrument":12},{"position":144,"instrument":21},{"position":144,"instrument":23},{"position":144,"instrument":25},{"position":144,"instrument":27},{"position":156,"instrument":21},{"position":168,"instrument":21},{"position":180,"instrument":27},{"position":192,"instrument":11},{"position":192,"instrument":21},{"position":192,"instrument":24},{"position":192,"instrument":26},{"position":216,"instrument":12},{"position":216,"instrument":21},{"position":216,"instrument":24},{"position":216,"instrument":26},{"position":216,"instrument":27},{"position":240,"instrument":11},{"position":240,"instrument":23},{"position":240,"instrument":26},{"position":240,"instrument":27},{"position":252,"instrument":12},{"position":252,"instrument":24},{"position":264,"instrument":21},{"position":264,"instrument":27},{"position":276,"instrument":11},{"position":276,"instrument":25},{"position":288,"instrument":12},{"position":288,"instrument":21},{"position":288,"instrument":24},{"position":288,"instrument":25},{"position":300,"instrument":21},{"position":312,"instrument":11},{"position":312,"instrument":23},{"position":312,"instrument":26},{"position":324,"instrument":12},{"position":324,"instrument":21},{"position":324,"instrument":24},{"position":324,"instrument":25},{"position":336,"instrument":21},{"position":336,"instrument":27},{"position":360,"instrument":21},{"position":360,"instrument":10},{"position":360,"instrument":23},{"position":360,"instrument":26},{"position":360,"instrument":27},{"position":372,"instrument":21},{"position":372,"instrument":27}],"resolution":12,"instrumentTracks":{"10":{"rep":[0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0],"resolution":12},"11":{"rep":[1,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,1,0,0,1,0,0,1,0,0,0,0,0],"resolution":12},"12":{"rep":[0,0,0,0,0,0,0,0,0,0,1,0,1,0,0,0,0,0,1,0,0,1,0,0,1,0,0,1,0,0,0,0],"resolution":12},"13":{"rep":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"resolution":12},"16":{"rep":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"resolution":12},"20":{"rep":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"resolution":12},"21":{"rep":[1,1,1,1,1,0,1,0,0,0,0,0,1,1,1,0,1,0,1,0,0,0,1,0,1,1,0,1,1,0,1,1],"resolution":12},"22":{"rep":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"resolution":12},"23":{"rep":[0,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,1,0],"resolution":12},"24":{"rep":[1,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,1,0,1,0,0,1,0,0,1,0,0,1,0,0,0,0],"resolution":12},"25":{"rep":[0,0,0,0,0,0,0,1,0,1,1,0,1,0,0,0,0,0,0,0,0,0,0,1,1,0,0,1,0,0,0,0],"resolution":12},"26":{"rep":[1,0,1,0,1,0,1,0,1,0,0,0,0,0,0,0,1,0,1,0,1,0,0,0,0,0,1,0,0,0,1,0],"resolution":12},"27":{"rep":[0,0,1,0,1,0,0,0,0,0,0,0,1,0,0,1,0,0,1,0,1,0,1,0,0,0,0,0,1,0,1,1],"resolution":12}}},{"size":384,"name":"k-2","notes":[{"position":0,"instrument":12},{"position":0,"instrument":21},{"position":0,"instrument":24},{"position":0,"instrument":25},{"position":0,"instrument":27},{"position":12,"instrument":12},{"position":12,"instrument":24},{"position":12,"instrument":25},{"position":24,"instrument":12},{"position":24,"instrument":21},{"position":24,"instrument":24},{"position":24,"instrument":25},{"position":36,"instrument":21},{"position":48,"instrument":21},{"position":48,"instrument":10},{"position":48,"instrument":23},{"position":48,"instrument":26},{"position":48,"instrument":27},{"position":72,"instrument":21},{"position":84,"instrument":21},{"position":84,"instrument":27},{"position":96,"instrument":21},{"position":96,"instrument":23},{"position":96,"instrument":26},{"position":108,"instrument":21},{"position":108,"instrument":27},{"position":120,"instrument":11},{"position":120,"instrument":21},{"position":132,"instrument":10},{"position":132,"instrument":27},{"position":144,"instrument":23},{"position":144,"instrument":26},{"position":144,"instrument":27},{"position":156,"instrument":10},{"position":168,"instrument":12},{"position":168,"instrument":21},{"position":168,"instrument":24},{"position":168,"instrument":25},{"position":180,"instrument":12},{"position":180,"instrument":24},{"position":180,"instrument":25},{"position":192,"instrument":12},{"position":192,"instrument":21},{"position":192,"instrument":24},{"position":192,"instrument":25},{"position":192,"instrument":27},{"position":216,"instrument":21},{"position":216,"instrument":11},{"position":228,"instrument":11},{"position":228,"instrument":21},{"position":228,"instrument":27},{"position":240,"instrument":21},{"position":240,"instrument":23},{"position":240,"instrument":26},{"position":240,"instrument":27},{"position":252,"instrument":10},{"position":264,"instrument":21},{"position":264,"instrument":11},{"position":276,"instrument":21},{"position":276,"instrument":27},{"position":288,"instrument":11},{"position":288,"instrument":21},{"position":288,"instrument":23},{"position":288,"instrument":26},{"position":300,"instrument":11},{"position":312,"instrument":21},{"position":324,"instrument":10},{"position":336,"instrument":11},{"position":336,"instrument":23},{"position":336,"instrument":26},{"position":360,"instrument":21}],"resolution":12,"instrumentTracks":{"10":{"rep":[0,0,0,0,1,0,0,0,0,0,0,1,0,1,0,0,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0],"resolution":12},"11":{"rep":[0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,1,1,0,0,1,0,1,1,0,0,1,0,0,0],"resolution":12},"12":{"rep":[1,1,1,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"resolution":12},"13":{"rep":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"resolution":12},"16":{"rep":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"resolution":12},"20":{"rep":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"resolution":12},"21":{"rep":[1,0,1,1,1,0,1,1,1,1,1,0,0,0,1,0,1,0,1,1,1,0,1,1,1,0,1,0,0,0,1,0],"resolution":12},"22":{"rep":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"resolution":12},"23":{"rep":[0,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0],"resolution":12},"24":{"rep":[1,1,1,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"resolution":12},"25":{"rep":[1,1,1,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"resolution":12},"26":{"rep":[0,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0],"resolution":12},"27":{"rep":[1,0,0,0,1,0,0,1,0,1,0,1,1,0,0,0,1,0,0,1,1,0,0,1,0,0,0,0,0,0,0,0],"resolution":12}}},{"size":192,"name":"lightbulb","notes":[{"position":0,"instrument":24},{"position":12,"instrument":24},{"position":24,"instrument":24},{"position":36,"instrument":24},{"position":48,"instrument":24},{"position":96,"instrument":27},{"position":144,"instrument":24},{"position":160,"instrument":24},{"position":176,"instrument":24}],"resolution":4,"instrumentTracks":{"10":{"rep":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"resolution":4},"11":{"rep":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"resolution":4},"12":{"rep":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"resolution":4},"13":{"rep":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"resolution":4},"16":{"rep":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"resolution":4},"20":{"rep":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"resolution":4},"21":{"rep":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"resolution":4},"22":{"rep":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"resolution":4},"23":{"rep":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"resolution":4},"24":{"rep":[1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0],"resolution":4},"25":{"rep":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"resolution":4},"26":{"rep":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"resolution":4},"27":{"rep":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"resolution":4}}},{"size":192,"name":"break","notes":[{"position":24,"instrument":21},{"position":24,"instrument":11},{"position":24,"instrument":27},{"position":48,"instrument":21},{"position":48,"instrument":11},{"position":48,"instrument":27},{"position":96,"instrument":21},{"position":96,"instrument":11},{"position":96,"instrument":27},{"position":120,"instrument":21},{"position":120,"instrument":11},{"position":120,"instrument":27},{"position":144,"instrument":24},{"position":168,"instrument":21},{"position":168,"instrument":11},{"position":168,"instrument":24},{"position":168,"instrument":27}],"resolution":24,"instrumentTracks":{"10":{"rep":[0,0,0,0,0,0,0,0],"resolution":24},"11":{"rep":[0,1,1,0,1,1,0,1],"resolution":24},"12":{"rep":[0,0,0,0,0,0,0,0],"resolution":24},"13":{"rep":[0,0,0,0,0,0,0,0],"resolution":24},"16":{"rep":[0,0,0,0,0,0,0,0],"resolution":24},"20":{"rep":[0,0,0,0,0,0,0,0],"resolution":24},"21":{"rep":[0,1,1,0,1,1,0,1],"resolution":24},"22":{"rep":[0,0,0,0,0,0,0,0],"resolution":24},"23":{"rep":[0,0,0,0,0,0,0,0],"resolution":24},"24":{"rep":[0,0,0,0,0,0,1,1],"resolution":24},"25":{"rep":[0,0,0,0,0,0,0,0],"resolution":24},"26":{"rep":[0,0,0,0,0,0,0,0],"resolution":24},"27":{"rep":[0,1,1,0,1,1,0,1],"resolution":24}}},{"size":192,"name":"squash","notes":[{"position":0,"instrument":21},{"position":0,"instrument":12},{"position":0,"instrument":24},{"position":0,"instrument":27},{"position":48,"instrument":21},{"position":48,"instrument":12},{"position":48,"instrument":24},{"position":48,"instrument":27},{"position":96,"instrument":21},{"position":96,"instrument":12},{"position":96,"instrument":24},{"position":96,"instrument":27},{"position":144,"instrument":21},{"position":144,"instrument":12},{"position":144,"instrument":24},{"position":144,"instrument":27}],"resolution":48,"instrumentTracks":{"10":{"rep":[0,0,0,0],"resolution":48},"11":{"rep":[0,0,0,0],"resolution":48},"12":{"rep":[1,1,1,1],"resolution":48},"13":{"rep":[0,0,0,0],"resolution":48},"16":{"rep":[0,0,0,0],"resolution":48},"20":{"rep":[0,0,0,0],"resolution":48},"21":{"rep":[1,1,1,1],"resolution":48},"22":{"rep":[0,0,0,0],"resolution":48},"23":{"rep":[0,0,0,0],"resolution":48},"24":{"rep":[1,1,1,1],"resolution":48},"25":{"rep":[0,0,0,0],"resolution":48},"26":{"rep":[0,0,0,0],"resolution":48},"27":{"rep":[1,1,1,1],"resolution":48}}}]}')},274:function(t,e,n){"use strict";var i=n(8),r=n(0),o=n.n(r),a=n(53),s=n(275),u=n.n(s),c=n(276),l=n.n(c),m=n(295),p=n(54);e.a=function(t){return Object(i.jsxs)(o.a.Fragment,{children:[Object(i.jsxs)("div",{children:[Object(i.jsx)(a.a,{color:"primary","aria-label":"play",onClick:function(){t.onPlay&&t.onPlay()},children:Object(i.jsx)(u.a,{})}),Object(i.jsx)(a.a,{color:"secondary","aria-label":"stop",onClick:function(){t.onStop&&t.onStop()},children:Object(i.jsx)(l.a,{})})]}),Object(i.jsxs)(p.a,{container:!0,children:[Object(i.jsx)(p.a,{item:!0,xs:4}),Object(i.jsx)(p.a,{item:!0,xs:4,children:Object(i.jsx)(m.a,{defaultValue:100,min:60,step:1,max:180,onChange:function(e,n){t.onTempoChange&&t.onTempoChange(n)},valueLabelDisplay:"auto"})}),Object(i.jsx)(p.a,{item:!0,xs:4})]})]})}},278:function(t,e,n){"use strict";var i=n(18),r=n(8),o=(n(0),n(191)),a=n(289),s=n(192),u=n(293),c=Object(o.a)((function(t){return{root:{width:"100%",height:400,maxWidth:300,backgroundColor:t.palette.background.paper}}}));var l=[{name:"roudesann",id:"3b415c320894e531f4daa93711949e78c0aef281",date:Date.now()},{name:"groovy",id:"f23c52481af0c08f5037d820a0cf33e886061ffc",date:Date.now()},{name:"too_much",id:"e7db6989c558e201bceff225d796f0d6073047a9",date:Date.now()}];e.a=function(t){var e,n=c(),o=null!==(e=t.data)&&void 0!==e?e:l;return Object(r.jsxs)("div",{style:{maxHeight:200,overflow:"auto"},className:n.root,children:[Object(r.jsx)("div",{children:"Recently viewed"}),Object(r.jsx)(a.a,{children:Object(i.a)(o.keys()).map((function(e){return function(t){return Object(r.jsx)(s.a,{button:!0,style:t.style,onClick:t.onClick,children:Object(r.jsx)(u.a,{primary:t.name,secondary:new Date(t.date).toLocaleDateString()})},t.index)}({index:e,name:o[e].name,id:o[e].id,date:o[e].date,onClick:function(){t.onClick&&t.onClick(o[e])}})}))})]})}},285:function(t,e,n){"use strict";var i=n(18),r=n(1),o=n(2),a=n(4),s=n(3),u=n(8),c=n(0),l=n.n(c),m=n(49),p=n(59),h=n(13),d=function(t){return{root:{whiteSpace:"pre",fontFamily:"Roboto Mono",fontSize:"0.8rem","@media (min-width:800px)":{fontSize:"1rem"}}}},f=Object(h.a)(d)(p.a),b=function(t){Object(a.a)(n,t);var e=Object(s.a)(n);function n(t){var i;return Object(r.a)(this,n),(i=e.call(this,t)).state={},i}return Object(o.a)(n,[{key:"render",value:function(){var t=this,e=Object.values(this.props.tracks);if(0===e.length)return Object(u.jsx)(l.a.Fragment,{});var n=m.a.formatPatternString(this.props.instrument,this.props.tracks,this.props.config.restMark),r=e[0].resolution;if(this.props.config.lineResolution%this.props.config.beatResolution!==0&&n.length*r>this.props.config.lineResolution)throw new Error("This code only supports a beatResolution that divides the lineResolution");var o=m.a.chunkArray(n,this.props.config.lineResolution/r,0),a=this.props.config.lineResolution/this.props.config.beatResolution,s=this.props.config.beatResolution/r,c=o.map((function(t){return m.a.chunkArray(t,s)})),p=Object(i.a)(o.keys()),h=function(e,n,r){var o=Object(i.a)(n.keys());return Object(u.jsxs)(f,{children:[Object(u.jsx)(f,{variant:"subtitle1",component:"span",children:t.props.config.lineMark},"line-start-"+e),o.map((function(e){return Object(u.jsxs)(l.a.Fragment,{children:[Object(u.jsx)(f,{variant:"subtitle1",component:"span",className:e+r===t.props.activeNote?"activeNote":"",children:n[e].join("")},"span-beat-"+(e+r).toString()),Object(u.jsx)(f,{variant:"subtitle1",component:"span",children:t.props.config.showBeatMark&&e!==o[o.length-1]?t.props.config.beatMark:""},"span-beat-marker-"+(e+r).toString())]},"fragment-beat-"+(e+r).toString())})),Object(u.jsx)(f,{variant:"subtitle1",component:"span",children:t.props.config.lineMark},"line-end-"+e)]},"pattern-line-"+e)},d=m.a.createNumberMarker(this.props.config.numberRestMark,this.props.config.beatResolution,r,Math.min(this.props.config.lineResolution,o[0].length*r)),b=m.a.chunkArray(d,this.props.config.beatResolution/r);return Object(u.jsxs)(l.a.Fragment,{children:[this.props.config.showBeatNumbers?h("beat",b,0):"",p.map((function(t){return h(t.toString(),c[t],a*t)}))]})}}]),n}(l.a.Component),j=Object(h.a)(d)(b);var g=function(t){Object(a.a)(n,t);var e=Object(s.a)(n);function n(t){var i;return Object(r.a)(this,n),(i=e.call(this,t)).state={},i}return Object(o.a)(n,[{key:"render",value:function(){var t=function(t,e){var n=t?t.toLowerCase():"";return["h1","h2","h3","h4","h5","h6"].includes(n)?n:e}(this.props.headingLevel,"h4");return Object(u.jsxs)("article",{children:[Object(u.jsx)(t,{children:this.props.instrumentName}),Object(u.jsx)(j,{instrument:this.props.instrument,tracks:this.props.tracks,config:this.props.config,activeNote:this.props.activeNote})]})}}]),n}(l.a.Component),v=function(t){Object(a.a)(n,t);var e=Object(s.a)(n);function n(t){var i;return Object(r.a)(this,n),(i=e.call(this,t)).state={patternTime:void 0},i}return Object(o.a)(n,[{key:"onPatternTimeChange",value:function(t){null!==t&&void 0!==t?this.setState({patternTime:t}):this.setState({patternTime:void 0})}},{key:"render",value:function(){var t=this,e=this.props.classes,n=Object(i.a)(this.props.instruments.keys()),r=this.props.config.beatResolution;return Object(u.jsx)("div",{className:e.root,children:Object(u.jsx)("div",{style:{margin:"auto"},children:n.map((function(e){return Object(u.jsx)(g,{instrumentName:t.props.instruments[e][0],instrument:t.props.instruments[e][1],tracks:t.props.tracks,config:t.props.config,activeNote:void 0!==t.state.patternTime?Math.floor(t.state.patternTime/r):void 0},"part-"+e.toString())}))})})}}]),n}(l.a.Component);e.a=Object(h.a)((function(t){return{root:{"margin-bottom":t.spacing(2),fontFamily:"Roboto Mono",textAlign:"left",whiteSpace:"pre","& .activeNote":{color:t.palette.primary.main},margin:"auto"}}}))(v)},316:function(t,e,n){},334:function(t,e){},336:function(t,e){},346:function(t,e,n){},438:function(t,e,n){"use strict";n.r(e);var i=n(8),r=n(0),o=n.n(r),a=n(24),s=n.n(a),u=(n(316),n(104)),c=n(30),l=n(184);function m(){return Object(i.jsx)(u.a,{basename:"/tabit",children:Object(i.jsxs)(c.d,{children:[Object(i.jsx)(c.b,{path:"/song/:song",component:l.a}),Object(i.jsx)(c.b,{path:"/launch",component:l.a}),Object(i.jsx)(c.b,{path:"/",children:Object(i.jsx)(c.a,{to:"/launch"})})]})})}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(Object(i.jsx)(o.a.StrictMode,{children:Object(i.jsx)(m,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))},49:function(t,e,n){"use strict";var i=n(15),r=n(1),o=n(2),a=function(){function t(){Object(r.a)(this,t)}return Object(o.a)(t,null,[{key:"validateConfig",value:function(t,e){if(null!=e&&t.beatResolution%e!==0)throw new Error("patternResolution doesn't divide beatResolution");if(t.lineResolution<=0)throw new Error("config.lineResolution must be greater than zero")}},{key:"resolveConfig",value:function(e){for(var n=0,i=Object.keys(e);n<i.length;n++){var r=i[n];if(!t.DEFAULT_FORMAT_CONFIG.hasOwnProperty(r))throw new Error("passed unrecognised property "+r)}return Object.assign(Object.assign({},t.DEFAULT_FORMAT_CONFIG),e)}},{key:"chunkString",value:function(t,e){if(e<=0)throw new Error("chunkSize must be > 0");return t.match(new RegExp(".{1,"+e+"}","g"))}},{key:"chunkArray",value:function(t,e){if(e<=0)throw new Error("chunkSize must be > 0");for(var n=[],i=0;i<t.length;i+=e)n.push(t.slice(i,Math.min(i+e,t.length)));return n}},{key:"createNumberMarker",value:function(t,e,n,i){if(i<=0)throw new Error("lineLength <= 0");if(e%n!==0)throw new Error("patternResolution "+n.toString()+" does not divide beatResolution "+e.toString());for(var r=Math.ceil(i/e),o=Array.from(Array(i/n),(function(e){return t})),a=0;a<r;a++)o[a*(e/n)]=((a+1)%10).toString();return o}},{key:"formatLineWithMarkers",value:function(e,n,i,r){t.validateConfig(e);for(var o=e.beatResolution/i,a=r?function(t,e){return"<span class='note-"+(n=e,((n+="").length>=(i=4)?n:new Array(i-n.length+1).join("0")+n)+"'>")+t+"</span>";var n,i}:function(t,e){return t},s="",u=0;u<n.length;++u){var c=i*u;s+=a(n.charAt(u),c)}var l=e.showBeatMark?t.chunkString(s,o*a("X",0).length).join(e.beatMark):s;return e.lineMark+l+e.lineMark}},{key:"defaultLineResolution",value:function(t,e){var n=Object.values(t);if(0===n.length)return 384;var i=n[0].length(),r=i/e;return r<=12?i:r>32?768:[i,i/2,i/3,i/2,i,i/3,i,i/4,i/3,i/2,i,i/3,i/5,i,i/3,i/4,i,i/6,i,i/4][r-13]}},{key:"guessPerPatternSettings",value:function(e){return{lineResolution:t.defaultLineResolution(e,48),beatResolution:48}}},{key:"formatPatternString",value:function(t,e,n){var r=Object.values(e);if(0===r.length)return"";for(var o=r[0].length(),a=r[0].resolution,s=Array(o/a).fill(n),u=0;u<s.length;++u)for(var c=0,l=Object.entries(t);c<l.length;c++){var m=Object(i.a)(l[c],2),p=m[0],h=m[1],d=e[p];null!=d&&1===d.rep[u]&&(s[u]=h)}return s}},{key:"fromInstrumentAndTrack",value:function(e,n,i){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=t.resolveConfig(r),a=Object.values(n);if(0===a.length)return"";var s=t.formatPatternString(e,n,o.restMark),u=s.join(""),c=a[0].resolution,l=a[0].length(),m=t.chunkString(u,o.lineResolution/c),p=[];o.showBeatNumbers&&p.push(t.formatLineWithMarkers(o,t.createNumberMarker(o.numberRestMark,o.beatResolution,c,Math.min(o.lineResolution,l)).join(""),c,i));for(var h=0;h<m.length;++h)p.push(t.formatLineWithMarkers(o,m[h],c,i));return p.join("\n")}}]),t}();a.DEFAULT_FORMAT_CONFIG={restMark:"-",beatMark:"|",lineMark:"|",numberRestMark:"-",beatResolution:48,showBeatMark:!0,showBeatNumbers:!0,lineResolution:384},a.FORMAT_CONFIG_STRINGS=[["restMark",["-","."," "]],["numberRestMark",["-","."," "]]],a.FORMAT_CONFIG_BOOLS=["showBeatMark","showBeatNumbers"],e.a=a},81:function(t,e,n){"use strict";n.d(e,"b",(function(){return c})),n.d(e,"a",(function(){return o})),n.d(e,"c",(function(){return m}));var i=n(15),r=n(16),o={"Djembe Slap":"S","Djembe Tone":"t","Djembe Bass":"O","Snare Ghost":"x","Snare Accent":"X","Shaker Ghost":"x","Shaker Accent":"X",Click:"X",Bass:"O",Tom:"O",Default:"X"};function a(t){var e,n=[],i=Object(r.a)(t);try{for(i.s();!(e=i.n()).done;){var o=e.value,a=Object.assign({},o);a.name=a.name.toLowerCase(),n.push(a)}}catch(s){i.e(s)}finally{i.f()}return n}function s(t,e,n,i){var o=[];if(2===t.length){var a=t[0],s=t[1],u=a.volume>s.volume||a.volume===s.volume&&a.gain>s.gain,c={};c[a.id.toString()]=u?n:i,c[s.id.toString()]=u?i:n,o.push([e,c])}else{var l,m=Object(r.a)(t);try{for(m.s();!(l=m.n()).done;){var p=l.value,h={};h[p.id.toString()]=n,o.push([e,h])}}catch(d){m.e(d)}finally{m.f()}}return o}function u(t){var e,n=new Set,o=Object(r.a)(t);try{for(o.s();!(e=o.n()).done;)for(var a=e.value,s=0,u=Object.entries(a.instrumentTracks);s<u.length;s++){var c=Object(i.a)(u[s],2),l=c[0];c[1].empty()||n.add(parseInt(l))}}catch(m){o.e(m)}finally{o.f()}return n}function c(t,e){var n,i=u(e),o=[],a=Object(r.a)(t);try{for(a.s();!(n=a.n()).done;){var s=n.value;i.has(s.id)&&o.push(s)}}catch(c){a.e(c)}finally{a.f()}return o}function l(t,e){var n=e.toLowerCase();return n.includes("click")||n.includes("stick")?t.Click:n.includes("bass")||n.includes("kick")?t.Bass:n.includes("snare")?t["Snare Accent"]:n.includes("shaker")?t.Shaker:n.includes("tom")?t.Tom:n.includes("djembe")?n.includes("slap")?t["Djembe Slap"]:n.includes("tone")?t["Djembe Tone"]:t["Djembe Bass"]:t.Default}function m(t,e,n){var i=[];i=(i=(i=(i=i.concat(function(t,e,n){for(var i=a(t),r=u(n),o=i.filter((function(t){return r.has(t.id)&&!t.name.includes("djembe")&&(t.name.includes("click")||t.name.includes("stick")||t.name.includes("tom")||t.name.includes("bass")||t.name.includes("kick"))})),s=Array.from(o,(function(t){return t.name.includes("click")||t.name.includes("stick")})),c=1,l=1,m=[],p=0;p<Math.floor(o.length/2);++p)if(s[2*p]!==s[2*p+1]){var h=s[2*p]?o[2*p]:o[2*p+1],d=s[2*p]?o[2*p+1]:o[2*p],f=d.name.includes("tom"),b=f?"Tom":"Bass",j="";f?(j=b+(c>=2?" "+c.toString():""),c+=1):(j=b+(l>=2?" "+l.toString():""),l+=1);var g={};g[d.id.toString()]=e[b],g[h.id.toString()]=e.Click,m.push([j,g])}if(o.length%2!==0&&!s[o.length-1]){var v=o[o.length-1],O=v.name.includes("tom"),k=O?"Tom":"Bass",y="";O?(y=k+(c>=2?" "+c.toString():""),c+=1):(y=k+(l>=2?" "+l.toString():""),l+=1);var x={};x[v.id.toString()]=e[k],m.push([y,x])}return m}(t,e,n))).concat(function(t,e){var n=a(t).filter((function(t){return t.name.includes("djembe")}));if(0===n.length)return[];if(n.length<=3){for(var i=Array.from(n,(function(t){return t.name.includes("slap")})),r=Array.from(n,(function(t){return t.name.includes("tone")})),o=Array.from(n,(function(t){return t.name.includes("bass")})),s=0;s<n.length;++s)if(1!==i[s]+r[s]+o[s])return[];for(var u={},c=0;c<n.length;++c)i[c]?u[n[c].id.toString()]=e["Djembe Slap"]:r[c]?u[n[c].id.toString()]=e["Djembe Tone"]:o[c]&&(u[n[c].id.toString()]=e["Djembe Bass"]);return[["Djembe",u]]}return[]}(t,e))).concat(function(t,e){return s(a(t).filter((function(t){return t.name.includes("snare")})),"Snare",e["Snare Accent"],e["Snare Ghost"])}(t,e))).concat(function(t,e){return s(a(t).filter((function(t){return t.name.includes("shaker")})),"Shaker",e["Shaker Accent"],e["Shaker Ghost"])}(t,e));var o,c=u(n),m=Object(r.a)(t);try{for(m.s();!(o=m.n()).done;){var p=o.value;if(c.has(p.id)){var h,d=!1,f=Object(r.a)(i);try{for(f.s();!(h=f.n()).done;){var b=h.value;p.id.toString()in b[1]&&(d=!0)}}catch(g){f.e(g)}finally{f.f()}if(!1===d){var j={};j[p.id.toString()]=l(e,p.name),i.push([p.name,j])}}}}catch(g){m.e(g)}finally{m.f()}return i}},93:function(t,e,n){"use strict";n.d(e,"b",(function(){return at})),n.d(e,"a",(function(){return ot}));var i=n(18),r=n(1),o=n(2),a=n(4),s=n(3),u=n(15),c=n(8),l=n(0),m=n.n(l),p=n(191),h=n(290),d=n(457),f=n(444),b=n(446),j=n(94),g=n(447),v=n(445),O=n(143),k=n(271),y=n.n(k),x=n(186),S=n.n(x),w=n(65),C=n(53),T=n(270),R=n.n(T),P=n(297),M=n(193),A=n(195),N=n(194),F=n(142),I=n(292),D=n(13),E=n(59),L=n(54),B=n(266),_=n.n(B),z=n(267),G=n.n(z),K=n(268),J=n.n(K),V=n(269),W=n.n(V),q=n(265),U=n.n(q),H=n(295),X=n(139),Y=Object(p.a)((function(t){return{root:{display:"flex"}}})),$=Object(D.a)({root:{marginLeft:0,marginRight:0}})(h.a),Z=Object(D.a)({root:{padding:2}})(C.a),Q=Object(D.a)((function(t){return{root:{borderBottom:"none",textAlign:"center",paddingBottom:t.spacing(0)}}}))(j.a),tt=Object(D.a)((function(t){return{root:{textAlign:"center"}}}))(j.a);function et(t){var e=m.a.useState(!1),n=Object(u.a)(e,2),i=n[0],r=n[1],o=m.a.useState(100),a=Object(u.a)(o,2),s=a[0],l=a[1],p=m.a.useState(t.muted),h=Object(u.a)(p,2),d=h[0],f=h[1],b=m.a.useRef(null),j=t.height?t.height/3:24,g={height:3*j,position:"absolute",top:-j},v=Object.assign(i?{}:{visibility:"hidden",paddingLeft:"0px"},g),O=i?{visibility:"hidden"}:{},k=Object(X.a)();return Object(c.jsx)(U.a,{time:.5,onClickNHold:k?function(t,e){i||r(!0)}:function(t,e){i||r(!0),b&&b.current.dispatchEvent(e.nativeEvent)},onEnd:k?null:function(t){r(!1)},children:Object(c.jsxs)(Z,{disableRipple:!0,disableFocusRipple:!0,onClick:function(){f(!d),t.onMuteEvent(!d)},children:[Object(c.jsx)("div",{style:v,children:Object(c.jsx)(H.a,{defaultValue:100,orientation:"vertical","aria-labelledby":"vertical-slider",onChange:function(e,n){k&&r(!1),function(e,n){l(n),t.onChange&&t.onChange(n)}(0,n)},ref:b})}),Object(c.jsx)("div",{style:O,children:d?Object(c.jsx)(_.a,{fontSize:"small"}):s<10?Object(c.jsx)(G.a,{fontSize:"small"}):s<50?Object(c.jsx)(J.a,{fontSize:"small"}):Object(c.jsx)(W.a,{fontSize:"small"})})]})})}var nt=function(t){Object(a.a)(n,t);var e=Object(s.a)(n);function n(t){var i;return Object(r.a)(this,n),(i=e.call(this,t)).state={currentSymbol:null},i}return Object(o.a)(n,[{key:"render",value:function(){var t,e=this,n=function(t){e.setState({currentSymbol:null}),e.props.onCancel&&e.props.onCancel()},i=function(t){null!==e.state.currentSymbol&&1===e.state.currentSymbol.length?e.props.onChange&&e.props.onChange(e.state.currentSymbol):alert('You selected an invalid symbol "'+e.state.currentSymbol+'".\nSymbols must be precisely 1 character.')};return Object(c.jsxs)(M.a,{open:this.props.open,onClose:n,"aria-labelledby":"form-dialog-title",children:[Object(c.jsx)(I.a,{id:"form-dialog-title"}),Object(c.jsxs)(N.a,{children:[Object(c.jsx)(F.a,{children:"Enter notation symbol"}),Object(c.jsx)(P.a,{autoFocus:!0,margin:"dense",id:"name",fullWidth:!0,value:null!==(t=this.state.currentSymbol)&&void 0!==t?t:this.props.value,onChange:function(t){e.setState({currentSymbol:t.target.value})},onKeyDown:function(t){13===t.keyCode&&(t.preventDefault(),i())}})]}),Object(c.jsxs)(A.a,{children:[Object(c.jsx)(w.a,{onClick:n,color:"primary",children:"Cancel"}),Object(c.jsx)(w.a,{onClick:i,color:"primary",children:"Confirm"})]})]})}}]),n}(m.a.Component),it=function(t){Object(a.a)(n,t);var e=Object(s.a)(n);function n(t){var i;return Object(r.a)(this,n),(i=e.call(this,t)).state={currentName:null},i}return Object(o.a)(n,[{key:"render",value:function(){var t,e=this,n=function(){e.props.onCancel&&e.props.onCancel(),e.setState({currentName:null})},i=function(){null!==e.state.currentName?e.state.currentName.trim().length>0?(e.props.onChange&&e.props.onChange(e.state.currentName),e.setState({currentName:null})):alert('You selected an invalid instrument name "'+e.state.currentName+'".\nMust be non-empty.'):n()};return Object(c.jsxs)(M.a,{open:this.props.open,onClose:n,"aria-labelledby":"form-dialog-title",children:[Object(c.jsx)(I.a,{id:"form-dialog-title"}),Object(c.jsxs)(N.a,{children:[Object(c.jsx)(F.a,{children:"Enter instrument name"}),Object(c.jsx)(P.a,{margin:"dense",id:"name",fullWidth:!0,value:null!==(t=this.state.currentName)&&void 0!==t?t:this.props.value,onChange:function(t){e.setState({currentName:t.target.value})},onKeyDown:function(t){13===t.keyCode&&(t.preventDefault(),i())},autoFocus:!0})]}),Object(c.jsxs)(A.a,{children:[Object(c.jsx)(w.a,{onClick:n,color:"primary",children:"Cancel"}),Object(c.jsx)(w.a,{onClick:i,color:"primary",children:"Confirm"})]})]})}}]),n}(m.a.Component);function rt(t){var e=Y(),n=function(e,n){return Object(c.jsx)(j.a,{align:"center",children:Object(c.jsx)($,{control:Object(c.jsx)(d.a,{checked:t.instrumentMask[e]===n,onChange:function(i){!function(e,n,i){var r=t.instrumentIndex[e].id,o=t.instruments.findIndex((function(t){return r in t[1]})),a=n;if(o!==a){var s=t.instruments[o],u=["",{}];if(null!=s){u[0]=s[0];for(var c=0,l=Object.keys(s[1]);c<l.length;c++){var m=l[c];m!==r.toString()&&(u[1][m]=s[1][m])}}var p=[t.instruments[a][0],Object.assign({},t.instruments[a][1])];p[1][r.toString()]=null!=s?s[1][r]:"X";for(var h=[],d=0;d<t.instruments.length;++d)d===o?h.push(u):d===a?h.push(p):h.push(t.instruments[d]);t.onChange(h)}}(e,n)},name:e+","+n.toString()})})},"instrumentPanel-cell-"+n.toString()+"-"+e.toString())},r=function(e){return Object(c.jsxs)(O.a,{children:[Object(c.jsxs)(j.a,{component:"th",scope:"row",children:[Object(c.jsx)(E.a,{children:t.instruments[e][0]}),Object(c.jsx)(Z,{onClick:function(n){!function(e){t.onEditRow&&t.onEditRow(e)}(e)},children:Object(c.jsx)(S.a,{fontSize:"small"})}),Object(c.jsx)(Z,{onClick:function(n){!function(e){t.onRemoveRow&&t.onRemoveRow(e)}(e)},children:Object(c.jsx)(R.a,{fontSize:"small"})})]},"instrumentPanel-row-"+e.toString()+"-name"),Object(i.a)(Array(t.instrumentMask.length).keys()).map((function(t){return n(t,e)}))]},"instrumentPanel-row-"+e.toString())};return Object(c.jsxs)(f.a,{className:e.table,"aria-label":"simple table",children:[Object(c.jsxs)(v.a,{children:[Object(c.jsxs)(O.a,{children:[Object(c.jsx)(Q,{children:" Instrument "},"instrumentPanel-row-instrument"),Object(i.a)(Array(t.instrumentIndex.length).keys()).map((function(e){return Object(c.jsx)(Q,{children:Object(c.jsx)(E.a,{children:t.instrumentIndex[e].name})},"instrumentPanel-row-header-cell-"+e.toString())}))]},"instrumentPanel-row-header"),Object(c.jsxs)(O.a,{children:[Object(c.jsx)(j.a,{},"instrumentPanel-row-instrument"),Object(i.a)(Array(t.instrumentIndex.length).keys()).map((function(e){return Object(c.jsx)(tt,{children:Object(c.jsxs)(L.a,{container:!0,children:[Object(c.jsx)(L.a,{item:!0,xs:6,children:Object(c.jsx)(Z,{onClick:function(n){!function(e){t.onEditColumn&&t.onEditColumn(e)}(e)},children:Object(c.jsx)(S.a,{fontSize:"small"})})}),Object(c.jsx)(L.a,{item:!0,xs:6,children:Object(c.jsx)(et,{muted:t.instrumentIndex[e].muted,onChange:function(n){t.onVolumeEvent({instrument:e,volume:n/100})},onMuteEvent:function(n){t.onVolumeEvent({instrument:e,muted:n})}})})]})},"instrumentPanel-row-controls-cell-"+e.toString())}))]},"instrumentPanel-row-controls")]}),Object(c.jsxs)(b.a,{children:[Object(i.a)(Array(t.instruments.length).keys()).map((function(t){return r(t)})),Object(c.jsx)(O.a,{children:Object(c.jsx)(j.a,{component:"th",scope:"row",children:Object(c.jsx)(C.a,{onClick:function(e){t.onAddRow&&t.onAddRow()},"aria-label":"add",children:Object(c.jsx)(y.a,{})})},"instrumentPanel-row-edit-cell")},"instrumentPanel-row-edit")]})]})}function ot(t){var e,n=m.a.useState(null),i=Object(u.a)(n,2),r=i[0],o=i[1],a=m.a.useState(null),s=Object(u.a)(a,2),l=s[0],p=s[1],h=function(e){if(null!==e){var n=t.instrumentIndex[r].id,i=t.instruments.findIndex((function(t){return n in t[1]})),a=Array.from(t.instruments);a[i][1][n]=e,t.onChange(a)}o(null)};return Object(c.jsxs)("div",{style:{paddingBottom:"5px"},children:[Object(c.jsx)(it,{open:null!==l,onCancel:function(){p(null)},onChange:function(e){!function(e){if(l===t.instruments.length){var n=[e,{}],i=Array.from(t.instruments);i.push(n),t.onChange(i)}else{var r=Array.from(t.instruments);r[l][0]=e,t.onChange(r)}p(null)}(e)},value:null!==l?(e=l,e<t.instruments.length?t.instruments[e][0]:""):""}),Object(c.jsx)(nt,{open:null!==r,onCancel:function(){h(null)},onChange:function(t){h(t)},value:null!==r?function(e){var n=t.instrumentIndex[r].id,i=t.instruments.findIndex((function(t){return n in t[1]}));return t.instruments[i][1][n]}():""}),Object(c.jsx)(g.a,{style:{border:"2px solid rgba(255, 255, 255, 0.5)",outline:"none",borderRadius:"8px"},children:Object(c.jsx)(rt,{instrumentIndex:t.instrumentIndex,instrumentMask:t.instrumentMask,instruments:t.instruments,onEditColumn:function(t){o(t)},onEditRow:function(t){p(t)},onAddRow:function(){p(t.instruments.length)},onRemoveRow:function(e){!function(e){var n=t.instruments.slice(0,e).concat(t.instruments.slice(e+1));t.onChange(n)}(e)},onVolumeEvent:t.onVolumeEvent,onChange:t.onChange})})]})}function at(t,e){for(var n=Array(t.length),i=0;i<t.length;++i)for(var r=t[i].id,o=0;o<e.length;++o){var a=e[o];r.toString()in a[1]&&(n[i]=o)}return n}}},[[438,1,2]]]);
//# sourceMappingURL=main.8c7c3e0b.chunk.js.map