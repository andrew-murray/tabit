(this.webpackJsonptabit=this.webpackJsonptabit||[]).push([[0],{138:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var a=n(17);function i(t,e){for(var n=t.concat([e]),i=0,r=[48,24,16,12,8,6,4,3,2,1];i<r.length;i++){var o,s=r[i],l=!0,c=Object(a.a)(n);try{for(c.s();!(o=c.n()).done;){if(o.value%s!==0){l=!1;break}}}catch(u){c.e(u)}finally{c.f()}if(l)return s}throw new Error("Failed to predict base")}},139:function(t,e,n){"use strict";n.d(e,"b",(function(){return j})),n.d(e,"a",(function(){return g}));n(0);var a=n(270),i=n(434),r=n(427),o=n(426),s=n(428),l=n(181),c=n(273),u=n(107),m=n(429),d=n(182),p=n(432),h=n(36),f=n(5),v=Object(a.a)((function(t){return{formControl:{margin:t.spacing(1),minWidth:120}}}));function b(t){var e=t.replace(/([A-Z])/g," $1");return e[0].toUpperCase()+e.slice(1)}function j(t){var e=v(t);function n(t){return" "===t?"space":t}function a(t){return"space"===t?" ":t}var j=function(e,n,a){t.onChange({key:e,value:n,local:a})},g=function(e){t.onChange({key:e.target.name,value:e.target.checked,local:!1})};function O(s,l){var c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:a,m=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n,d=arguments.length>4&&void 0!==arguments[4]&&arguments[4],h="form-control-"+s+"-id";return Object(f.jsx)(u.a,{variant:"filled",className:e.formControl,id:h,style:{width:"75%"},children:Object(f.jsxs)(o.a,{style:{width:"100%"},children:[Object(f.jsx)(i.a,{id:"settings-option-{name}",children:s}),Object(f.jsx)(p.a,{labelId:"settings-option-"+s+"-labelID",id:"settings-option-"+s+"-id",value:m(t.settings[s]),name:s,onChange:function(t){return j(t.target.name,c(t.target.value),d)},style:{width:"75%",textAlign:"center"},children:l.map((function(t){return Object(f.jsx)(r.a,{value:m(t),style:{textAlign:"center"},children:m(t)},"settings-menu-item-"+s+"-"+t)}))})]})},h)}for(var w=[],S=0,k=[2,3,4,5,6,7,8,14,16,32];S<k.length;S++){var x=48*k[S];x%t.settings.beatResolution===0&&x<=t.pattern.length&&w.push(x)}w.includes(t.pattern.length)||(w.push(t.pattern.length),w.sort((function(t,e){return t-e})));for(var y=[],_=0,C=[24,36,48,72,96];_<C.length;_++){var P=C[_];P%t.pattern.resolution===0&&t.settings.lineResolution%P===0&&y.push(P)}for(var D=[],T=0,H=[12,16,24,36,48];T<H.length;T++){var M=H[T];M%t.pattern.resolution!==0&&t.pattern.resolution%M!==0||t.settings.lineResolution%M!==0||D.push(M)}return Object(f.jsx)(s.a,{className:e.root,children:Object(f.jsxs)(c.a,{children:[h.a.FORMAT_CONFIG_STRINGS.map((function(t){return O(t[0],t[1])})).reduce((function(t,e){return[t,e]})),h.a.FORMAT_CONFIG_BOOLS.map((function(e){return n=e,Object(f.jsx)(u.a,{children:Object(f.jsx)(l.a,{control:Object(f.jsx)(d.a,{checked:t.settings[n],onChange:g,name:n}),label:b(n)},"switch-"+n)},"form-control-"+n);var n})).reduce((function(t,e){return[t,e]})),Object(f.jsxs)(m.a,{children:["Pattern "+t.pattern.name+" Options"," "]}),O("beatResolution",y,(function(t){return t.toString()}),(function(t){return parseInt(t)}),!0),O("lineResolution",w,(function(e){return t.settings.beatResolution*parseInt(e)}),(function(e){return(e/t.settings.beatResolution).toString()}),!0)]})})}var g=h.a.DEFAULT_FORMAT_CONFIG},239:function(t){t.exports=JSON.parse('{"instruments":[{"id":23,"name":"Stick","volume":0.99569,"muted":false,"gain":1,"drumkit":"GMRockKit","filename":"SideStick-Softest.wav"},{"id":24,"name":"Kick Short","volume":1,"muted":false,"gain":1,"drumkit":"TR808EmulationKit","filename":"808_Kick_Short.flac"},{"id":20,"name":"Stick","volume":0.193966,"muted":false,"gain":1,"drumkit":"DeathMetal"},{"id":26,"name":"Stick","volume":0.99569,"muted":false,"gain":1,"drumkit":"GMRockKit","filename":"SideStick-Softest.wav"},{"id":25,"name":"Kick Short","volume":1,"muted":false,"gain":1,"drumkit":"TR808EmulationKit","filename":"808_Kick_Short.flac"},{"id":22,"name":"tom02","volume":0.65,"muted":false,"gain":1,"drumkit":"DeathMetal"},{"id":27,"name":"snare","volume":0.49,"muted":false,"gain":1,"drumkit":"DeathMetal","filename":"014b.WAV"},{"id":13,"name":"Snare 1","volume":0.35,"muted":false,"gain":0.4,"drumkit":"DeathMetal"},{"id":10,"name":"Djembe4 Slap","volume":0.12931,"muted":false,"gain":1,"drumkit":"circAfrique v4","filename":"Djembe4 Slap.wav"},{"id":11,"name":"Djembe4 Tone","volume":0.12931,"muted":false,"gain":0.95,"drumkit":"circAfrique v4","filename":"Djembe4 Tone.wav"},{"id":12,"name":"Djembe4 Bass","volume":0.181034,"muted":false,"gain":1.5,"drumkit":"circAfrique v4","filename":"Djembe4 Bass.wav"},{"id":16,"name":"Shaker","volume":0.232759,"muted":false,"gain":2.2,"drumkit":"TR808EmulationKit","filename":"808_Shaker.flac"},{"id":21,"name":"Shaker","volume":1.5,"muted":false,"gain":2.45,"drumkit":"TR808EmulationKit","filename":"808_Shaker.flac"}],"patterns":[{"size":384,"name":"k-1","notes":[{"position":0,"instrument":21},{"position":0,"instrument":24},{"position":0,"instrument":26},{"position":0,"instrument":11},{"position":12,"instrument":21},{"position":24,"instrument":11},{"position":24,"instrument":21},{"position":24,"instrument":24},{"position":24,"instrument":26},{"position":24,"instrument":27},{"position":36,"instrument":21},{"position":36,"instrument":11},{"position":48,"instrument":21},{"position":48,"instrument":11},{"position":48,"instrument":23},{"position":48,"instrument":26},{"position":48,"instrument":27},{"position":60,"instrument":24},{"position":72,"instrument":10},{"position":72,"instrument":21},{"position":72,"instrument":26},{"position":84,"instrument":25},{"position":96,"instrument":23},{"position":96,"instrument":26},{"position":108,"instrument":25},{"position":120,"instrument":12},{"position":120,"instrument":25},{"position":144,"instrument":12},{"position":144,"instrument":21},{"position":144,"instrument":23},{"position":144,"instrument":25},{"position":144,"instrument":27},{"position":156,"instrument":21},{"position":168,"instrument":21},{"position":180,"instrument":27},{"position":192,"instrument":11},{"position":192,"instrument":21},{"position":192,"instrument":24},{"position":192,"instrument":26},{"position":216,"instrument":12},{"position":216,"instrument":21},{"position":216,"instrument":24},{"position":216,"instrument":26},{"position":216,"instrument":27},{"position":240,"instrument":11},{"position":240,"instrument":23},{"position":240,"instrument":26},{"position":240,"instrument":27},{"position":252,"instrument":12},{"position":252,"instrument":24},{"position":264,"instrument":21},{"position":264,"instrument":27},{"position":276,"instrument":11},{"position":276,"instrument":25},{"position":288,"instrument":12},{"position":288,"instrument":21},{"position":288,"instrument":24},{"position":288,"instrument":25},{"position":300,"instrument":21},{"position":312,"instrument":11},{"position":312,"instrument":23},{"position":312,"instrument":26},{"position":324,"instrument":12},{"position":324,"instrument":21},{"position":324,"instrument":24},{"position":324,"instrument":25},{"position":336,"instrument":21},{"position":336,"instrument":27},{"position":360,"instrument":21},{"position":360,"instrument":10},{"position":360,"instrument":23},{"position":360,"instrument":26},{"position":360,"instrument":27},{"position":372,"instrument":21},{"position":372,"instrument":27}],"resolution":12,"instrumentTracks":{"10":{"rep":[0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0],"resolution":12},"11":{"rep":[1,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,1,0,0,1,0,0,1,0,0,0,0,0],"resolution":12},"12":{"rep":[0,0,0,0,0,0,0,0,0,0,1,0,1,0,0,0,0,0,1,0,0,1,0,0,1,0,0,1,0,0,0,0],"resolution":12},"13":{"rep":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"resolution":12},"16":{"rep":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"resolution":12},"20":{"rep":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"resolution":12},"21":{"rep":[1,1,1,1,1,0,1,0,0,0,0,0,1,1,1,0,1,0,1,0,0,0,1,0,1,1,0,1,1,0,1,1],"resolution":12},"22":{"rep":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"resolution":12},"23":{"rep":[0,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,1,0],"resolution":12},"24":{"rep":[1,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,1,0,1,0,0,1,0,0,1,0,0,1,0,0,0,0],"resolution":12},"25":{"rep":[0,0,0,0,0,0,0,1,0,1,1,0,1,0,0,0,0,0,0,0,0,0,0,1,1,0,0,1,0,0,0,0],"resolution":12},"26":{"rep":[1,0,1,0,1,0,1,0,1,0,0,0,0,0,0,0,1,0,1,0,1,0,0,0,0,0,1,0,0,0,1,0],"resolution":12},"27":{"rep":[0,0,1,0,1,0,0,0,0,0,0,0,1,0,0,1,0,0,1,0,1,0,1,0,0,0,0,0,1,0,1,1],"resolution":12}}},{"size":384,"name":"k-2","notes":[{"position":0,"instrument":12},{"position":0,"instrument":21},{"position":0,"instrument":24},{"position":0,"instrument":25},{"position":0,"instrument":27},{"position":12,"instrument":12},{"position":12,"instrument":24},{"position":12,"instrument":25},{"position":24,"instrument":12},{"position":24,"instrument":21},{"position":24,"instrument":24},{"position":24,"instrument":25},{"position":36,"instrument":21},{"position":48,"instrument":21},{"position":48,"instrument":10},{"position":48,"instrument":23},{"position":48,"instrument":26},{"position":48,"instrument":27},{"position":72,"instrument":21},{"position":84,"instrument":21},{"position":84,"instrument":27},{"position":96,"instrument":21},{"position":96,"instrument":23},{"position":96,"instrument":26},{"position":108,"instrument":21},{"position":108,"instrument":27},{"position":120,"instrument":11},{"position":120,"instrument":21},{"position":132,"instrument":10},{"position":132,"instrument":27},{"position":144,"instrument":23},{"position":144,"instrument":26},{"position":144,"instrument":27},{"position":156,"instrument":10},{"position":168,"instrument":12},{"position":168,"instrument":21},{"position":168,"instrument":24},{"position":168,"instrument":25},{"position":180,"instrument":12},{"position":180,"instrument":24},{"position":180,"instrument":25},{"position":192,"instrument":12},{"position":192,"instrument":21},{"position":192,"instrument":24},{"position":192,"instrument":25},{"position":192,"instrument":27},{"position":216,"instrument":21},{"position":216,"instrument":11},{"position":228,"instrument":11},{"position":228,"instrument":21},{"position":228,"instrument":27},{"position":240,"instrument":21},{"position":240,"instrument":23},{"position":240,"instrument":26},{"position":240,"instrument":27},{"position":252,"instrument":10},{"position":264,"instrument":21},{"position":264,"instrument":11},{"position":276,"instrument":21},{"position":276,"instrument":27},{"position":288,"instrument":11},{"position":288,"instrument":21},{"position":288,"instrument":23},{"position":288,"instrument":26},{"position":300,"instrument":11},{"position":312,"instrument":21},{"position":324,"instrument":10},{"position":336,"instrument":11},{"position":336,"instrument":23},{"position":336,"instrument":26},{"position":360,"instrument":21}],"resolution":12,"instrumentTracks":{"10":{"rep":[0,0,0,0,1,0,0,0,0,0,0,1,0,1,0,0,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0],"resolution":12},"11":{"rep":[0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,1,1,0,0,1,0,1,1,0,0,1,0,0,0],"resolution":12},"12":{"rep":[1,1,1,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"resolution":12},"13":{"rep":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"resolution":12},"16":{"rep":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"resolution":12},"20":{"rep":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"resolution":12},"21":{"rep":[1,0,1,1,1,0,1,1,1,1,1,0,0,0,1,0,1,0,1,1,1,0,1,1,1,0,1,0,0,0,1,0],"resolution":12},"22":{"rep":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"resolution":12},"23":{"rep":[0,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0],"resolution":12},"24":{"rep":[1,1,1,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"resolution":12},"25":{"rep":[1,1,1,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"resolution":12},"26":{"rep":[0,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0],"resolution":12},"27":{"rep":[1,0,0,0,1,0,0,1,0,1,0,1,1,0,0,0,1,0,0,1,1,0,0,1,0,0,0,0,0,0,0,0],"resolution":12}}},{"size":192,"name":"lightbulb","notes":[{"position":0,"instrument":24},{"position":12,"instrument":24},{"position":24,"instrument":24},{"position":36,"instrument":24},{"position":48,"instrument":24},{"position":96,"instrument":27},{"position":144,"instrument":24},{"position":160,"instrument":24},{"position":176,"instrument":24}],"resolution":4,"instrumentTracks":{"10":{"rep":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"resolution":4},"11":{"rep":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"resolution":4},"12":{"rep":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"resolution":4},"13":{"rep":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"resolution":4},"16":{"rep":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"resolution":4},"20":{"rep":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"resolution":4},"21":{"rep":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"resolution":4},"22":{"rep":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"resolution":4},"23":{"rep":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"resolution":4},"24":{"rep":[1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0],"resolution":4},"25":{"rep":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"resolution":4},"26":{"rep":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"resolution":4},"27":{"rep":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"resolution":4}}},{"size":192,"name":"break","notes":[{"position":24,"instrument":21},{"position":24,"instrument":11},{"position":24,"instrument":27},{"position":48,"instrument":21},{"position":48,"instrument":11},{"position":48,"instrument":27},{"position":96,"instrument":21},{"position":96,"instrument":11},{"position":96,"instrument":27},{"position":120,"instrument":21},{"position":120,"instrument":11},{"position":120,"instrument":27},{"position":144,"instrument":24},{"position":168,"instrument":21},{"position":168,"instrument":11},{"position":168,"instrument":24},{"position":168,"instrument":27}],"resolution":24,"instrumentTracks":{"10":{"rep":[0,0,0,0,0,0,0,0],"resolution":24},"11":{"rep":[0,1,1,0,1,1,0,1],"resolution":24},"12":{"rep":[0,0,0,0,0,0,0,0],"resolution":24},"13":{"rep":[0,0,0,0,0,0,0,0],"resolution":24},"16":{"rep":[0,0,0,0,0,0,0,0],"resolution":24},"20":{"rep":[0,0,0,0,0,0,0,0],"resolution":24},"21":{"rep":[0,1,1,0,1,1,0,1],"resolution":24},"22":{"rep":[0,0,0,0,0,0,0,0],"resolution":24},"23":{"rep":[0,0,0,0,0,0,0,0],"resolution":24},"24":{"rep":[0,0,0,0,0,0,1,1],"resolution":24},"25":{"rep":[0,0,0,0,0,0,0,0],"resolution":24},"26":{"rep":[0,0,0,0,0,0,0,0],"resolution":24},"27":{"rep":[0,1,1,0,1,1,0,1],"resolution":24}}},{"size":192,"name":"squash","notes":[{"position":0,"instrument":21},{"position":0,"instrument":12},{"position":0,"instrument":24},{"position":0,"instrument":27},{"position":48,"instrument":21},{"position":48,"instrument":12},{"position":48,"instrument":24},{"position":48,"instrument":27},{"position":96,"instrument":21},{"position":96,"instrument":12},{"position":96,"instrument":24},{"position":96,"instrument":27},{"position":144,"instrument":21},{"position":144,"instrument":12},{"position":144,"instrument":24},{"position":144,"instrument":27}],"resolution":48,"instrumentTracks":{"10":{"rep":[0,0,0,0],"resolution":48},"11":{"rep":[0,0,0,0],"resolution":48},"12":{"rep":[1,1,1,1],"resolution":48},"13":{"rep":[0,0,0,0],"resolution":48},"16":{"rep":[0,0,0,0],"resolution":48},"20":{"rep":[0,0,0,0],"resolution":48},"21":{"rep":[1,1,1,1],"resolution":48},"22":{"rep":[0,0,0,0],"resolution":48},"23":{"rep":[0,0,0,0],"resolution":48},"24":{"rep":[1,1,1,1],"resolution":48},"25":{"rep":[0,0,0,0],"resolution":48},"26":{"rep":[0,0,0,0],"resolution":48},"27":{"rep":[1,1,1,1],"resolution":48}}}]}')},260:function(t,e,n){"use strict";(function(t){var a=n(0),i=n.n(a),r=n(277),o=n(273),s=n(55),l=n(107),c=n(271),u=n(276),m=n(94),d=n(142),p=n.n(d),h=n(261),f=n.n(h),v=n(39),b=n(5),j=function(t){var e=t.selectPattern,n=t.index,a=t.pattern,r=t.onRemove,o=i.a.useCallback((function(){e&&e(n)}),[n,e]),m=i.a.useCallback((function(t){t.stopPropagation(),t.preventDefault(),r(n)}),[n,r]);return Object(b.jsxs)(l.a,{button:!0,onClick:o,children:[Object(b.jsx)(c.a,{primary:a.name}),r&&Object(b.jsx)(u.a,{children:Object(b.jsx)(s.a,{edge:"end",size:"small",onClick:m,children:Object(b.jsx)(p.a,{fontSize:"small"})})})]},"drawer-pattern"+n.toString())};function g(t){var e;return Object(b.jsxs)(i.a.Fragment,{children:[v.a?null:Object(b.jsx)(m.a,{placeholder:!0}),Object(b.jsx)("div",{style:{overflow:"auto"},children:Object(b.jsxs)(o.a,{children:[(null!==(e=t.patterns)&&void 0!==e?e:[]).map((function(e,n){return Object(b.jsx)(j,{pattern:e,index:n,onRemove:t.onRemove,selectPattern:t.selectPattern},"pattern-key-"+String(n))})),t.onAdd&&Object(b.jsxs)(l.a,{children:[Object(b.jsx)(c.a,{}),Object(b.jsx)(u.a,{children:Object(b.jsx)(s.a,{size:"small",edge:"end",onClick:function(){t.onAdd()},"aria-label":"add",children:Object(b.jsx)(f.a,{size:"small",edge:"end"})})})]},"drawer-add-button")]})})]})}var O=i.a.memo(g);function w(e){var n=t.browser&&/iPad|iPhone|iPod/.test(navigator.userAgent);return Object(b.jsx)(r.a,{disableBackdropTransition:!n,disableDiscovery:n,variant:v.a?void 0:"persistent",open:e.open,onOpen:e.onOpen,onClose:e.onClose,ModalProps:{keepMounted:!0},children:Object(b.jsx)(O,{patterns:e.patterns,onRemove:e.onRemove,selectPattern:e.selectPattern,onAdd:e.onAdd})})}e.a=i.a.memo(w)}).call(this,n(65))},262:function(t,e,n){"use strict";(function(t){var a=n(0),i=n.n(a),r=n(36),o=n(277),s=n(144),l=n(424),c=n(139),u=n(39),m=n(94),d=n(182),p=n(181),h=n(5);function f(e){var n,a=t.browser&&/iPad|iPhone|iPod/.test(navigator.userAgent),f=e.pattern?{name:e.pattern.name,resolution:e.pattern.resolution,length:r.a.getPatternLength(e.pattern)}:null;return Object(h.jsxs)(o.a,{disableBackdropTransition:!a,disableDiscovery:a,className:e.className,variant:u.a?void 0:"persistent",anchor:e.anchor,open:e.open,onOpen:e.onOpen,onClose:e.onClose,style:{overflow:"hidden"},children:[u.a?null:Object(h.jsx)(m.a,{placeholder:!0}),f&&Object(h.jsx)(c.b,{onChange:null!==(n=e.onChange)&&void 0!==n?n:function(){},settings:e.settings,pattern:f}),Object(h.jsx)("div",{children:Object(h.jsx)(p.a,{control:Object(h.jsx)(d.a,{checked:e.animating,onChange:function(t){e.onChange&&e.onChange({key:"animate",value:t.target.checked,local:!1})},name:"Display Beat"}),label:"Display Beat"},"DisplayBeat")}),Object(h.jsx)("div",{children:Object(h.jsx)(p.a,{control:Object(h.jsx)(d.a,{checked:e.interactive,onChange:function(t){e.onChange&&e.onChange({key:"interactive",value:t.target.checked,local:!1})},name:"Enable Editing"}),label:"Enable Editing"},"EnableEditing")}),f&&e.onSave&&Object(h.jsxs)(i.a.Fragment,{children:[Object(h.jsx)(s.a,{onClick:function(t){e.onSave()},children:"Download"}),Object(h.jsx)(l.a,{})]}),f&&e.onShare&&Object(h.jsx)(s.a,{onClick:function(t){e.onShare()},children:"Share"})]})}e.a=i.a.memo(f)}).call(this,n(65))},300:function(t,e,n){},309:function(t,e){},311:function(t,e){},332:function(t,e,n){},36:function(t,e,n){"use strict";var a=n(17),i=n(15),r=n(14),o=n(2),s=n(1),l=n(81),c=function(){function t(){Object(o.a)(this,t)}return Object(s.a)(t,null,[{key:"validateConfig",value:function(t,e){if(null!=e&&t.beatResolution%e!==0)throw new Error("patternResolution doesn't divide beatResolution");if(t.lineResolution<=0)throw new Error("config.lineResolution must be greater than zero")}},{key:"resolveConfig",value:function(e){for(var n=0,a=Object.keys(e);n<a.length;n++){var i=a[n];if(!t.DEFAULT_FORMAT_CONFIG.hasOwnProperty(i))throw new Error("passed unrecognised property "+i)}return Object.assign(Object.assign({},t.DEFAULT_FORMAT_CONFIG),e)}},{key:"chunkString",value:function(t,e){if(e<=0)throw new Error("chunkSize must be > 0");return t.match(new RegExp(".{1,"+e+"}","g"))}},{key:"chunkArray",value:function(t,e){if(e<=0)throw new Error("chunkSize must be > 0");for(var n=[],a=0;a<t.length;a+=e)n.push(t.slice(a,Math.min(a+e,t.length)));return n}},{key:"createNumberMarker",value:function(t,e,n,a){if(a<=0)throw new Error("lineLength <= 0");if(e%n!==0)throw new Error("patternResolution "+n.toString()+" does not divide beatResolution "+e.toString());for(var i=Math.ceil(a/e),r=Array.from(Array(a/n),(function(e){return t})),o=0;o<i;o++)r[o*(e/n)]=((o+1)%10).toString();return r}},{key:"formatLineWithMarkers",value:function(e,n,a,i){t.validateConfig(e);for(var r=e.beatResolution/a,o=i?function(t,e){return"<span class='note-"+(n=e,((n+="").length>=(a=4)?n:new Array(a-n.length+1).join("0")+n)+"'>")+t+"</span>";var n,a}:function(t,e){return t},s="",l=0;l<n.length;++l){var c=a*l;s+=o(n.charAt(l),c)}var u=e.showBeatMark?t.chunkString(s,r*o("X",0).length).join(e.beatMark):s;return e.lineMark+u+e.lineMark}},{key:"defaultLineResolution",value:function(t,e){var n=Object.values(t);if(0===n.length)return 384;var a=n[0].length(),i=a/e;return i<=12?a:i>32?768:[a,a/2,a/3,a/2,a,a/3,a,a/4,a/3,a/2,a,a/3,a/5,a,a/3,a/4,a,a/6,a,a/4][i-13]}},{key:"guessPerPatternSettings",value:function(e){return{lineResolution:t.defaultLineResolution(e,48),beatResolution:48}}},{key:"formatPatternString",value:function(t,e,n){if(0===Object.values(e).length)return"";for(var a=Array.from(Object.values(e))[0],i=a.resolution,o=a.length(),s=Array(o/i).fill(n),l=0;l<s.length;++l)for(var c=0,u=Object.entries(t);c<u.length;c++){var m=Object(r.a)(u[c],2),d=m[0],p=m[1],h=e[d];null!=h&&1===h.rep[l]&&(s[l]=p)}return s}},{key:"fromInstrumentAndTrack",value:function(e,n,a){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},r=t.resolveConfig(i),o=Object.values(n);if(0===o.length)return"";var s=t.formatPatternString(e,n,r.restMark),l=s.join(""),c=o[0].resolution,u=o[0].length(),m=t.chunkString(l,r.lineResolution/c),d=[];r.showBeatNumbers&&d.push(t.formatLineWithMarkers(r,t.createNumberMarker(r.numberRestMark,r.beatResolution,c,Math.min(r.lineResolution,u)).join(""),c,a));for(var p=0;p<m.length;++p)d.push(t.formatLineWithMarkers(r,m[p],c,a));return d.join("\n")}},{key:"getPatternLength",value:function(t){for(var e=48,n=0,a=Object.entries(t.instrumentTracks);n<a.length;n++){var i=Object(r.a)(a[n],2)[1];e=Math.max(e,i.length())}return e}},{key:"getPatternResolution",value:function(t){for(var e=48,n=0,a=Object.entries(t.instrumentTracks);n<a.length;n++){var i=Object(r.a)(a[n],2)[1];e=Math.min(e,i.resolution)}return e}},{key:"clonePattern",value:function(t,e){var n=Object.keys(e.instrumentTracks).map((function(t){return[t,e.instrumentTracks[t].clone()]}));return{size:e.size,name:t,resolution:e.resolution,instrumentTracks:Object.fromEntries(n)}}},{key:"createEmptyPattern",value:function(t,e,n,a){var i=Object.fromEntries(new Map(Array.from(a).map((function(t){return[t,l.a.fromPositions([],n,e)]}))));return{size:n,name:t,resolution:e,instrumentTracks:i}}},{key:"combinePatterns",value:function(t,e,n){var r,o=l.a.optimalResolution(e.resolution,n.resolution),s=e.size+n.size,c=new Set([].concat(Object(i.a)(Object.keys(e.instrumentTracks)),Object(i.a)(Object.keys(e.instrumentTracks)))),u={},m=Object(a.a)(c);try{for(m.s();!(r=m.n()).done;){var d=r.value;u[d]=l.a.combine(e.instrumentTracks[d],n.instrumentTracks[d],s,o)}}catch(p){m.e(p)}finally{m.f()}return{resolution:o,size:s,name:t,instrumentTracks:u}}}]),t}();c.DEFAULT_FORMAT_CONFIG={restMark:"-",beatMark:"|",lineMark:"|",numberRestMark:"-",beatResolution:48,showBeatMark:!0,showBeatNumbers:!0,compactDisplay:!1,lineResolution:384},c.FORMAT_CONFIG_STRINGS=[["restMark",["-","."," "]],["numberRestMark",["-","."," "]]],c.FORMAT_CONFIG_BOOLS=["showBeatMark","showBeatNumbers"],e.a=c},39:function(t,e,n){"use strict";n.d(e,"a",(function(){return a}));var a=function(){var t=navigator.userAgent||navigator.vendor||window.opera;return[/Android/i,/webOS/i,/iPhone/i,/iPad/i,/iPod/i,/BlackBerry/i,/Windows Phone/i].some((function(e){return t.match(e)}))}()},421:function(t,e,n){"use strict";n.r(e);var a=n(0),i=n.n(a),r=n(27),o=n.n(r),s=(n(300),n(24)),l=n(105),c=n(2),u=n(1),m=n(3),d=n(4),p=n(13),h=n(10),f=n(11),v=n(144),b=n(5),j=["onImport","accept"],g=function(t){Object(m.a)(n,t);var e=Object(d.a)(n);function n(t){var a;return Object(c.a)(this,n),(a=e.call(this,t)).hiddenFileInput=i.a.createRef(),a}return Object(u.a)(n,[{key:"onChange",value:function(t){var e=this,n=t.target.files[0],a=new FileReader;a.onload=function(t){e.props.onImport&&e.props.onImport({file:n,content:t.target.result})},a.readAsText(n)}},{key:"render",value:function(){var t=this,e=Object(h.a)({},this.props),n=(e.onImport,e.accept),a=Object(f.a)(e,j);return Object(b.jsxs)(i.a.Fragment,{children:[Object(b.jsx)(v.a,Object(h.a)(Object(h.a)({onClick:function(e){t.hiddenFileInput.current.click()}},a),{},{children:"Import File"})),Object(b.jsx)("input",{type:"file",hidden:!0,accept:n,onChange:function(e){return t.onChange(e)},ref:this.hiddenFileInput})]})}}]),n}(i.a.Component),O=n(15),w=n(270),S=n(273),k=n(272),x=n(69),y=n(107),_=n(271),C=n(424),P=Object(w.a)((function(t){return{root:{width:"100%",height:400,minWidth:200,maxWidth:300,maxHeight:200,overflow:"auto"}}}));var D=function(t){var e=P(),n=t.data;return Object(b.jsx)("div",{className:e.root,children:Object(b.jsxs)(k.a,{children:[Object(b.jsx)(x.a,{children:"Recently viewed"}),Object(b.jsx)(C.a,{}),Object(b.jsx)(S.a,{children:Object(O.a)(n.keys()).map((function(e){return function(t){return Object(b.jsx)(y.a,{button:!0,style:t.style,onClick:t.onClick,children:Object(b.jsx)(_.a,{primary:t.name,secondary:new Date(t.date).toLocaleDateString()})},t.index)}({index:e,name:n[e].name,id:n[e].id,date:n[e].date,onClick:function(){t.onClick&&t.onClick(n[e])}})}))})]})})},T=n(479),H=n(484),M=n(482),R=n(483),A=n(481);var I=function(t){return Object(b.jsxs)(T.a,{open:t.open,onClose:t.onClose,children:[Object(b.jsx)(A.a,{id:"text-dialog-title",children:t.title}),Object(b.jsx)(M.a,{children:Object(b.jsx)(R.a,{children:t.children})}),Object(b.jsx)(H.a,{children:Object(b.jsx)(v.a,{onClick:t.onClose,variant:"contained",children:"ok"})})]})},N=n(53),E=(n(332),function(t){Object(m.a)(n,t);var e=Object(d.a)(n);function n(){var t;Object(c.a)(this,n);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(t=e.call.apply(e,[this].concat(i))).state={error:t.props.error,songHistory:[]},t.componentDidMount=function(){t.setState({songHistory:N.d()})},t}return Object(u.a)(n,[{key:"render",value:function(){var t=this,e=Object(b.jsxs)(i.a.Fragment,{children:[Object(b.jsx)(v.a,{variant:"contained",onClick:function(){t.props.navigate("/example")},style:{margin:"1em"},children:"Load example"}),Object(b.jsx)(g,{style:{margin:"1em"},variant:"contained",onImport:function(e){t.props.navigate("/import",{state:{filename:e.file.name,content:e.content}})},accept:".tabit,.h2song"})]}),n=this.props.classes;return Object(b.jsxs)("div",{className:"App",children:[Object(b.jsxs)("div",{children:[Object(b.jsx)("h2",{children:"tabit"}),Object(b.jsx)("p",{children:"I read .h2songs and write tab"}),e]}),Object(b.jsx)("div",{style:{marginLeft:"auto",marginRight:"auto"},children:this.state.songHistory.length>0&&Object(b.jsx)(D,{data:this.state.songHistory,onClick:function(e){t.props.navigate("/recent/"+e.id+"/",{state:{songName:e.name}})}})}),!!this.state.error&&Object(b.jsx)(I,{title:"Something went wrong.",open:!!this.state.error,onClose:function(){t.setState({error:null})},children:this.state.error}),Object(b.jsx)("div",{className:n.licenseBanner,children:Object(b.jsxs)("p",{children:["tabit relies on publicly available sound libraries listed at ",Object(b.jsx)("a",{href:"https://github.com/andrew-murray/tabit",children:"https://github.com/andrew-murray/tabit"})]})})]})}}]),n}(i.a.Component)),F=Object(p.a)((function(t){return{licenseBanner:{position:"absolute",bottom:0,width:"95%",textAlign:"center",backgroundColor:"#212121",zIndex:t.zIndex.drawer},modal:{display:"flex",alignItems:"center",justifyContent:"center"},paper:{backgroundColor:t.palette.background.paper,border:"2px solid #000",boxShadow:t.shadows[5],padding:t.spacing(2,4,3)}}}))(E),B=n(503),L=n(510),z=n(268),K=n(502),G=n(501),V=n(500),q=n(14),W=n(17),J=n(239),U={"Djembe Slap":"S","Djembe Tone":"t","Djembe Bass":"O","Snare Ghost":"x","Snare Accent":"X","Shaker Ghost":"x","Shaker Accent":"X",Click:"X",Bass:"O",Tom:"O",Default:"X"};function Z(t){var e,n=[],a=Object(W.a)(t);try{for(a.s();!(e=a.n()).done;){var i=e.value,r=Object.assign({},i);r.name=r.name.toLowerCase(),n.push(r)}}catch(o){a.e(o)}finally{a.f()}return n}function X(t,e,n,a){var i=[];if(2===t.length){var r=t[0],o=t[1],s=r.volume>o.volume||r.volume===o.volume&&r.gain>o.gain,l={};l[r.id.toString()]=s?n:a,l[o.id.toString()]=s?a:n,i.push([e,l])}else{var c,u=Object(W.a)(t);try{for(u.s();!(c=u.n()).done;){var m=c.value,d={};d[m.id.toString()]=n,i.push([e,d])}}catch(p){u.e(p)}finally{u.f()}}return i}function $(t){var e,n=new Set,a=Object(W.a)(t);try{for(a.s();!(e=a.n()).done;)for(var i=e.value,r=0,o=Object.entries(i.instrumentTracks);r<o.length;r++){var s=Object(q.a)(o[r],2),l=s[0];s[1].empty()||n.add(parseInt(l))}}catch(c){a.e(c)}finally{a.f()}return n}function Y(t,e){var n=e.toLowerCase();return n.includes("click")||n.includes("stick")?t.Click:n.includes("bass")||n.includes("kick")?t.Bass:n.includes("snare")?t["Snare Accent"]:n.includes("shaker")?t.Shaker:n.includes("tom")?t.Tom:n.includes("djembe")?n.includes("slap")?t["Djembe Slap"]:n.includes("tone")?t["Djembe Tone"]:t["Djembe Bass"]:t.Default}function Q(t,e,n){var a=[];a=a.concat(function(t,e,n){for(var a=Z(t),i=$(n),r=a.filter((function(t){return i.has(t.id)&&!t.name.includes("djembe")&&(t.name.includes("click")||t.name.includes("stick")||t.name.includes("rim")||t.name.includes("tom")||t.name.includes("bass")||t.name.includes("kick"))})),o=Array.from(r,(function(t){return t.name.includes("click")||t.name.includes("stick")||t.name.includes("rim")})),s=1,l=1,c=[],u=0;u<Math.floor(r.length/2);++u)if(o[2*u]!==o[2*u+1]){var m=o[2*u]?r[2*u]:r[2*u+1],d=o[2*u]?r[2*u+1]:r[2*u],p=d.name.includes("tom"),h=p?"Tom":"Bass",f="";p?(f=h+(s>=2?" "+s.toString():""),s+=1):(f=h+(l>=2?" "+l.toString():""),l+=1);var v={};v[d.id.toString()]=e[h],v[m.id.toString()]=e.Click,c.push([f,v])}if(r.length%2!==0&&!o[r.length-1]){var b=r[r.length-1],j=b.name.includes("tom"),g=j?"Tom":"Bass",O="";j?(O=g+(s>=2?" "+s.toString():""),s+=1):(O=g+(l>=2?" "+l.toString():""),l+=1);var w={};w[b.id.toString()]=e[g],c.push([O,w])}return c}(t,e,n)),a=a.concat(function(t,e){var n=Z(t).filter((function(t){return t.name.includes("djembe")}));if(0===n.length)return[];if(n.length<=3){for(var a=Array.from(n,(function(t){return t.name.includes("slap")})),i=Array.from(n,(function(t){return t.name.includes("tone")})),r=Array.from(n,(function(t){return t.name.includes("bass")})),o=0;o<n.length;++o)if(1!==a[o]+i[o]+r[o])return[];for(var s={},l=0;l<n.length;++l)a[l]?s[n[l].id.toString()]=e["Djembe Slap"]:i[l]?s[n[l].id.toString()]=e["Djembe Tone"]:r[l]&&(s[n[l].id.toString()]=e["Djembe Bass"]);return[["Djembe",s]]}return[]}(t,e)),a=a.concat(function(t,e){return X(Z(t).filter((function(t){return t.name.includes("snare")})),"Snare",e["Snare Accent"],e["Snare Ghost"])}(t,e)),a=a.concat(function(t,e){return X(Z(t).filter((function(t){return t.name.includes("shaker")})),"Shaker",e["Shaker Accent"],e["Shaker Ghost"])}(t,e));var i,r=$(n),o=Object(W.a)(t);try{for(o.s();!(i=o.n()).done;){var s=i.value;if(r.has(s.id)){var l,c=!1,u=Object(W.a)(a);try{for(u.s();!(l=u.n()).done;){var m=l.value;s.id.toString()in m[1]&&(c=!0)}}catch(p){u.e(p)}finally{u.f()}if(!1===c){var d={};d[s.id.toString()]=Y(e,s.name),a.push([s.name,d])}}}}catch(p){o.e(p)}finally{o.f()}return a}function tt(t,e){for(var n=Array(t.length),a=0;a<t.length;++a)for(var i=t[a].id,r=0;r<e.length;++r){var o=e[r];i.toString()in o[1]&&(n[a]=r)}return n}function et(t){var e=t.match(/\d+/);return e?t.substr(0,2)+e[0]:t.substr(0,2)}var nt=n(81),at=n(139),it=n(36),rt=function(){function t(){Object(c.a)(this,t)}return Object(u.a)(t,null,[{key:"createWebContext",value:function(){return new(window.AudioContext||window.webkitAudioContext||Object)}},{key:"determineMinResolution",value:function(t,e){for(var n=48,a=function(){var e=Object(q.a)(r[i],2),a=e[0],o=e[1];t.filter((function(t){return t.id.toString()===a})).length>0&&!o.empty()&&(n=Math.min(n,o.resolution))},i=0,r=Object.entries(e);i<r.length;i++)a();return n}},{key:"determineTrackLength",value:function(t,e){for(var n=48,a=function(){var e=Object(q.a)(r[i],2),a=e[0],o=e[1];t.filter((function(t){return t.id.toString()===a})).length>0&&!o.empty()&&(n=Math.max(n,o.length()))},i=0,r=Object.entries(e);i<r.length;i++)a();return n}},{key:"peakAmplitude",value:function(t){for(var e=0,n=0;n<t.numberOfChannels;n++)for(var a=t.getChannelData(n),i=0;i<a.length;++i)e=Math.max(Math.abs(a[i]),e);return e}},{key:"normalizeAudioBuffer",value:function(e){var n=t.peakAmplitude(e);if(n>1)for(var a=0;a<e.numberOfChannels;a++)for(var i=e.getChannelData(a),r=0;r<i.length;++r)i[r]=i[r]/n;return e}},{key:"convertNormalToAudible",value:function(t){return Math.pow(t,2.5)}},{key:"convertAudibleToNormal",value:function(t){return Math.pow(t,.4)}},{key:"createMasterTrack",value:function(e,n,a,i,r){for(var o=t.determineTrackLength(a,n),s=44100*(o*(60/r*1e3/48))/1e3,l=Math.floor(s),c=Math.floor(l/o),u=e.createBuffer(2,l,44100),m=0;m<u.numberOfChannels;m++)for(var d=u.getChannelData(m),p=function(){var t=Object(q.a)(f[h],2),e=t[0],n=t[1],r=a.filter((function(t){return t.id.toString()===e}));if(r.length>0&&r[0].id in i&&!n.empty()){var o,s=i[r[0].id],l=2===s.numberOfChannels?s.getChannelData(m):s.getChannelData(0),u=n.toPoints(),p=Object(W.a)(u);try{for(p.s();!(o=p.n()).done;)for(var v=o.value*c,b=0;b<s.length;++b)d[v+b]=d[v+b]+l[b]}catch(j){p.e(j)}finally{p.f()}}},h=0,f=Object.entries(n);h<f.length;h++)p();return t.normalizeAudioBuffer(u)}},{key:"createAudioSource",value:function(t,e,n){var a=t.createBufferSource();return a.buffer=e,a.loop=!0,null!==n&&(a.playbackRate.value=n/100),a.connect(t.destination),a}},{key:"createOneShotAudioSource",value:function(t,e,n){var a=t.createBufferSource();return a.buffer=e,a.loop=!1,null!==n&&(a.playbackRate.value=n/100),a.connect(t.destination),a}}]),t}(),ot=n(54),st=Object(u.a)((function t(e,n,a,i,r,o,s,l,u){Object(c.a)(this,t),this.title=e,this.sourceFile=n,this.instruments=a,this.instrumentIndex=i,this.instrumentMask=r,this.patterns=o,this.formatSettings=s,this.patternSettings=l,this.audioState=u}));function lt(t,e,n,a){return new Promise((function(i){var r=function(t){var e,n=[],a=Object(W.a)(t);try{for(a.s();!(e=a.n()).done;){for(var i=e.value,r={},o=0,s=Object.entries(i.instrumentTracks);o<s.length;o++){var l=Object(q.a)(s[o],2),c=l[0],u=l[1];r[c]=new nt.a(u.rep,u.resolution)}var m=Object.assign({},i);m.instrumentTracks=r,n.push(m)}}catch(d){a.e(d)}finally{a.f()}return n}(t.patterns),o=function(t){return t.map((function(t){return 2===t.length?[t[0],t[1],{shortName:et(t[0])}]:t}))}(a?Q(t.instruments,U,r):t.instruments),s=function(t){for(var e=t.slice(),n=0;n<e.length;++n){var a=e[n];a.drumkit&&a.drumkit in ot&&a.filename&&(e[n]=Object.assign(a,{filename:a.filename.toString().replace(".flac",".wav")}))}return e}(t.instrumentIndex?t.instrumentIndex:function(t){var e,n=0,a=Object(W.a)(t);try{for(a.s();!(e=a.n()).done;){var i=e.value,r=i.volume*i.gain;n=Math.max(r,n)}}catch(h){a.e(h)}finally{a.f()}var o,s,l,c,u=rt.convertAudibleToNormal(n),m=Object(W.a)(t);try{for(m.s();!(o=m.n()).done;){var d=o.value,p=rt.convertAudibleToNormal(d.volume*d.gain);d.volume=(s=p/u,l=0,c=1,Math.min(Math.max(s,l),c)),d.gain=void 0}}catch(h){m.e(h)}finally{m.f()}return t}(function(t,e){var n,a=$(e),i=[],r=Object(W.a)(t);try{for(r.s();!(n=r.n()).done;){var o=n.value;a.has(o.id)&&i.push(o)}}catch(s){r.e(s)}finally{r.f()}return i}(t.instruments,r))),l=tt(s,o),c=t.formatSettings?t.formatSettings:Object.assign({},at.a),u=t.patternSettings?t.patternSettings:function(t){return Array.from(t,(function(t){return it.a.guessPerPatternSettings(t.instrumentTracks)}))}(r),m=t.audioState?t.audioState:{tempo:100};i(new st(e,n,o,s,l,r,c,u,m))}))}var ct={LoadExample:function(){return lt(J,"kuva","kuva.example",!0)},LoadJSON:lt},ut=n(21),mt=n(39),dt=function(t){return{root:{fontFamily:"Roboto Mono",fontSize:"1.2rem","@media (min-width:800px)":{fontSize:"1.4rem"}}}},pt=Object(p.a)(dt)(x.a),ht=Object(p.a)((function(t){return{root:{fontFamily:"Roboto Mono",fontSize:"0.8rem","@media (min-width:800px)":{fontSize:"1.1rem"}}}}))(x.a),ft=function(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;++n)if(t[n]!==e[n])return!1;return!0},vt=function(t){Object(m.a)(n,t);var e=Object(d.a)(n);function n(t){var a;return Object(c.a)(this,n),(a=e.call(this,t)).state={},a}return Object(u.a)(n,[{key:"render",value:function(){var t=this;if(0===Object.values(this.props.tracks).length)return Object(b.jsx)(i.a.Fragment,{});var e=it.a.formatPatternString(this.props.instrument,this.props.tracks,this.props.config.restMark),n=Object.keys(this.props.instrument)[0],a=this.props.tracks[n].resolution;if(this.props.config.lineResolution%this.props.config.beatResolution!==0&&e.length*a>this.props.config.lineResolution)throw new Error("This code only supports a beatResolution that divides the lineResolution");for(var r=it.a.chunkArray(e,this.props.config.lineResolution/a,0),o=this.props.config.lineResolution/this.props.config.beatResolution,s=this.props.config.beatResolution/a,l=Object(O.a)(r.keys()),c=this.props.dense?ht:pt,u={cursor:"pointer"},m=function(e,n,r,o,s,l){var m=Object(O.a)(n.keys()),d=function(t){return r.map((function(e){return"partNote"+(t+e).toString()})).join(" ")};return Object(b.jsxs)(c,{component:"div",children:[o&&Object(b.jsx)(c,{variant:"subtitle1",component:"span",style:{display:"inline-block"},children:o},"line-prefix-"+e),Object(b.jsx)(c,{variant:"subtitle1",component:"span",style:{display:"inline-block"},children:t.props.config.lineMark},"line-start-"+e),m.map((function(e){var o=l&&t.props.modifyPatternLocation;return Object(b.jsxs)(i.a.Fragment,{children:[Object(b.jsx)(c,{variant:"subtitle1",component:"span",className:d(e),style:{display:"inline-block"},children:Object(O.a)(Array(n[e].length).keys()).map((function(i){return Object(b.jsx)(c,{component:"span",style:o?u:void 0,className:o&&!mt.a?"hoverableNote":void 0,onClick:o?function(){var n=r.map((function(n){return(n+e)*t.props.config.beatResolution+i*a}));t.props.modifyPatternLocation(n,t.props.instrument)}:void 0,children:n[e][i]},"beat-part-"+i.toString())}))},"span-beat-"+(e+r[0]).toString()),Object(b.jsx)(c,{variant:"subtitle1",component:"span",style:{display:"inline-block"},children:t.props.config.showBeatMark&&e!==m[m.length-1]?t.props.config.beatMark:""},"span-beat-marker-"+(e+r[0]).toString())]},"fragment-beat-"+(e+r[0]).toString())})),Object(b.jsx)(c,{variant:"subtitle1",component:"span",children:t.props.config.lineMark},"line-end-"+e),s&&Object(b.jsxs)(c,{variant:"subtitle1",component:"span",children:["x",r.length.toString()]},"rep-marker")]},"pattern-line-"+e)},d=it.a.createNumberMarker(this.props.config.numberRestMark,this.props.config.beatResolution,a,Math.min(this.props.config.lineResolution,r[0].length*a)),p=it.a.chunkArray(d,this.props.config.beatResolution/a),h=this.props.prefix?" ".repeat(this.props.prefix.length):null,f=function(t){for(var e=[],n=0;n<t.length;++n){for(var a=1,i=n+1;i<t.length&&ft(t[n],t[i]);++i)a++;e.push(a)}return e}(r),v=[],j=0,g=f.reduce((function(t,e){return t+e}),0)>f.length,w=function(){var e=o*j,n=Object(O.a)(Array(f[j]).keys()).map((function(t){return e+t*o})),a=g;v.push(m(j.toString(),it.a.chunkArray(r[j],s),n,0===j?t.props.prefix:h,a,!0)),j+=n.length};j<f.length;)w();return Object(b.jsxs)("div",{children:[this.props.config.showBeatNumbers?m("beat",p,l.map((function(t){return t*o})),h,!1,!1):"",v]})}}]),n}(i.a.Component),bt=Object(p.a)(dt)(vt);var jt=function(t){Object(m.a)(n,t);var e=Object(d.a)(n);function n(t){var a;return Object(c.a)(this,n),(a=e.call(this,t)).state={},a}return Object(u.a)(n,[{key:"render",value:function(){var t=function(t,e){var n=t?t.toLowerCase():"";return["h1","h2","h3","h4","h5","h6"].includes(n)?n:e}(this.props.headingLevel,"h4");return Object(b.jsxs)("article",{children:[Object(b.jsx)(t,{children:this.props.instrumentName}),Object(b.jsx)(bt,{instrument:this.props.instrument,tracks:this.props.tracks,config:this.props.config,dense:this.props.dense,modifyPatternLocation:this.props.modifyPatternLocation})]})}}]),n}(i.a.Component),gt=i.a.memo((function(t){var e,n=Object(O.a)(t.instruments.keys()),a=t.instruments.map((function(t){return t[2].shortName.length})),i=Math.max.apply(Math,Object(O.a)(a)),r=new Map,o=Object(W.a)(t.instruments);try{for(o.s();!(e=o.n()).done;){var s,l=e.value,c=Object.keys(l[1]),u=Object(W.a)(c);try{for(u.s();!(s=u.n()).done;){var m=s.value;r[m]=t.tracks[m]}}catch(d){u.e(d)}finally{u.f()}}}catch(d){o.e(d)}finally{o.f()}return t.config.compactDisplay?Object(b.jsx)("div",{style:{margin:"auto"},children:n.map((function(e){return Object(b.jsx)(bt,{instrument:t.instruments[e][1],tracks:r,config:(a=t.config,o=e,0===o?Object(h.a)({},a):Object(h.a)(Object(h.a)({},a),{},{showBeatNumbers:!1})),modifyPatternLocation:t.modifyPatternLocation,prefix:(n=t.instruments[e][2].shortName,n+" ".repeat(i-n.length))},"part-"+e.toString());var n,a,o}))}):Object(b.jsx)("div",{style:{margin:"auto"},children:n.map((function(e){return Object(b.jsx)(jt,{instrumentName:t.instruments[e][0],instrument:t.instruments[e][1],tracks:r,config:t.config,modifyPatternLocation:t.modifyPatternLocation,dense:!0},"part-"+e.toString())}))})})),Ot=function(t){Object(m.a)(n,t);var e=Object(d.a)(n);function n(t){var a;return Object(c.a)(this,n),(a=e.call(this,t)).ref=i.a.createRef(),a}return Object(u.a)(n,[{key:"calculateBeat",value:function(t,e){return void 0!==e&&null!==e?Math.floor(e/t.beatResolution):null}},{key:"changePatternTime",value:function(t,e,n){if(e!==t||n){if(null!==t){var a,i=this.ref.current.getElementsByClassName("partNote"+t.toString()),r=Object(W.a)(i);try{for(r.s();!(a=r.n()).done;){a.value.classList.remove("activeNote")}}catch(c){r.e(c)}finally{r.f()}}if(null!==e){var o,s=this.ref.current.getElementsByClassName("partNote"+e.toString()),l=Object(W.a)(s);try{for(l.s();!(o=l.n()).done;){o.value.classList.add("activeNote")}}catch(c){l.e(c)}finally{l.f()}}}}},{key:"componentDidUpdate",value:function(t,e,n){if(t.instruments!==this.props.instruments||t.tracks!==this.props.tracks||t.config!==this.props.config||t.classes!==this.props.classes)return this.changePatternTime(this.calculateBeat(t.config,t.patternTime),this.calculateBeat(this.props.config,this.props.patternTime),!0),!0}},{key:"shouldComponentUpdate",value:function(t,e){return t.instruments!==this.props.instruments||t.tracks!==this.props.tracks||t.config!==this.props.config||t.classes!==this.props.classes||t.patternTime!==this.props.patternTime&&(this.changePatternTime(this.calculateBeat(this.props.config,this.props.patternTime),this.calculateBeat(t.config,t.patternTime),!0),!1)}},{key:"render",value:function(){return Object(b.jsx)("div",{className:this.props.classes.root,ref:this.ref,children:Object(b.jsx)(gt,{instruments:this.props.instruments,tracks:this.props.tracks,config:this.props.config,modifyPatternLocation:this.props.modifyPatternLocation})})}}]),n}(i.a.Component),wt=Object(p.a)((function(t){return{root:{fontFamily:"Roboto Mono",textAlign:"left",whiteSpace:"pre",margin:"auto",paddingLeft:10,paddingRight:10,"& .activeNote":{color:t.palette.secondary.main}}}}))(Ot),St=n(55),kt=n(241),xt=n.n(kt),yt=n(242),_t=n.n(yt),Ct=n(513),Pt=n(488),Dt=n(512);function Tt(t){var e="Playback disabled while content unlocked.",n=t.disabled?e:"",a=t.disabled?e:"";return Object(b.jsxs)(i.a.Fragment,{children:[Object(b.jsxs)("div",{children:[Object(b.jsx)(Dt.a,{title:n,"aria-label":n,children:Object(b.jsx)(St.a,{onClick:t.disabled?void 0:function(){t.onPlay&&t.onPlay()},disableRipple:t.disabled,disableFocusRipple:t.disabled,children:Object(b.jsx)(xt.a,{style:{color:t.disabled?"#cccccc":"#4cbb17"}})})}),Object(b.jsx)(Dt.a,{title:a,"aria-label":a,children:Object(b.jsx)(St.a,{onClick:t.disabled?void 0:function(){t.onStop&&t.onStop()},disableRipple:t.disabled,disableFocusRipple:t.disabled,children:Object(b.jsx)(_t.a,{style:{color:t.disabled?"#cccccc":"#ff0800"}})})})]}),Object(b.jsxs)(Pt.a,{container:!0,children:[Object(b.jsx)(Pt.a,{item:!0,xs:4}),Object(b.jsx)(Pt.a,{item:!0,xs:4,children:Object(b.jsx)(Ct.a,{defaultValue:t.initialTempo?t.initialTempo:100,min:60,step:1,max:180,onChange:function(e,n){t.onTempoChange&&t.onTempoChange(n)},valueLabelDisplay:"auto"})}),Object(b.jsx)(Pt.a,{item:!0,xs:4})]})]})}var Ht=i.a.memo(Tt),Mt=n(426),Rt=n(181),At=n(506),It=n(492),Nt=n(494),Et=n(490),Ft=n(495),Bt=n(493),Lt=n(491),zt=n(249),Kt=n.n(zt),Gt=n(250),Vt=n.n(Gt),qt=n(248),Wt=n.n(qt),Jt=n(178),Ut=n.n(Jt),Zt=n(142),Xt=n.n(Zt),$t=n(434),Yt=n(427),Qt=n(432),te=n(514),ee=n(489);var ne=function(t){return Object(b.jsxs)(T.a,{open:t.open,onClose:t.onClose,children:[Object(b.jsx)(A.a,{id:"dispatching-dialog-title",children:t.title}),Object(b.jsx)(H.a,{style:{justifyContent:"center"},children:Object(b.jsxs)(ee.a,{orientation:"vertical",children:[t.children,t.omitCancel||Object(b.jsx)(v.a,{onClick:t.onCancel,variant:"contained",children:"Cancel"})]})})]})},ae=function(t){Object(m.a)(n,t);var e=Object(d.a)(n);function n(t){var a;return Object(c.a)(this,n),(a=e.call(this,t)).state={currentValue:null},a}return Object(u.a)(n,[{key:"render",value:function(){var t,e,n=this,a=function(){n.props.onCancel&&n.props.onCancel(),n.setState({currentValue:null})},i=function(){null!==n.state.currentValue?n.state.currentValue.trim().length>0?(n.props.onChange&&n.props.onChange(n.state.currentValue),n.setState({currentValue:null})):alert('You selected an invalid name "'+n.state.currentValue+'".\nMust be non-empty.'):a()},r=""===(null!==(t=this.state.currentValue)&&void 0!==t?t:this.props.value);return Object(b.jsxs)(T.a,{open:this.props.open,onClose:a,"aria-labelledby":"form-dialog-title",children:[Object(b.jsx)(A.a,{id:"form-dialog-title"}),Object(b.jsxs)(M.a,{children:[Object(b.jsx)(R.a,{children:this.props.instruction}),Object(b.jsx)(te.a,{margin:"dense",id:"name",fullWidth:!0,value:null!==(e=this.state.currentValue)&&void 0!==e?e:this.props.value,onChange:function(t){n.setState({currentValue:t.target.value})},onKeyDown:function(t){13===t.keyCode&&(t.preventDefault(),i())},autoFocus:!0})]}),Object(b.jsxs)(H.a,{children:[Object(b.jsx)(v.a,{onClick:a,color:"primary",children:"Cancel"}),Object(b.jsx)(v.a,{disabled:this.props.requireNonEmpty&&r,onClick:i,color:"primary",children:"Confirm"})]})]})}}]),n}(i.a.Component),ie=n(37),re=n(244),oe=n.n(re),se=n(245),le=n.n(se),ce=n(246),ue=n.n(ce),me=n(247),de=n.n(me),pe=n(243),he=n.n(pe),fe=Object(w.a)((function(t){return{root:{display:"flex"}}})),ve=Object(p.a)({root:{marginLeft:0,marginRight:0}})(Rt.a),be=Object(p.a)({root:{padding:2}})(St.a),je=Object(p.a)((function(t){return{root:{borderBottom:"none",textAlign:"center",paddingBottom:t.spacing(0)}}}))(Et.a),ge=Object(p.a)((function(t){return{root:{textAlign:"center"}}}))(Et.a);function Oe(t){var e=i.a.useState(!1),n=Object(q.a)(e,2),a=n[0],r=n[1],o=i.a.useState(100),s=Object(q.a)(o,2),l=s[0],c=s[1],u=i.a.useState(t.muted),m=Object(q.a)(u,2),d=m[0],p=m[1],h=i.a.useRef(null),f=t.height?t.height/3:24,v={height:3*f,position:"absolute",top:-f},j=Object.assign(a?{}:{visibility:"hidden",paddingLeft:"0px"},v),g=a?{visibility:"hidden"}:{};return Object(b.jsx)(he.a,{time:.5,onClickNHold:mt.a?function(t,e){a||r(!0)}:function(t,e){a||r(!0),h&&h.current.dispatchEvent(e.nativeEvent)},onEnd:mt.a?null:function(t){r(!1)},children:Object(b.jsxs)(be,{disableRipple:!0,disableFocusRipple:!0,onClick:function(){p(!d),t.onMuteEvent(!d)},children:[Object(b.jsx)("div",{style:j,children:Object(b.jsx)(Ct.a,{defaultValue:100,orientation:"vertical","aria-labelledby":"vertical-slider",onChange:function(e,n){mt.a&&r(!1),function(e,n){c(n),t.onChange&&t.onChange(n)}(0,n)},ref:h})}),Object(b.jsx)("div",{style:g,children:d?Object(b.jsx)(oe.a,{fontSize:"small"}):l<10?Object(b.jsx)(le.a,{fontSize:"small"}):l<50?Object(b.jsx)(ue.a,{fontSize:"small"}):Object(b.jsx)(de.a,{fontSize:"small"})})]})})}var we=function(t){Object(m.a)(n,t);var e=Object(d.a)(n);function n(t){var a;return Object(c.a)(this,n),(a=e.call(this,t)).state={currentSymbol:null},a}return Object(u.a)(n,[{key:"render",value:function(){var t,e=this,n=function(t){e.setState({currentSymbol:null}),e.props.onCancel&&e.props.onCancel()},a=function(t){null!==e.state.currentSymbol&&1===e.state.currentSymbol.length?e.props.onChange&&(e.props.onChange(e.state.currentSymbol),e.setState({currentSymbol:null})):alert('You selected an invalid symbol "'+e.state.currentSymbol+'".\nSymbols must be precisely 1 character.')};return Object(b.jsxs)(T.a,{open:this.props.open,onClose:n,"aria-labelledby":"form-dialog-title",children:[Object(b.jsx)(A.a,{id:"form-dialog-title"}),Object(b.jsxs)(M.a,{children:[Object(b.jsx)(R.a,{children:"Enter notation symbol"}),Object(b.jsx)(te.a,{autoFocus:!0,margin:"dense",id:"name",fullWidth:!0,value:null!==(t=this.state.currentSymbol)&&void 0!==t?t:this.props.value,onChange:function(t){e.setState({currentSymbol:t.target.value})},onKeyDown:function(t){13===t.keyCode&&(t.preventDefault(),a())}})]}),Object(b.jsxs)(H.a,{children:[Object(b.jsx)(v.a,{onClick:n,color:"primary",children:"Cancel"}),Object(b.jsx)(v.a,{onClick:a,color:"primary",children:"Confirm"})]})]})}}]),n}(i.a.Component),Se=function(t){Object(m.a)(n,t);var e=Object(d.a)(n);function n(t){var a;Object(c.a)(this,n),a=e.call(this,t);var i=Object(O.a)(Object.keys(ot)),r=void 0!==t.initialDrumkit?i.indexOf(t.initialDrumkit):0,o=void 0!==t.initialDrumkit&&void 0!==t.initialSample?Object(O.a)(ot[t.initialDrumkit]).indexOf(t.initialSample):0;return a.state={currentDrumkitIndex:r,currentSampleIndex:o},a}return Object(u.a)(n,[{key:"render",value:function(){var t=this,e=function(e){t.props.onCancel&&t.props.onCancel()},n=Object(O.a)(Object.keys(ot)),a=Object(O.a)(ot[n[this.state.currentDrumkitIndex]]),i=function(e){null!==t.state.currentDrumkitIndex&&null!==t.state.currentSampleIndex&&t.props.onChange&&t.props.onChange({drumkit:n[t.state.currentDrumkitIndex],sample:a[t.state.currentSampleIndex]})};return Object(b.jsxs)(T.a,{open:this.props.open,onClose:e,"aria-labelledby":"form-dialog-title",onKeyDown:function(t){13===t.keyCode&&(t.preventDefault(),i())},children:[Object(b.jsx)(A.a,{id:"form-dialog-title"}),Object(b.jsxs)(M.a,{children:[Object(b.jsxs)(Mt.a,{variant:"standard",children:[Object(b.jsx)($t.a,{id:"drumkit-label",children:"Drumkit"}),Object(b.jsx)(Qt.a,{labelId:"drumkit-select-label",id:"drumkit-select",value:this.state.currentDrumkitIndex,onChange:function(e){e.target.value!==t.state.currentDrumkitIndex&&t.setState({currentDrumkitIndex:e.target.value,currentSampleIndex:0})},label:"Drumkit",children:n.map((function(t,e){return Object(b.jsxs)(Yt.a,{value:e,children:[" ",t," "]},e+"-"+t)}))})]}),Object(b.jsxs)(Mt.a,{variant:"standard",children:[Object(b.jsx)($t.a,{id:"sample-label",children:"Sample"}),Object(b.jsx)(Qt.a,{labelId:"sample-select-label",id:"sample-select",value:this.state.currentSampleIndex,onChange:function(e){t.setState({currentSampleIndex:e.target.value})},label:"Sample",children:a.map((function(t,e){return Object(b.jsxs)(Yt.a,{value:e,children:[" ",t," "]},e.toString()+"-"+t)}))})]})]}),Object(b.jsxs)(H.a,{children:[Object(b.jsx)(v.a,{onClick:e,color:"primary",children:"Cancel"}),Object(b.jsx)(v.a,{onClick:i,color:"primary",children:"Confirm"})]})]})}}]),n}(i.a.Component);function ke(t){var e=fe(),n=i.a.useState(!1),a=Object(q.a)(n,2),r=a[0],o=a[1],s=function(e,n){return Object(b.jsx)(Et.a,{align:"center",children:Object(b.jsx)(ve,{control:Object(b.jsx)(At.a,{checked:t.instrumentMask[e]===n,onChange:function(a){!function(e,n,a){var i=t.instrumentIndex[e].id,r=t.instruments.findIndex((function(t){return i in t[1]})),o=n;if(r!==o){var s=t.instruments[r],l=["",{}];if(null!=s){l[0]=s[0];for(var c=0,u=Object.keys(s[1]);c<u.length;c++){var m=u[c];m!==i.toString()&&(l[1][m]=s[1][m])}}var d=[t.instruments[o][0],Object.assign({},t.instruments[o][1])];d[1][i.toString()]=null!=s?s[1][i]:"X";for(var p=[],h=0;h<t.instruments.length;++h)h===r?p.push(l):h===o?p.push(d):p.push(t.instruments[h]);t.onChange(p)}}(e,n)},name:e+","+n.toString()})})},"instrumentPanel-cell-"+n.toString()+"-"+e.toString())},l=function(e){return Object(b.jsxs)(Lt.a,{children:[Object(b.jsxs)(Et.a,{component:"th",scope:"row",children:[Object(b.jsx)(x.a,{children:t.instruments[e][0]}),Object(b.jsx)(be,{onClick:function(n){!function(e){t.onEditRow&&t.onEditRow(e)}(e)},children:Object(b.jsx)(Ut.a,{fontSize:"small"})}),Object(b.jsx)(be,{onClick:function(n){!function(e){t.onRemoveRow&&t.onRemoveRow(e)}(e)},children:Object(b.jsx)(Xt.a,{fontSize:"small"})})]},"instrumentPanel-row-"+e.toString()+"-name"),Object(O.a)(Array(t.instrumentMask.length).keys()).map((function(t){return s(t,e)}))]},"instrumentPanel-row-"+e.toString())};return Object(b.jsxs)(It.a,{className:e.table,"aria-label":"simple table",children:[Object(b.jsxs)(Bt.a,{children:[Object(b.jsxs)(Lt.a,{children:[t.showAdvanced&&Object(b.jsx)(je,{},"instrumentPanel-row-instrument"),Object(O.a)(Array(t.instrumentIndex.length).keys()).map((function(e){return Object(b.jsx)(je,{children:Object(b.jsx)(x.a,{children:t.instrumentIndex[e].name})},"instrumentPanel-row-header-cell-"+e.toString())}))]},"instrumentPanel-row-header"),Object(b.jsxs)(Lt.a,{children:[t.showAdvanced&&Object(b.jsx)(ge,{children:Object(b.jsx)(St.a,{"aria-label":"Show Instrument Matcher",size:"small",onClick:function(){return o(!r)},children:r?Object(b.jsx)(Kt.a,{}):Object(b.jsx)(Vt.a,{})})},"instrumentPanel-row-instrument"),Object(O.a)(Array(t.instrumentIndex.length).keys()).map((function(e){return Object(b.jsx)(ge,{children:Object(b.jsxs)(Pt.a,{container:!0,children:[Object(b.jsx)(Pt.a,{item:!0,xs:6,children:Object(b.jsx)(be,{onClick:function(n){!function(e){t.onEditColumn&&t.onEditColumn(e)}(e)},children:Object(b.jsx)(Ut.a,{fontSize:"small"})})}),Object(b.jsx)(Pt.a,{item:!0,xs:6,children:Object(b.jsx)(Oe,{muted:t.instrumentIndex[e].muted,onChange:function(n){t.onVolumeEvent({instrument:e,volume:n/100})},onMuteEvent:function(n){t.onVolumeEvent({instrument:e,muted:n})}})})]})},"instrumentPanel-row-controls-cell-"+e.toString())}))]},"instrumentPanel-row-controls")]}),Object(b.jsxs)(Nt.a,{children:[r&&t.showAdvanced&&Object(O.a)(Array(t.instruments.length).keys()).map((function(t){return l(t)})),r&&t.showAdvanced&&Object(b.jsx)(Lt.a,{children:Object(b.jsx)(Et.a,{component:"th",scope:"row",children:Object(b.jsx)(St.a,{onClick:function(e){t.onAddRow&&t.onAddRow()},"aria-label":"add",children:Object(b.jsx)(Wt.a,{})})},"instrumentPanel-row-edit-cell")},"instrumentPanel-row-edit")]})]})}function xe(t){var e,n=Object(ie.a)(),a=i.a.useState(null),r=Object(q.a)(a,2),o=r[0],s=r[1],l=i.a.useState(null),c=Object(q.a)(l,2),u=c[0],m=c[1],d=i.a.useState(null),p=Object(q.a)(d,2),h=p[0],f=p[1],j=i.a.useState(null),g=Object(q.a)(j,2),O=g[0],w=g[1],S=function(e){if(null!==e){var n=t.instrumentIndex[o].id,a=t.instruments.findIndex((function(t){return n in t[1]})),i=Array.from(t.instruments);i[a][1][n]=e,t.onChange(i)}s(null)},x=function(e){if(null!==e){var n=t.instrumentIndex.slice();n[u]=Object.assign(Object.assign({},n[u]),{drumkit:e.drumkit,filename:e.sample}),t.onInstrumentIndexChange(n)}m(null)};return Object(b.jsxs)("div",{style:{paddingBottom:n.spacing(1)},children:[Object(b.jsx)(ae,{open:null!==h,onCancel:function(){f(null)},onChange:function(e){!function(e){if(h===t.instruments.length){var n=[e,{}],a=Array.from(t.instruments);a.push(n),t.onChange(a)}else{var i=Array.from(t.instruments);i[h][0]=e,t.onChange(i)}f(null)}(e)},value:null!==h?(e=h,e<t.instruments.length?t.instruments[e][0]:""):"",instruction:"Enter instrument name"}),Object(b.jsx)(we,{open:null!==o,onCancel:function(){S(null)},onChange:function(t){S(t)},value:null!==o?function(e){var n=t.instrumentIndex[o].id,a=t.instruments.findIndex((function(t){return n in t[1]}));return t.instruments[a][1][n]}():""}),null===u||Object(b.jsx)(Se,{open:null!==u,onCancel:function(){x(null)},onChange:function(t){x(t)},initialDrumkit:null!==u?t.instrumentIndex[u].drumkit:void 0,initialSample:null!==u?t.instrumentIndex[u].filename:void 0}),Object(b.jsxs)(ne,{open:null!==O,onCancel:function(){return w(null)},title:null!==O?"Edit "+t.instrumentIndex[O].name:null,children:[Object(b.jsx)(v.a,{onClick:function(){s(O),w(null)},children:"Edit Symbol"}),Object(b.jsx)(v.a,{onClick:function(){m(O),w(null)},children:"Edit Sample"})]}),Object(b.jsx)(Ft.a,{component:k.a,style:{border:"2px solid rgba(255, 255, 255, 0.5)",outline:"none",borderRadius:"8px"},children:Object(b.jsx)(ke,{instrumentIndex:t.instrumentIndex,instrumentMask:t.instrumentMask,instruments:t.instruments,onEditColumn:function(t){return w(t)},onEditRow:function(t){f(t)},onAddRow:function(){f(t.instruments.length)},onRemoveRow:function(e){!function(e){var n=t.instruments.slice(0,e).concat(t.instruments.slice(e+1));t.onChange(n)}(e)},onVolumeEvent:t.onVolumeEvent,onChange:t.onChange,showAdvanced:t.showAdvanced})})]})}var ye=i.a.memo(xe),_e=n(504),Ce=n(505),Pe=n(499),De=n(507),Te=n(94),He=n(260),Me=n(26),Re=.05,Ae=function(t){Re=t},Ie=Object.keys(ot),Ne=function(){function t(e,n,a,i,r,o){var s=this;if(Object(c.a)(this,t),this.updatePattern=function(t){if(s.patternDetails[t.name]={resolution:rt.determineMinResolution(s.instrumentIndex,t.instrumentTracks),length:rt.determineTrackLength(s.instrumentIndex,t.instrumentTracks),name:t.name,tracks:t.instrumentTracks,pattern:t},t.name===s.currentPatternName){var e=s.createSequenceForPattern(s.instrumentIndex,s.patternDetails[t.name].pattern);s.sequence._part.mute=!0,s.sequence=e,e._part.mute=!1}},this.removePattern=function(t){if(t===s.currentPatternName)throw new Error("Can't delete the current pattern!");s.patternDetails[t]=void 0},this.getExportState=function(){return{tempo:Me.h().bpm.value}},o){var l=n.map((function(t){return t.name})),u=new Set(l);l.length!==u.size&&o("Warning: tabit currently only supports inputs where all the pattern names are unique. Good luck!")}if(r&&Me.f.latencyHint!==r){var m=new Me.a({latencyHint:r});Me.i(m)}Ae("playback"===r?.2:.05),this.latencyHint=r,this.samples={},this.currentPattern=null,this.gain=new Me.b,this.gain.toDestination(),this.onPatternTimeChange=i,Me.h().bpm.value=a,Me.h().loop=!0,this.sampleCount=0,this.expectedSampleCount=0,this.patternDetails={};var d,p=[],h=Object(W.a)(n);try{for(h.s();!(d=h.n()).done;){var f=d.value;this.patternDetails[f.name]={resolution:rt.determineMinResolution(e,f.instrumentTracks),length:rt.determineTrackLength(e,f.instrumentTracks),name:f.name,tracks:f.instrumentTracks,pattern:f},this.populateSamples(e,f.instrumentTracks,p)}}catch(k){h.e(k)}finally{h.f()}if(this.currentPatternName=null,this.instrumentIndex=e,p.length>0&&o){for(var v=function(t){var e,n=[],a=Object(W.a)(t);try{for(a.s();!(e=a.n()).done;){var i,r=Object(q.a)(e.value,2),o=r[0],s=r[1],l=!0,c=Object(W.a)(n);try{for(c.s();!(i=c.n()).done;){var u=Object(q.a)(i.value,2),m=u[0],d=u[1];if(o===m&&s===d){l=!1;break}}}catch(k){c.e(k)}finally{c.f()}l&&n.push([o,s])}}catch(k){a.e(k)}finally{a.f()}return n.sort(),n}(p),b=v.length>1,j=b?"s":"",g="Failed to load sample"+j+" for instrument"+j+": "+(b?"{":""),O=0;O<v.length;++O){var w=Object(q.a)(v[O],2),S=w[0];g+=w[1],""!==S&&(g+=" ("+S+")"),O!==v.length-1?g+=", ":g+=(b?"}":"")+"."}o(g+="\ntabit's supported drumkits are "+Ie.join(", ")+".")}}return Object(u.a)(t,[{key:"teardown",value:function(){this.stop(),Me.h().cancel()}},{key:"samplesReady",value:function(){return this.sampleCount===this.expectedSampleCount}},{key:"populateSamples",value:function(t,e,n){for(var a=this,i=function(){var e=Object(q.a)(o[r],1)[0],i=t.filter((function(t){return t.id.toString()===e}));if(i.length>0){var s=i[0],l=rt.convertNormalToAudible(Math.min(Math.max(0,s.volume),1)),c=null;if("drumkit"in s&&"filename"in s&&Ie.includes(s.drumkit))c="/tabit/wav/"+s.drumkit+"/"+s.filename;else{if(!("drumkit"in s))return n.push([s.drumkit,s.name]),"continue";var u=function(t,e){var n=e.toLowerCase();return n.includes("kick")?{drumkit:"The Black Pearl 1.0",filename:"PearlKick-Hard.wav"}:n.includes("stick")?{drumkit:"DeathMetal",filename:"16297_ltibbits_sticks_low_pitch.wav"}:n.includes("tom")?{drumkit:"Millo_MultiLayered3",filename:"ft_01.wav"}:n.includes("clap")?{drumkit:"TR808EmulationKit",filename:"808_Clap.wav"}:n.includes("snare")?{drumkit:"GMRockKit",filename:"Snare-Soft.wav"}:n.includes("cowbell")?{drumkit:"GMRockKit",filename:"Cowbell-Softest.wav"}:null}(s.drumkit,s.name);c="/tabit/wav/"+u.drumkit+"/"+u.filename}if(s.id in a.samples&&a.samples[s.id].url===c)return"continue";s.id in a.samples&&(a.samples[s.id].gain.disconnect(),a.samples[s.id].player.disconnect(),a.samples[s.id].gain.dispose(),a.samples[s.id].player.dispose());var m=new Me.c(c,(function(){a.sampleCount++}));m.mute=s.muted,m.name=s.name;var d=new Me.b(l,"normalRange");m.connect(d),d.connect(a.gain),a.samples[s.id]={player:m,gain:d,drumkit:s.drumkit,filename:s.filename,url:c},a.expectedSampleCount++}},r=0,o=Object.entries(e);r<o.length;r++)i()}},{key:"createSequenceForPattern",value:function(t,e){var n=this.patternDetails[e.name].resolution,a=this.patternDetails[e.name].length,i=function(t,e){var n=e.samplesReady();return function(a,i){if(n||(n=e.samplesReady())){var r=i%(t.length/t.resolution);window.trace&&window.trace("playing sequence callback at time "+String(a)+" index "+String(i));for(var o=0,s=Object.entries(t.tracks);o<s.length;o++){var l=Object(q.a)(s[o],2),c=l[0];if(l[1].rep[r]){var u=e.samples[c];void 0!==u&&(u.player.stop(a+Re),u.player.start(a+Re))}}e.onPatternTimeChange&&Me.g().schedule((function(){if("started"===Me.h().state){var n=r*t.resolution%t.length;e.onPatternTimeChange&&e.onPatternTimeChange(n)}}),a+Re)}}}(this.patternDetails[e.name],this),r=new Me.d(i,Object(O.a)(Array(a/n).keys()),Me.e("4n")*(n/48));return r._part.mute=!0,r.start(0),r}},{key:"createSequences",value:function(t,e){var n,a={},i=Object(W.a)(e);try{for(i.s();!(n=i.n()).done;){var r=n.value;a[r.name]=this.createSequenceForPattern(t,r)}}catch(o){i.e(o)}finally{i.f()}return a}},{key:"setActivePattern",value:function(t){var e=this;if(t!==this.currentPatternName){var n=null!==this.currentPatternName?this.currentPatternName:null,a=this.patternDetails[t].length,i=null!==n?this.patternDetails[n]:null,r=Me.h().loopEnd-(Me.h().toSeconds(Me.h().position)-Re),o="playback"===this.latencyHint,s=!o&&null!==n&&"started"===Me.h().state&&r>0&&r<Me.h().toSeconds(Me.e("8n")),l=this.createSequenceForPattern(this.instrumentIndex,this.patternDetails[t].pattern),c=function(r){null!==n&&(e.sequence._part.mute=!0),null!==n&&i===a||Me.h().setLoopPoints(0,Me.e("4n")*(a/48)),e.sequence=l,e.sequence._part.mute=!1,e.currentPatternName=t},u="started"===Me.h().state;o&&u&&this.stop(),s?Me.h().scheduleOnce(c,Me.e("0")):c(),o&&u&&this.play()}}},{key:"isPlaying",value:function(){return"started"===Me.h().state}},{key:"play",value:function(){Me.j().then((function(){Me.h().start()}))}},{key:"stop",value:function(){var t=this;"started"===Me.h().state&&(Me.h().stop(),this.onPatternTimeChange&&Me.g().schedule((function(){t.onPatternTimeChange(null)}),Me.h().now()))}},{key:"setAnimateCallback",value:function(t){this.onPatternTimeChange&&this.onPatternTimeChange(null),this.onPatternTimeChange=t}},{key:"setMutedForInstrument",value:function(t,e){this.samples[t].player.mute=e}},{key:"setGainForInstrument",value:function(t,e){this.samples[t].gain.set({gain:e})}},{key:"setVolumeForInstrument",value:function(t,e){this.setGainForInstrument(t,rt.convertNormalToAudible(e))}},{key:"setTempo",value:function(t){Me.h().bpm.value=t}},{key:"getTempo",value:function(){return Me.h().bpm.value}}]),t}(),Ee=n(262),Fe=n(263),Be=n.n(Fe),Le=n(264),ze=n.n(Le);function Ke(t){return Object(b.jsx)(T.a,{open:t.open,onClose:t.onClose,"aria-labelledby":"sharing-dialog","aria-describedby":"sharing-dialog",children:Object(b.jsxs)(M.a,{children:[Object(b.jsx)(R.a,{children:"Your song is available at"}),Object(b.jsxs)(R.a,{children:[t.url,Object(b.jsx)(St.a,{onClick:function(e){Be()(t.url)},children:Object(b.jsx)(ze.a,{})})]}),Object(b.jsx)(H.a,{children:Object(b.jsx)(v.a,{onClick:t.onClose,children:"Close"})})]})})}var Ge=i.a.memo(Ke),Ve=n(496),qe=n(265),We=n.n(qe),Je=Object(w.a)((function(t){return{root:{margin:"auto"},paper:{width:200,height:230,overflow:"auto"},button:{margin:t.spacing(.5,0)}}}));function Ue(t){var e=t.items,n=t.selectedItems,a=t.onChange,r=Je(),o=i.a.useState(e.map((function(t){return!1}))),s=Object(q.a)(o,2),l=s[0],c=s[1],u=function(t,e){return Object(b.jsx)(k.a,{className:r.paper,children:Object(b.jsxs)(S.a,{dense:!0,component:"div",role:"list",children:[t.map((function(t){var n="transfer-list-item-".concat(t.value,"-label");return Object(b.jsxs)(y.a,{role:"listitem",button:!0,onClick:function(){!function(t){var e=Object(O.a)(l.keys()).map((function(e){return e===t?!l[e]:l[e]}));c(e)}(t.value)},children:[e&&Object(b.jsx)(Ve.a,{children:Object(b.jsx)(At.a,{checked:l[t.value],tabIndex:-1,disableRipple:!0,inputProps:{"aria-labelledby":n}})}),Object(b.jsx)(_.a,{id:n,primary:t.label})]},t.value)})),Object(b.jsx)(y.a,{})]})})};return Object(b.jsxs)(Pt.a,{container:!0,spacing:2,justify:"center",alignItems:"center",className:r.root,children:[Object(b.jsx)(Pt.a,{item:!0,children:u(e,!0)}),Object(b.jsx)(Pt.a,{item:!0,children:Object(b.jsxs)(Pt.a,{container:!0,direction:"column",alignItems:"center",children:[Object(b.jsx)(St.a,{size:"small",className:r.button,onClick:function(){var t=n.concat(e.filter((function(t){return l[t.value]})));a&&a(t),c(e.map((function(t){return!1})))},"aria-label":"move selected right",children:">"}),Object(b.jsx)(St.a,{variant:"outlined",size:"small",className:r.button,onClick:function(){a&&a([]),c(e.map((function(t){return!1})))},"aria-label":"reset",children:Object(b.jsx)(We.a,{})})]})}),Object(b.jsx)(Pt.a,{item:!0,children:u(n,!1)})]})}var Ze=n(508),Xe=n(497),$e=n(498),Ye=n(179),Qe=n.n(Ye),tn=n(509),en=Object(w.a)((function(t){return Object(tn.a)({root:{backgroundColor:t.palette.primary.main}})}));var nn=function(t){var e=i.a.useState(null),n=Object(q.a)(e,2),a=n[0],r=n[1],o=i.a.useState(null),s=Object(q.a)(o,2),l=s[0],c=s[1],u=i.a.useState([]),m=Object(q.a)(u,2),d=m[0],p=m[1],h=i.a.useState(!0),f=Object(q.a)(h,2),j=f[0],g=f[1],w=i.a.useState(!1),S=Object(q.a)(w,2),k=S[0],y=S[1],_=function(){c(null),r(null),p([]),g(!0),y(!1)},C=function(e){if(!e)return _(),void t.onClose();j?(t.onChange({name:a}),_()):k?d&&l&&(t.onChange({name:l,recipe:d}),_()):console.error("unreachable code in closeAndCommit"),t.onClose()},P=Object(O.a)(t.patterns.keys()).map((function(e){return{value:e,label:t.patterns[e]}})),D=function(e){return e&&-1===t.patterns.indexOf(e)},R=d.length>=1&&D(l),A=D(a),I=k&&R||j&&A,N=function(t){13===t.keyCode&&I&&(t.preventDefault(),C(!0))},E=en();return Object(b.jsx)(T.a,{open:t.open,onClose:t.onClose,"aria-labelledby":"pattern-edit-dialog","aria-describedby":"pattern-edit-dialog",children:Object(b.jsxs)(M.a,{className:E.root,children:[Object(b.jsxs)(Ze.a,{expanded:j,onChange:function(t,e){g(e),k&&y(!e)},children:[Object(b.jsx)(Xe.a,{"aria-controls":"option-create",id:"panel-create",expandIcon:Object(b.jsx)(Qe.a,{}),children:Object(b.jsx)(x.a,{children:"Create new pattern"})}),Object(b.jsx)($e.a,{children:Object(b.jsx)(_e.a,{style:{display:"flex",flexDirection:"column"},children:Object(b.jsx)(te.a,{error:a&&!D(a),label:"Pattern Name",helperText:a&&!D(a)?"Pattern names must be unique.":void 0,variant:"outlined",onChange:function(t){r(t.target.value)},style:{alignSelf:"flex-end"},onKeyDown:N})})})]}),Object(b.jsxs)(Ze.a,{expanded:k,onChange:function(t,e){j&&g(!e),y(e)},children:[Object(b.jsx)(Xe.a,{"aria-controls":"option-combine",id:"panel-combine",expandIcon:Object(b.jsx)(Qe.a,{}),children:Object(b.jsx)(x.a,{children:"Combine Patterns"})}),Object(b.jsxs)($e.a,{style:{display:"flex",flexDirection:"column"},children:[Object(b.jsx)(Ue,{items:P,selectedItems:d,onChange:p}),Object(b.jsx)(_e.a,{style:{display:"flex",flexDirection:"column"},children:Object(b.jsx)(te.a,{error:l&&!D(l),label:"Pattern Name",helperText:l&&!D(l)?"Pattern names must be unique.":void 0,variant:"outlined",onChange:function(t){c(t.target.value)},style:{alignSelf:"flex-end"},onKeyDown:N})})]})]}),Object(b.jsxs)(H.a,{children:[Object(b.jsx)(v.a,{onClick:function(){C(!0)},disabled:!I,children:"Confirm"}),Object(b.jsx)(v.a,{onClick:function(){C(!1)},children:"Close"})]})]})})},an=n(275),rn=n(266),on=Object(rn.a)((function(t,e){var n=Object.assign({},t);return e&&(n=Object.assign(n,e)),n})),sn=function(t){Object(m.a)(n,t);var e=Object(d.a)(n);function n(){var t;Object(c.a)(this,n);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(t=e.call.apply(e,[this].concat(i))).state={selectedPattern:0,patternSettings:t.props.songData.patternSettings,formatSettings:t.props.songData.formatSettings,songData:{instruments:t.props.songData.instruments,instrumentIndex:t.props.songData.instrumentIndex,instrumentMask:t.props.songData.instrumentMask,patterns:t.props.songData.patterns,title:t.props.songData.title},settingsOpen:!1,patternsOpen:!0,sharingDialogOpen:!1,patternCreateDialogOpen:!1,renameDialogOpen:!1,patternTime:null,errorAlert:null,locked:!0,animating:!0,interactive:!1,autosave:!0},t.removePattern=function(e){if(t.audio&&t.audio.stop(),1===t.state.songData.patterns.length)return t.setError("Can't delete the last pattern");var n=Object(O.a)(Array(t.state.songData.patterns.length).keys()).filter((function(t){return t!==e})),a=n.map((function(e){return t.state.songData.patterns[e]})),i=n.map((function(e){return t.state.patternSettings[e]})),r=Object.assign(Object.assign({},t.state.songData),{patterns:a}),o=e<=t.state.selectedPattern?t.state.selectedPattern-1:t.state.selectedPattern,s=Math.min(Math.max(0,o),n.length-1),l=t.state.selectedPattern;t.setState({songData:r,patternSettings:i,selectedPattern:s},(function(){t.audio.setActivePattern(t.state.songData.patterns[t.state.selectedPattern].name),t.audio.removePattern(l)}))},t.cycleCellContent=function(e,n){for(var a=e[0],i=Object(O.a)(Object.entries(n)).sort((function(t,e){return t[1]<t[2]})),r=it.a.clonePattern(t.state.songData.patterns[t.state.selectedPattern].name,t.state.songData.patterns[t.state.selectedPattern]),o=null,s=0;s<i.length;++s){var l=i[s][0];if(1===r.instrumentTracks[l].queryPoint(a)){o=s;break}}var c,u=null===o?0:o===i.length-1?null:o+1,m=null===o?null:r.instrumentTracks[i[o][0]],d=null===u?null:r.instrumentTracks[i[u][0]],p=Object(W.a)(e);try{for(p.s();!(c=p.n()).done;){var h=c.value;m&&m.setPoint(h,0),d&&d.setPoint(h,1)}}catch(b){p.e(b)}finally{p.f()}var f=t.state.songData.patterns.slice(0,t.state.selectedPattern).concat([r]).concat(t.state.songData.patterns.slice(t.state.selectedPattern+1)),v=Object.assign(Object.assign({},t.state.songData),{patterns:f});t.setState({songData:v},(function(){t.audio&&t.audio.updatePattern(t.state.songData.patterns[t.state.selectedPattern])}))},t.addCombinedPattern=function(e,n){for(var a=it.a.clonePattern(e,t.state.songData.patterns[n[0].value]),i=1;i<n.length;++i)a=it.a.combinePatterns(e,a,t.state.songData.patterns[n[i].value]);var r=it.a.guessPerPatternSettings(a.instrumentTracks),o=Object.assign(Object.assign({},t.state.songData),{patterns:t.state.songData.patterns.concat(a)});t.setState({songData:o,patternSettings:t.state.patternSettings.concat(r)},(function(){t.audio&&t.audio.updatePattern(a),t.selectPattern(o.patterns.length-1)}))},t.createNewPatternWithSettings=function(e,n,a,i){var r=it.a.createEmptyPattern(e,n,a,i),o=it.a.guessPerPatternSettings(r.instrumentTracks),s=Object.assign(Object.assign({},t.state.songData),{patterns:t.state.songData.patterns.concat(r)});t.setState({songData:s,patternSettings:t.state.patternSettings.concat(o)},(function(){t.audio&&t.audio.updatePattern(r),t.selectPattern(s.patterns.length-1)}))},t.createNewPattern=function(e){var n=384,a=16,i=[],r=t.state.songData.patterns[t.state.selectedPattern];n=r.size,a=r.resolution,i=Array.from(Object.keys(r.instrumentTracks)),t.createNewPatternWithSettings(e,a,n,i)},t.handleCreate=function(e){e.recipe?t.addCombinedPattern(e.name,e.recipe):t.createNewPattern(e.name)},t.changeInstruments=function(e){var n=Object.assign({},t.state.songData);n.instruments=e,n.instrumentMask=tt(t.state.songData.instrumentIndex,e),t.setState({songData:n})},t.updateInstrumentIndex=function(e){var n=tt(e,t.state.songData.instruments);t.setState({songData:Object.assign(Object.assign({},t.state.songData),{instrumentMask:n,instrumentIndex:e})},(function(){if(t.audio){var n=t.audio.isPlaying();n&&t.audio.stop(),t.audio.instrumentIndex=e;t.audio.populateSamples(e,t.state.songData.patterns[t.state.selectedPattern].instrumentTracks,[]),t.audio.updatePattern(t.state.songData.patterns[t.state.selectedPattern]),n&&t.audio.play()}}))},t.sendVolumeEvent=function(e){var n=t.state.songData.instrumentIndex[e.instrument].id,a=t.state.songData.instrumentIndex[e.instrument];"volume"in e?(t.audio&&t.audio.setVolumeForInstrument(n,e.volume),a.volume=e.volume):"muted"in e&&(t.audio&&t.audio.setMutedForInstrument(n,e.muted),a.muted=e.muted);var i=t.state.songData.instrumentIndex.slice();i[e.instrument]=a;var r=Object.assign(Object.assign({},t.state.songData),{instrumentIndex:i});t.setState({songData:r})},t.handleSettingsChange=function(e){if("animate"!==e.key)if("interactive"===e.key&&t.setState({interactive:e.value}),e.local){t.setState((function(t){return{patternSettings:t.patternSettings.map((function(n,a){return a!==t.selectedPattern?n:Object.assign({},t.patternSettings[t.selectedPattern],Object(ut.a)({},e.key,e.value))}))}}))}else{var n=Object.assign({},t.state.formatSettings,Object(ut.a)({},e.key,e.value));t.setState({formatSettings:n})}else!0===e.value?t.setState({animating:!0},(function(){t.audio&&t.audio.setAnimateCallback(t.createAnimateCallback())})):t.setState({animating:!1},(function(){t.audio&&t.audio.setAnimateCallback(null)}))},t.handlePatternsToggle=function(e){t.setState({patternsOpen:!t.state.patternsOpen})},t.handleSettingsToggle=function(e){t.setState({settingsOpen:!t.state.settingsOpen})},t.selectPattern=function(e){t.audio&&t.audio.setActivePattern(t.state.songData.patterns[e].name),t.setState({selectedPattern:e})},t.onShare=function(){N.e(t.getExportState()).then((function(e){var n=window.origin+"/tabit/song/"+e;t.setState({permanentUrl:n,sharingDialogOpen:!0})})).catch((function(t){alert("Couldn't contact external server at this time.")}))},t.onDownload=function(){N.b(t.getExportState())},t.closePatternCreateDialog=function(){t.setState({patternCreateDialogOpen:!1})},t.openPatternCreateDialog=function(){t.setState({patternCreateDialogOpen:!0})},t.onSave=function(){N.f(t.getExportState())},t.optionalUnloadAutosave=function(){t.state.autosave&&t.onSave()},t.onHideView=function(){t.onStop()},t.handleSettingsToggle=function(e){t.setState({settingsOpen:!t.state.settingsOpen})},t.handlePatternsToggle=function(e){t.setState({patternsOpen:!t.state.patternsOpen})},t.closeSharingDialog=function(){t.setState({sharingDialogOpen:!1})},t.onPlay=function(){t.audio&&t.audio.play()},t.onStop=function(){t.audio&&t.audio.stop(),t.setState({patternTime:null})},t.onSetTempo=function(e){t.audio&&t.audio.setTempo(e)},t.setError=function(e){t.setState({errorAlert:e})},t.onToggleLocked=function(){t.setState((function(e){var n=!e.locked;return!n&&t.audio&&t.audio.stop(),{locked:n,patternsOpen:e.patternsOpen||!n}}))},t.onToggleCompact=function(){t.setState((function(e){var n=!t.state.formatSettings.compactDisplay;return{formatSettings:Object(h.a)(Object(h.a)({},t.state.formatSettings),{},{compactDisplay:n})}}))},t.onEnableRenameDialog=function(){t.setState({renameDialogOpen:!0})},t.onDisableRenameDialog=function(){t.setState({renameDialogOpen:!1})},t.onRename=function(e){var n=Object.assign(Object.assign({},t.state.songData),{title:e});t.setState({songData:n,renameDialogOpen:!1})},t}return Object(u.a)(n,[{key:"componentDidMount",value:function(){window.app=this,this.createController(),window.addEventListener("beforeunload",this.onSave),mt.a&&window.addEventListener("visibilitychange",this.onHideView)}},{key:"createAnimateCallback",value:function(){var t=this;return function(e){window.trace&&window.trace("animate step "+String(e));var n=null===t.state.patternTime!==(null===e),a=t.state.patternSettings[t.state.selectedPattern].beatResolution,i=Math.floor(t.state.patternTime/a),r=Math.floor(e/a);(n||i!==r)&&(window.trace&&window.trace("setting pattern time (currentBeat, nextBeat, state.patternTime, time) ("+String(i)+", "+String(r)+","+String(t.state.patternTime)+","+String(e)+")"),t.setState({patternTime:e}))}}},{key:"createController",value:function(){var t=this.props.songData.audioState.tempo;this.audio&&(t=this.audio.getTempo(),this.audio.teardown());var e=mt.a?"playback":null,n=this.createAnimateCallback();this.audio=new Ne(this.state.songData.instrumentIndex,this.state.songData.patterns,t,n,e,this.setError),this.audio.setActivePattern(this.state.songData.patterns[this.state.selectedPattern].name)}},{key:"componentWillUnmount",value:function(){this.onSave(),window.removeEventListener("beforeunload",this.onSave),mt.a&&window.removeEventListener("visibilitychange",this.onHideView),this.audio&&(this.audio.teardown(),delete this.audio)}},{key:"getExportState",value:function(){return{instruments:this.state.songData.instruments,instrumentIndex:this.state.songData.instrumentIndex,patterns:this.state.songData.patterns,songName:this.state.songData.title,formatSettings:this.state.formatSettings,patternSettings:this.state.patternSettings,audioState:null!==this.audio?this.audio.getExportState():void 0,version:"1.2.0"}}},{key:"render",value:function(){var t=this,e=this.state.songData.patterns[this.state.selectedPattern],n=this.state.songData&&this.state.patternSettings?this.state.patternSettings[this.state.selectedPattern]:null,a=on(this.state.formatSettings,n),i=mt.a?12:8;return Object(b.jsxs)("div",{className:"App",children:[Object(b.jsx)(an.a,{variant:"dense"}),Object(b.jsx)(Te.a,{title:this.state.songData.title,settingsToggle:this.handleSettingsToggle,patternsToggle:this.handlePatternsToggle,onShare:this.onShare,locked:this.state.locked,onLockUnlock:this.onToggleLocked,compact:this.state.formatSettings.compactDisplay,onToggleCompact:this.onToggleCompact,onTitleClick:this.onEnableRenameDialog}),Object(b.jsx)(ae,{open:this.state.renameDialogOpen,onCancel:this.onDisableRenameDialog,onChange:this.onRename,value:this.state.songData.title,instruction:"Enter new title",requireNonEmpty:!0}),this.state.errorAlert&&Object(b.jsx)(De.a,{severity:"error",open:!0,autoHideDuration:5e3,onClose:function(){t.setState({errorAlert:null})},children:Object(b.jsxs)(Ce.a,{severity:"error",onClose:function(){t.setState({errorAlert:null})},children:[Object(b.jsx)(Pe.a,{children:"Error"}),Object(b.jsx)(_e.a,{children:this.state.errorAlert.split("\n").map((function(t){return Object(b.jsx)(_e.a,{children:t})}))})]})}),Object(b.jsx)("div",{style:{display:"flex",flexGrow:1}}),Object(b.jsx)("div",{style:{display:"flex",overflowX:"auto",flexDirection:"column",justifyContent:"safe center",width:"100%",maxWidth:"100%"},children:Object(b.jsx)(wt,{instruments:this.state.songData.instruments,tracks:e.instrumentTracks,config:a,patternTime:this.state.patternTime,modifyPatternLocation:this.state.interactive?this.cycleCellContent:void 0})}),Object(b.jsx)("div",{style:{display:"flex",flexGrow:1}}),Object(b.jsx)(Ht,{onPlay:this.onPlay,onStop:this.onStop,initialTempo:this.props.songData.audioState.tempo,onTempoChange:this.onSetTempo,disabled:!this.state.locked}),Object(b.jsx)("div",{style:{display:"flex",overflowX:"auto",flexDirection:"column",justifyContent:"safe center",width:"100%",maxWidth:"100%"},children:Object(b.jsxs)(Pt.a,{container:!0,children:[i<12?Object(b.jsx)(Pt.a,{item:!0,xs:(12-i)/2}):null,Object(b.jsx)(Pt.a,{item:!0,xs:i,children:Object(b.jsx)(ye,{instruments:this.state.songData.instruments,instrumentIndex:this.state.songData.instrumentIndex,instrumentMask:this.state.songData.instrumentMask,onChange:this.changeInstruments,onInstrumentIndexChange:this.updateInstrumentIndex,onVolumeEvent:this.sendVolumeEvent,showAdvanced:!this.state.locked})}),i<12?Object(b.jsx)(Pt.a,{item:!0,xs:(12-i)/2}):null]})}),Object(b.jsx)(He.a,{open:this.state.patternsOpen,onOpen:this.handlePatternsToggle,onClose:this.handlePatternsToggle,patterns:this.state.songData.patterns,selectPattern:this.selectPattern,onRemove:this.state.locked?void 0:this.removePattern,onAdd:this.state.locked?void 0:this.openPatternCreateDialog}),Object(b.jsx)(Ee.a,{open:this.state.settingsOpen,onOpen:this.handleSettingsToggle,onClose:this.handleSettingsToggle,anchor:"right",pattern:e,settings:a,onChange:this.handleSettingsChange,onSave:this.onDownload,animating:this.state.animating,interactive:this.state.interactive}),Object(b.jsx)(Ge,{open:this.state.sharingDialogOpen,onClose:this.closeSharingDialog,url:this.state.permanentUrl}),Object(b.jsx)(nn,{open:this.state.patternCreateDialogOpen,onClose:this.closePatternCreateDialog,onChange:this.handleCreate,patterns:Object(O.a)(this.state.songData.patterns.keys()).map((function(e){return t.state.songData.patterns[e].name}))})]})}}]),n}(i.a.Component),ln=sn,cn=n(137),un=n.n(cn),mn=n(19),dn=n(9),pn=n.n(dn),hn=n(267),fn=n(138);function vn(t,e){var n=Array.from(t.notes,(function(t){return t.position}));return Object(fn.a)(n,e)}function bn(t){var e=t.song.instrumentList.instrument,n=Array.from(e,(function(t){var e=t.instrumentComponent,n={id:parseInt(t.id),name:t.name.toString(),volume:parseFloat(t.volume),muted:t.isMuted,gain:parseFloat(t.gain),drumkit:t.drumkit.toString()};if(e.layer){var a=[].concat(e.layer);a[Math.min(Math.max(Math.floor(a.length/2),0),a.length-1)].filename&&(t.drumkit.toString()in ot?n.filename=a[0].filename.toString().replace(".flac",".wav"):n.filename=a[0].filename.toString())}return n})),a=t.song.patternList.pattern,i=Array.from(a,(function(t){var e=parseInt(t.size),n=t.noteList.note,a=[];return n&&(a=(a=Array.from(n,(function(t){return{position:parseInt(t.position),instrument:parseInt(t.instrument)}}))).filter((function(t){return t.position<e}))),{size:e,name:t.name.toString(),notes:a}})),r=Array.from(i,(function(t){var e,a=vn(t,t.size),i={},r=Object(W.a)(n);try{var o=function(){var n=e.value,r=t.notes.filter((function(t){return t.instrument===n.id})),o=Array.from(r,(function(t){return t.position}));i[n.id.toString()]=nt.a.fromPositions(o,t.size,a)};for(r.s();!(e=r.n()).done;)o()}catch(s){r.e(s)}finally{r.f()}return t.resolution=a,t.instrumentTracks=i,t}));if(t.song.virtualPatternList){var o=t.song.virtualPatternList.pattern;if(o){for(var s={},l=0,c=Array.from(o);l<c.length;l++){var u=c[l],m=u.name;"string"===typeof u.virtual?s[m]=new Set([u.virtual]):s[m]=new Set(Array.from(u.virtual))}for(var d=0;d<20;++d){for(var p={},h=!1,f=0,v=Object.entries(s);f<v.length;f++){var b,j=Object(q.a)(v[f],2),g=j[0],w=j[1],S=new Set(w),k=Object(W.a)(S);try{for(k.s();!(b=k.n()).done;){var x=b.value;x in s&&(S=new Set([].concat(Object(O.a)(S),Object(O.a)(s[x]))))}}catch(P){k.e(P)}finally{k.f()}h=h||S.size!==w.size,p[g]=S}if(!h)break;if(20===d)throw new Error("Reached max virtual_pattern recursion depth.");s=p}for(var y=function(){var t,e=Object(q.a)(C[_],2),n=e[0],a=e[1],i=r.find((function(t){return t.name===n})),o=Object(W.a)(a);try{var s=function(){for(var e=t.value,n=r.find((function(t){return t.name===e})),a=0,o=Object.entries(n.instrumentTracks);a<o.length;a++){var s=Object(q.a)(o[a],2),l=s[0],c=s[1];if(l in i.instrumentTracks){var u=i.instrumentTracks[l].aggregate(c);u.rep.length=i.size/u.resolution,i.instrumentTracks[l]=u}else{var m=c.format(i.resolution);m.length=i.size/i.resolution,i.instrumentTracks[l]=m}}};for(o.s();!(t=o.n()).done;)s()}catch(P){o.e(P)}finally{o.f()}var l=vn(i,i.size);i.resolution=l;for(var c=0,u=Object.entries(i.instrumentTracks);c<u.length;c++){var m=Object(q.a)(u[c],2),d=m[0],p=m[1];i[d]=p.format(l)}},_=0,C=Object.entries(s);_<C.length;_++)y()}}return{instruments:n,patterns:r}}function jn(){return(jn=Object(mn.a)(pn.a.mark((function t(e){var n;return pn.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=new Promise((function(t,n){return t(bn((new hn.XMLParser).parse(e)))})),t.abrupt("return",n);case 2:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var gn={parseHydrogenPromise:function(t){return jn.apply(this,arguments)}},On=gn;function wn(t){return Object(b.jsx)("div",{className:"App",children:Object(b.jsxs)("div",{children:[Object(b.jsx)(V.a,{color:"secondary"}),Object(b.jsx)(x.a,{children:" Loading song... "})]})})}var Sn=function(t){Object(m.a)(n,t);var e=Object(d.a)(n);function n(){var t;Object(c.a)(this,n);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(t=e.call.apply(e,[this].concat(i))).state={songData:null},t}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var t=this;ct.LoadExample().then((function(e){t.setState({songData:e})})).catch((function(e){t.setState({error:"Failed to load example data. This likely represents a bug - please raise an issue in github!"})}))}},{key:"render",value:function(){return this.state.error?Object(b.jsx)(s.a,{to:"/",state:{error:this.state.error}}):this.state.songData?Object(b.jsx)(ln,{songData:this.state.songData},this.state.songData):Object(b.jsx)(wn,{})}}]),n}(i.a.Component);function kn(t){return null===t||void 0===t?null:t.includes(".")?t.split(".").slice(0,-1).join("."):t}var xn=function(t){Object(m.a)(n,t);var e=Object(d.a)(n);function n(){var t;Object(c.a)(this,n);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(t=e.call.apply(e,[this].concat(i))).state={songData:null},t}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var t=this,e=function(e){t.setState({songData:e})},n=function(e){t.setState({error:"Failed to load "+t.props.filename+". If you're sure this is a Hydrogen file, please consider raising an issue in github!"})};this.props.filename&&(this.props.filename.includes("h2song")?On.parseHydrogenPromise(this.props.content).then((function(e){return ct.LoadJSON(e,kn(t.props.filename),t.props.filename,!0)})).then(e).catch(n):Promise.resolve(this.props.content).then((function(t){return"string"===typeof t?JSON.parse(t):t})).then((function(e){return ct.LoadJSON(e,e.songName?e.songName:kn(t.props.filename),t.props.filename,!1)})).then(e).catch(n))}},{key:"render",value:function(){return this.props.filename?this.state.error?Object(b.jsx)(s.a,{to:"/",state:{error:this.state.error}}):this.state.songData?Object(b.jsx)(ln,{songData:this.state.songData},this.state.songData):Object(b.jsx)(wn,{}):Object(b.jsx)(s.a,{to:"/"})}}]),n}(i.a.Component),yn=function(t){Object(m.a)(n,t);var e=Object(d.a)(n);function n(){var t;Object(c.a)(this,n);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(t=e.call.apply(e,[this].concat(i))).state={songData:null},t}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var t=this;N.c(this.props.songID).then((function(t){return ct.LoadJSON(t,t.songName,t.loadedFile,!1)})).then((function(e){t.setState({songData:e})})).catch((function(e){t.setState({error:"Failed to load song "+t.props.songID+" from database. This could represent a corrupted entry/a bug in our software. Please consider raising an issue in github!"})}))}},{key:"render",value:function(){return this.state.error?Object(b.jsx)(s.a,{to:"/",state:{error:this.state.error}}):this.state.songData?Object(b.jsx)(ln,{songData:this.state.songData},this.state.songData):Object(b.jsx)(wn,{})}}]),n}(i.a.Component),_n=function(t){Object(m.a)(n,t);var e=Object(d.a)(n);function n(){var t;Object(c.a)(this,n);for(var a=arguments.length,i=new Array(a),r=0;r<a;r++)i[r]=arguments[r];return(t=e.call.apply(e,[this].concat(i))).state={songData:null},t}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var t=this,e=function(e){t.setState({error:"Failed to load recently viewed song "+t.props.name+". "})},n=N.d().filter((function(e){return e.id===t.props.songID}));n.length<1&&e(),Promise.resolve(n[0]).then((function(e){if(un()(e.content)!==t.props.songID)throw new Error("Hash did not match");return Object(N.a)(e.content)})).then((function(t){return ct.LoadJSON(t,t.songName,t.songName,!1)})).then((function(e){t.setState({songData:e})})).catch(e)}},{key:"render",value:function(){return this.state.error?Object(b.jsx)(s.a,{to:"/",state:{error:this.state.error}}):this.state.songData?Object(b.jsx)(ln,{songData:this.state.songData},this.state.songData):Object(b.jsx)(wn,{})}}]),n}(i.a.Component),Cn=function(t){var e=Object(s.f)(),n=Object(s.g)(),a=e.state||{};return Object(b.jsx)(F,{navigate:n,location:e,error:a.error})},Pn=function(t){var e=Object(s.f)();return Object(b.jsx)(Sn,{location:e})},Dn=function(t){var e=Object(s.h)().songID,n=Object(s.f)();return Object(b.jsx)(yn,{location:n,songID:e})},Tn=function(t){var e=Object(s.f)();return Object(b.jsx)(xn,{location:e,filename:e.state.filename,content:e.state.content})},Hn=function(t){var e=Object(s.h)().songID,n=Object(s.f)(),a=n.state||{};return Object(b.jsx)(_n,{location:n,songID:e,name:a.songName})};function Mn(t){var e=Object(G.a)("(prefers-color-scheme: dark)"),n=Object(L.a)(i.a.useMemo((function(){return Object(z.a)({palette:{type:e?"dark":"light",primary:{main:"#d7ccc8"},secondary:{main:"#00acc1"}}})}),[e]));return Object(b.jsx)(l.a,{basename:"/tabit",children:Object(b.jsxs)(K.a,{theme:n,children:[Object(b.jsx)(B.a,{}),Object(b.jsxs)(s.d,{children:[Object(b.jsx)(s.b,{exact:!0,path:"/",element:Object(b.jsx)(Cn,{})}),Object(b.jsx)(s.b,{exact:!0,path:"/example",element:Object(b.jsx)(Pn,{})}),Object(b.jsx)(s.b,{path:"/song/:songID",element:Object(b.jsx)(Dn,{})}),Object(b.jsx)(s.b,{path:"/import",element:Object(b.jsx)(Tn,{})}),Object(b.jsx)(s.b,{path:"/recent/:songID",element:Object(b.jsx)(Hn,{})})]})]})})}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(Object(b.jsx)(i.a.StrictMode,{children:Object(b.jsx)(Mn,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))},53:function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return c})),n.d(e,"c",(function(){return d})),n.d(e,"e",(function(){return m})),n.d(e,"b",(function(){return f})),n.d(e,"d",(function(){return p})),n.d(e,"f",(function(){return h}));var a=n(137),i=n.n(a),r=n(177),o=n.n(r),s=n(238),l=function(t){var e=JSON.stringify(t);return{state:o.a.deflateSync(e).toString("base64")}},c=function(e){var n=new t(e.state,"base64"),a=o.a.inflateSync(n);return JSON.parse(a)},u="https://api.jsonbin.io/b",m=function(t,e){var n=(e||t.songName).slice(0,64),a=l(t),i={method:"POST",headers:{"Content-Type":"application/json","secret-key":"$2b$10$Z2eAUT2PfRKn5RB55/Y30ujW8aUB1CCgRuUua3Jo9JX2WTetZRfIG","collection-id":"60218fa606934b65f53046ad",private:!1,name:n},body:JSON.stringify(a)};return fetch(u,i).then((function(t){if(t.ok)return t.json();throw new Error("Failed to upload song")})).then((function(t){return t.id}))},d=function(t){return fetch(u+"/"+t,{headers:{"Content-Type":"application/json"}}).then((function(t){if(t.ok)return t.json();throw new Error("Failed to upload song")})).then((function(t){return c(t)}))},p=function(){if(!function(t){var e;try{e=window[t];var n="__storage_test__";return e.setItem(n,n),e.removeItem(n),!0}catch(a){return a instanceof DOMException&&(22===a.code||1014===a.code||"QuotaExceededError"===a.name||"NS_ERROR_DOM_QUOTA_REACHED"===a.name)&&e&&0!==e.length}}("localStorage"))return[];var t=localStorage.getItem("tabit-history");return t?JSON.parse(t).sort((function(t,e){return e.date-t.date})):[]},h=function(t){var e=l(t),n=i()(e),a=p(),r=a.filter((function(e){return e.id===n&&e.name===t.songName}));if(0!==r.length)r[0].date=Date.now();else{var o={name:t.songName,id:n,date:Date.now(),content:e};a.push(o)}var s=a.sort((function(t,e){return e.date-t.date})).slice(0,30);localStorage.setItem("tabit-history",JSON.stringify(s))},f=function(t){var e=t.songName+".tabit",n=JSON.stringify(t,null,4),a=new Blob([n],{type:"application/json"});Object(s.saveAs)(a,e)}}).call(this,n(82).Buffer)},54:function(t){t.exports=JSON.parse('{"BFS drumming":["forward7.wav","djembe tone fat.wav","small tom hit 1.wav","djembe slap 1.wav","djembe ghost 1.wav","bass hit 1.wav","bass click.wav","small tom click.wav","tom click.wav","forward3.wav","back6.wav","back1.wav","tom hit.wav","djembe bass 1.wav"],"DeathMetal":["16270_ltibbits_HH_A_Custom_foot3_release.wav","16280_ltibbits_ride_A_Ping_20_bow2.wav","16288_ltibbits_kick_low_vol.wav","tom04.wav","16310_ltibbits_tom_12_high_vol.wav","16269_ltibbits_HH_A_Custom_foot2.wav","16268_ltibbits_HH_A_Custom_foot1.wav","16259_ltibbits_crash_HHXplosion_18_low_vol.wav","kick.wav","16264_ltibbits_crash_Z_custom_projection_19_low_vol.wav","16286_ltibbits_splash_zxt_flash_10_low_vol.wav","blast-snare.wav","16279_ltibbits_ride_A_Ping_20_bow1.wav","16248_ltibbits_crash_A_custom_18_high_vol.wav","16266_ltibbits_HH_A_Custom_closed_hard.wav","16285_ltibbits_splash_zxt_flash_10_high_vol.wav","snare-custom.wav","16277_ltibbits_ride_A_Ping_20_bell_2.wav","16290_ltibbits_kick2_high_vol.wav","crash.wav","16292_ltibbits_rim1_snare.wav","16289_ltibbits_kick_med_vol.wav","16282_ltibbits_splash_A_custom_10_high_vol.wav","16240_ltibbits_china_A_China_High_16_low_vol.wav","16318_ltibbits_tom_16_high_vol.wav","tom02.wav","16278_ltibbits_ride_A_Ping_20_bell.wav","16267_ltibbits_HH_A_Custom_closed_soft.wav","16298_ltibbits_snare_1_high_vol.wav","16284_ltibbits_splash_A_custom_10_med_vol.wav","kick-treble.wav","16287_ltibbits_kick_high_vol.wav","16249_ltibbits_crash_A_custom_18_low_vol.wav","16319_ltibbits_tom_16_low_vol.wav","16291_ltibbits_kick2_low_vol.wav","16239_ltibbits_china_A_China_High_16_high_vol.wav","16283_ltibbits_splash_A_custom_10_low_vol.wav","16253_ltibbits_crash_A_medium_17_high_vol.wav","16274_ltibbits_HH_A_Custom_half_open_soft.wav","16244_ltibbits_china_oriental_trash_18_low_vol.wav","16258_ltibbits_crash_HHXplosion_18_high_vol.wav","16315_ltibbits_tom_13_low_vol.wav","16299_ltibbits_snare_1_low_vol.wav","16263_ltibbits_crash_Z_custom_projection_19_high_vol.wav","tom03.wav","Sdr158.wav","16273_ltibbits_HH_A_Custom_half_open_hard.wav","16297_ltibbits_sticks_low_pitch.wav","tom01.wav","16243_ltibbits_china_oriental_trash_18_high_vol.wav","16314_ltibbits_tom_13_high_vol.wav","16311_ltibbits_tom_12_low_vol.wav"],"GMRockKit":["HatPedal-Hardest.wav","Tom2-Hardest.wav","Splash-Hardest.wav","HatClosed-Hardest.wav","Snare-Hard.wav","Snare-Med.wav","Splash-Soft.wav","24Ride-2.wav","Tom2-Softest.wav","Bell-Softest.wav","HatSemiOpen-Softest.wav","SnareRimshot-Hard.wav","Splash-Hard.wav","24Ride-3.wav","Splash-Med.wav","Kick-Softest.wav","Tom1-Hardest.wav","Crash-Hardest.wav","Kick-Hardest.wav","Crash-Soft.wav","SideStick-Soft.wav","Kick-Med.wav","TomFloor-Soft.wav","HatClosed-Hard.wav","Snare-Hardest.wav","SideStick-Hardest.wav","HandClap.wav","Crash-Med.wav","Ride-Med.wav","Bell-Soft.wav","SideStick-Med.wav","TomFloor-Softest.wav","TomFloor-Hard.wav","TomFloor-Hardest.wav","HatPedal-Soft.wav","Crash-Softest.wav","Ride-Hardest.wav","Tom2-Soft.wav","HatOpen-Med.wav","Cowbell-Hard.wav","Cowbell-Med.wav","Ride-Hard.wav","24Ride-4.wav","Snare-Softest.wav","HatOpen-Hardest.wav","Tom2-Hard.wav","Snare-Soft.wav","HatOpen-Softest.wav","HatSemiOpen-Soft.wav","HatOpen-Soft.wav","Bell-Med.wav","SnareRimshot-Soft.wav","SideStick-Hard.wav","HatPedal-Softest.wav","Tom1-Med.wav","Tom1-Hard.wav","Tom2-Med.wav","HatSemiOpen-Hardest.wav","SnareRimshot-Softest.wav","24Ride-1.wav","Cowbell-Hardest.wav","Cowbell-Soft.wav","Bell-Hardest.wav","Crash-Hard.wav","Kick-Hard.wav","HatPedal-Med.wav","TomFloor-Med.wav","HatPedal-Hard.wav","SnareRimshot-Hardest.wav","24Ride-5.wav","Bell-Hard.wav","Ride-Soft.wav","Ride-Softest.wav","HatClosed-Softest.wav","Cowbell-Softest.wav","SideStick-Softest.wav","HatOpen-Hard.wav","SnareRimshot-Med.wav","Tom1-Softest.wav","HatClosed-Soft.wav","HatSemiOpen-Hard.wav","HatClosed-Med.wav","Kick-Soft.wav","Splash-Softest.wav","Tom1-Soft.wav","HatSemiOpen-Med.wav"],"Millo_MultiLayered3":["hh_03.wav","t2_01.wav","rc_01.wav","rc_03.wav","sd_04.wav","cc_01.wav","sd_08.wav","sr_02.wav","ft_03.wav","ho_02.wav","ho_03.wav","rs_01.wav","ho_01.wav","hh_01.wav","t1_01.wav","t1_02.wav","sd_01.wav","rc_02.wav","sd_06.wav","mc_cb.wav","hh_02.wav","t2_02.wav","sd_02.wav","sd_03.wav","cc_02.wav","rs_02.wav","hh_04.wav","t1_03.wav","bd_01.wav","t2_03.wav","sd_05.wav","bd_03.wav","bd_04.wav","hh_p.wav","ft_01.wav","sr_01.wav","ft_02.wav","bd_02.wav","rs_03.wav","cc_03.wav"],"TR808EmulationKit":["808_Tom_Mid.wav","808_Tom_Hi.wav","808_Kick_Short.wav","808_Clap.wav","808_Snare_2.wav","808_Cymbal.wav","808_Tom_Low.wav","808_Hat_Pedal.wav","808_Hat_Closed.wav","808_Conga.wav","808_Cowbell.wav","808_Kick_Long.wav","808_Clave.wav","808_Snare_1.wav","808_Hat_Open.wav","808_Shaker.wav"],"The Black Pearl 1.0":["SabianHatOpen-Softest.wav","SabianCrash-Hard.wav","SabianCrash-Med.wav","SabianCrash-Softest.wav","PearlTom2-Hard.wav","PaisteBell-Softest.wav","ZildjianSplash-Hard.wav","SabianHatSemiOpen-Hard.wav","PaisteRide-Hard.wav","PearlTom1-Hard.wav","SabianHatOpen-Hard.wav","SabianHatPedal-Hardest.wav","SabianCrashFlink-Hard.wav","SabianHatSwish-Hardest.wav","PearlSideStick-Softest.wav","PearlSideStick-Hardest.wav","PearlSnare-Hardest.wav","PaisteRide-Med.wav","PearlKick-Hardest.wav","PaisteBell-Soft.wav","SabianHatSemiOpen-Med.wav","PearlSnare-Soft.wav","ZildjianSplashChoke-Med.wav","ZildjianSplashChoke-Softest.wav","PearlTom2-Hardest.wav","SabianCrashFlink-Softest.wav","PearlSnareRimshot-Softest.wav","PearlKick-Softest.wav","PearlKick-Med.wav","PearlTomFloor-Hard.wav","HandClap.wav","PaisteBell-Hard.wav","ZildjianSplashChoke-Hard.wav","PaisteRide-Soft.wav","SabianHatSemiOpen-Hardest.wav","SabianHatPedal-Med.wav","SabianHatChoke-Hardest.wav","ZildjianSplash-Soft.wav","PearlSnare-Med.wav","SabianHatPedal-Hard.wav","PearlTom2-Soft.wav","PaisteRide-Softest.wav","ZildjianSplash-Med.wav","PearlSnareRimshot-Hardest.wav","SabianHatClosed-Med.wav","SabianHatChoke-Med.wav","SabianCrash-Hardest.wav","PearlSnare-Hard.wav","PaisteRideFlink-Softest.wav","SabianHatSemiOpen-Soft.wav","Cowbell-Hard.wav","Cowbell-Med.wav","PearlSideStick-Hard.wav","PearlSideStick-Soft.wav","SabianHatClosed-Soft.wav","SabianHatChoke-Softest.wav","ZildjianSplash-Softest.wav","SabianHatOpen-Med.wav","PaisteRideFlink-Hard.wav","PaisteRide-Hardest.wav","PearlTom1-Med.wav","ZildjianSplash-Hardest.wav","SabianHatOpen-Soft.wav","PearlSideStick-Med.wav","SabianHatSwish-Hard.wav","PearlTomFloor-Softest.wav","PearlTom1-Softest.wav","PaisteRideFlink-Hardest.wav","SabianCrashFlink-Soft.wav","SabianHatPedal-Soft.wav","PearlKick-Hard.wav","SabianHatClosed-Hard.wav","SabianCrashFlink-Med.wav","PaisteRideFlink-Med.wav","PearlSnareRimshot-Hard.wav","PearlKick-Soft.wav","PaisteRideFlink-Soft.wav","Cowbell-Hardest.wav","PaisteBell-Hardest.wav","SabianCrash-Soft.wav","Cowbell-Soft.wav","PearlTomFloor-Med.wav","SabianHatSwish-Soft.wav","SabianCrashFlink-Hardest.wav","SabianHatChoke-Hard.wav","SabianHatSwish-Softest.wav","PearlTom1-Soft.wav","ZildjianSplashChoke-Hardest.wav","PearlTomFloor-Soft.wav","SabianHatOpen-Hardest.wav","PearlTomFloor-Hardest.wav","SabianHatClosed-Hardest.wav","SabianHatClosed-Softest.wav","PearlTom2-Med.wav","Cowbell-Softest.wav","SabianHatSemiOpen-Softest.wav","PearlSnare-Softest.wav","PearlTom1-Hardest.wav","SabianHatSwish-Med.wav","SabianHatPedal-Softest.wav","PaisteBell-Med.wav","SabianHatChoke-Soft.wav","PearlSnareRimshot-Soft.wav","ZildjianSplashChoke-Soft.wav","PearlSnareRimshot-Med.wav","PearlTom2-Softest.wav"],"circAfrique v4":["Djembe5 Slap.wav","Sangban1 Bell Hit.wav","Djembe4 Slap.wav","Dununba1 Bell Mute.wav","Djembe1 Tone.wav","Djembe3 Bass.wav","Sangban1 Bell Mute.wav","Dununba1 Head Hit.wav","Djembe5 Bass.wav","Djembe2 Tone.wav","Kenkeni1 Head Mute.wav","Kenkeni1 Head Hit.wav","Dununba1 Head Mute.wav","Dununba1 Bell.wav","Djembe2 Bass.wav","Kenkeni1 Bell Mute.wav","Djembe5 Tone.wav","Kenkeni1 Bell Hit.wav","Sangban1 Head Hit.wav","Djembe3 Slap.wav","Djembe2 Slap.wav","Djembe4 Tone.wav","Djembe1 Slap.wav","Sangban1 Head Mute.wav","Djembe1 Bass.wav","Djembe4 Bass.wav","Djembe3 Tone.wav"]}')},81:function(t,e,n){"use strict";var a=n(15),i=n(17),r=n(2),o=n(1),s=n(138);var l=function(){function t(e,n){if(Object(r.a)(this,t),0===e.length)throw new Error("patternArray must not be zero length");this.rep=e,this.resolution=n}return Object(o.a)(t,[{key:"length",value:function(){return this.rep.length*this.resolution}},{key:"empty",value:function(){return 0===this.rep.reduce((function(t,e){return t+e}))}},{key:"_sumOverlapsOfArrays",value:function(t,e){for(var n=0,a=0;a<t.length;++a)t[a]&&e[a]&&n++;return n}},{key:"queryPoint",value:function(t){return t%this.resolution===0&&this.rep[t/this.resolution]}},{key:"setPoint",value:function(t,e){if(t%this.resolution!==0)throw new Error("attempting to set point "+t.toString()+" but track has resolution "+this.resolution.toString());this.rep[t/this.resolution]=e}},{key:"countOverlaps",value:function(e){if(this.resolution===e.resolution)return this._sumOverlapsOfArrays(this.rep,e.rep);var n=t.optimalResolution(this.resolution,e.resolution),a=this.formatResolution(n),i=e.formatResolution(n);return this._sumOverlapsOfArrays(a.rep,i.rep)}},{key:"aggregate",value:function(e){if(this.resolution===e.resolution){for(var n=Math.max(this.rep.length,e.rep.length),a=new Array(n).fill(0),i=0;i<a.length;++i)a[i]=(i<this.rep.length?this.rep[i]:0)||(i<e.rep.length?e.rep[i]:0);return new t(a,this.resolution)}var r=t.optimalResolution(this.resolution,e.resolution),o=this.formatResolution(r),s=e.formatResolution(r);return o.aggregate(s)}},{key:"compatible",value:function(t){var e=this.toPoints();if(this.length()%t!==0)return!1;var n,a=Object(i.a)(e);try{for(a.s();!(n=a.n()).done;){if(n.value%t!==0)return!1}}catch(r){a.e(r)}finally{a.f()}return!0}},{key:"format",value:function(e){var n=this.resolution*this.rep.length,a=this.toPoints(),i=t.representPoints(a,e,n);return i?new t(i,e):null}},{key:"toPoints",value:function(){var t,e=[],n=Object(i.a)(Array(this.rep.length).keys());try{for(n.s();!(t=n.n()).done;){var a=t.value;this.rep[a]&&e.push(this.resolution*a)}}catch(r){n.e(r)}finally{n.f()}return e}},{key:"clone",value:function(){return new t(Object(a.a)(this.rep),this.resolution)}}],[{key:"optimalResolution",value:function(t,e){return function(t,e){if(t<1||e<1)throw new Error("x<1 || y<1");for(;Math.max(t,e)%Math.min(t,e)!==0;)t>e?t%=e:e%=t;return Math.min(t,e)}(t,e)}},{key:"representPoints",value:function(t,e,n){if(n<=0)throw new Error("size must be greater than zero");if(n<e||n%e!==0)throw new Error("resolution must be less than size and divide it evenly");var a,r=new Array(n/e).fill(0),o=Object(i.a)(t);try{for(o.s();!(a=o.n()).done;){var s=a.value;if(s%e!==0)throw new Error("Failed to represent point "+s.toString()+" at resolution "+e.toString());if(s>=n)throw new Error("Failed to represent point "+s.toString()+" for invalid specified size "+n.toString());r[s/e]=1}}catch(l){o.e(l)}finally{o.f()}return r}},{key:"fromPositions",value:function(e,n){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=null!==a&&void 0!==a?a:Object(s.a)(e,n);return new t(t.representPoints(e,i,n),i)}},{key:"combine",value:function(e,n,i,r){if(!e&&!n)throw new Error("Can't combine two null tracks");if(!i||!r)throw new Error("Need size and resolution parameters to be set");var o=e?e.toPoints():[],s=e?e.length():i-n.length(),l=n?n.toPoints().map((function(t){return t+s})):[],c=[].concat(Object(a.a)(o),Object(a.a)(l));return t.fromPositions(c,i,r)}}]),t}();e.a=l},94:function(t,e,n){"use strict";var a=n(0),i=n.n(a),r=n(275),o=n(430),s=n(270),l=n(144),c=n(55),u=n(251),m=n.n(u),d=n(252),p=n.n(d),h=n(105),f=n(69),v=n(259),b=n.n(v),j=n(258),g=n.n(j),O=n(257),w=n.n(O),S=n(253),k=n.n(S),x=n(254),y=n.n(x),_=n(255),C=n.n(_),P=n(256),D=n.n(P),T=n(5),H=Object(s.a)((function(t){return{root:{zIndex:t.zIndex.drawer+1,backgroundColor:t.palette.primary.main}}}));function M(t){var e=H(t);return t.placeholder?Object(T.jsx)(r.a,{variant:"dense"}):Object(T.jsx)(o.a,{position:"fixed",className:e.root,children:Object(T.jsxs)(r.a,{variant:"dense",children:[t.patternsToggle&&Object(T.jsx)(c.a,{color:"inherit","aria-label":"open pattern list",edge:"start",onClick:t.patternsToggle,children:Object(T.jsx)(m.a,{})}),Object(T.jsx)(c.a,{color:"inherit","aria-label":"home",edge:"start",component:h.b,to:"/",children:Object(T.jsx)(p.a,{})}),Object(T.jsx)("div",{style:{flexGrow:1,overflow:"hidden"},children:Object(T.jsx)(l.a,{onClick:t.onTitleClick,color:"inherit",style:{textOverflow:"ellipsis"},children:Object(T.jsx)(f.a,{variant:"h6",color:"inherit",noWrap:!0,children:t.title})})}),t.onLockUnlock&&Object(T.jsx)(c.a,{color:"inherit","aria-label":t.locked?"unlock":"lock",edge:"start",onClick:t.onLockUnlock,children:t.locked?Object(T.jsx)(k.a,{}):Object(T.jsx)(y.a,{})}),t.onToggleCompact&&Object(T.jsx)(c.a,{color:"inherit","aria-label":t.compact?"toggle-to-dense-view":"toggle-to-compact-view",edge:"start",onClick:t.onToggleCompact,children:t.compact?Object(T.jsx)(C.a,{}):Object(T.jsx)(D.a,{})}),t.onShare&&Object(T.jsx)(c.a,{color:"inherit","aria-label":"share",edge:"start",onClick:t.onShare,children:Object(T.jsx)(w.a,{})}),t.onDownload&&Object(T.jsx)(c.a,{color:"inherit","aria-label":"download",edge:"start",onClick:t.onDownload,children:Object(T.jsx)(g.a,{})}),t.settingsToggle&&Object(T.jsx)(c.a,{color:"inherit","aria-label":"open settings",edge:"end",onClick:t.settingsToggle,children:Object(T.jsx)(b.a,{})})]})})}e.a=i.a.memo(M)}},[[421,1,2]]]);
//# sourceMappingURL=main.85e940c3.chunk.js.map