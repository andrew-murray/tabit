(this.webpackJsonptabit=this.webpackJsonptabit||[]).push([[0],{108:function(t,e,n){"use strict";var i=n(16),r=n(1),s=n(2),o=n(131);function a(t,e){if(t<1||e<1)throw new Error("x<1 || y<1");for(;Math.max(t,e)%Math.min(t,e)!==0;)t>e?t%=e:e%=t;return Math.min(t,e)}var u=function(){function t(e,n){if(Object(r.a)(this,t),0===e.length)throw new Error("patternArray must not be zero length");this.rep=e,this.resolution=n}return Object(s.a)(t,[{key:"length",value:function(){return this.rep.length*this.resolution}},{key:"empty",value:function(){return 0===this.rep.reduce((function(t,e){return t+e}))}},{key:"_sumOverlapsOfArrays",value:function(t,e){for(var n=0,i=0;i<t.length;++i)t[i]&&e[i]&&n++;return n}},{key:"countOverlaps",value:function(t){if(this.resolution===t.resolution)return this._sumOverlapsOfArrays(this.rep,t.rep);var e=a(this.resolution,t.resolution),n=this.formatResolution(e),i=t.formatResolution(e);return this._sumOverlapsOfArrays(n.rep,i.rep)}},{key:"aggregate",value:function(e){if(this.resolution===e.resolution){for(var n=Math.max(this.rep.length,e.rep.length),i=new Array(n).fill(0),r=0;r<i.length;++r)i[r]=(r<this.rep.length?this.rep[r]:0)||(r<e.rep.length?e.rep[r]:0);return new t(i,this.resolution)}var s=a(this.resolution,e.resolution),o=this.formatResolution(s),u=e.formatResolution(s);return o.aggregate(u)}},{key:"format",value:function(e){var n=this.resolution*this.rep.length,i=this.toPoints(),r=t.representPoints(i,e,n);return r?new t(r,e):null}},{key:"toPoints",value:function(){var t,e=[],n=Object(i.a)(Array(this.rep.length).keys());try{for(n.s();!(t=n.n()).done;){var r=t.value;this.rep[r]&&e.push(this.resolution*r)}}catch(s){n.e(s)}finally{n.f()}return e}}],[{key:"representPoints",value:function(t,e,n){if(n<=0)throw new Error("size must be greater than zero");if(n<e||n%e!==0)throw new Error("resolution must be less than size and divide it evenly");var r,s=new Array(n/e).fill(0),o=Object(i.a)(t);try{for(o.s();!(r=o.n()).done;){var a=r.value;if(a%e!==0)throw new Error("Failed to represent point "+a.toString()+" at resolution "+e.toString());if(a>=n)throw new Error("Failed to represent point "+a.toString()+" for invalid specified size "+n.toString());s[a/e]=1}}catch(u){o.e(u)}finally{o.f()}return s}},{key:"fromPositions",value:function(e,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=null!==i&&void 0!==i?i:Object(o.a)(e,n);return new t(t.representPoints(e,r,n),r)}}]),t}();e.a=u},131:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var i=n(16);function r(t,e){for(var n=t.concat([e]),r=0,s=[48,24,16,12,8,6,4,3,2,1];r<s.length;r++){var o,a=s[r],u=!0,l=Object(i.a)(n);try{for(l.s();!(o=l.n()).done;){if(o.value%a!==0){u=!1;break}}}catch(c){l.e(c)}finally{l.f()}if(u)return a}throw new Error("Failed to predict base")}},136:function(t,e,n){"use strict";function i(){var t=navigator.userAgent||navigator.vendor||window.opera;return[/Android/i,/webOS/i,/iPhone/i,/iPad/i,/iPod/i,/BlackBerry/i,/Windows Phone/i].some((function(e){return t.match(e)}))}n.d(e,"a",(function(){return i}))},138:function(t,e,n){"use strict";var i=n(19),r=n(1),s=n(2),o=n(16),a=n(15),u=function(){function t(){Object(r.a)(this,t)}return Object(s.a)(t,null,[{key:"createWebContext",value:function(){return new(window.AudioContext||window.webkitAudioContext||Object)}},{key:"determineMinResolution",value:function(t,e){for(var n=48,i=function(){var e=Object(a.a)(s[r],2),i=e[0],o=e[1];t.filter((function(t){return t.id.toString()===i})).length>0&&!o.empty()&&(n=Math.min(n,o.resolution))},r=0,s=Object.entries(e);r<s.length;r++)i();return n}},{key:"determineTrackLength",value:function(t,e){for(var n=48,i=function(){var e=Object(a.a)(s[r],2),i=e[0],o=e[1];t.filter((function(t){return t.id.toString()===i})).length>0&&!o.empty()&&(n=Math.max(n,o.length()))},r=0,s=Object.entries(e);r<s.length;r++)i();return n}},{key:"peakAmplitude",value:function(t){for(var e=0,n=0;n<t.numberOfChannels;n++)for(var i=t.getChannelData(n),r=0;r<i.length;++r)e=Math.max(Math.abs(i[r]),e);return e}},{key:"normalizeAudioBuffer",value:function(e){var n=t.peakAmplitude(e);if(n>1)for(var i=0;i<e.numberOfChannels;i++)for(var r=e.getChannelData(i),s=0;s<r.length;++s)r[s]=r[s]/n;return e}},{key:"createMasterTrack",value:function(e,n,i,r,s){for(var u=t.determineTrackLength(i,n),l=44100*(u*(60/s*1e3/48))/1e3,c=Math.floor(l),m=Math.floor(c/u),p=e.createBuffer(2,c,44100),h=0;h<p.numberOfChannels;h++)for(var f=p.getChannelData(h),d=function(){var t=Object(a.a)(j[b],2),e=t[0],n=t[1],s=i.filter((function(t){return t.id.toString()===e}));if(s.length>0&&s[0].id in r&&!n.empty()){var u,l=r[s[0].id],c=2===l.numberOfChannels?l.getChannelData(h):l.getChannelData(0),p=n.toPoints(),d=Object(o.a)(p);try{for(d.s();!(u=d.n()).done;)for(var v=u.value*m,g=0;g<l.length;++g)f[v+g]=f[v+g]+c[g]}catch(O){d.e(O)}finally{d.f()}}},b=0,j=Object.entries(n);b<j.length;b++)d();return t.normalizeAudioBuffer(p)}},{key:"createAudioSource",value:function(t,e,n){var i=t.createBufferSource();return i.buffer=e,i.loop=!0,null!==n&&(i.playbackRate.value=n/100),i.connect(t.destination),i}},{key:"createOneShotAudioSource",value:function(t,e,n){var i=t.createBufferSource();return i.buffer=e,i.loop=!1,null!==n&&(i.playbackRate.value=n/100),i.connect(t.destination),i}}]),t}(),l=n(25),c=["circAfrique v4","DeathMetal","The Black Pearl 1.0","GMRockKit","TR808EmulationKit"],m=function(t){return Math.pow(t,2.5)},p=function(t,e){var n=e.samplesReady();return function(i,r){if(n||(n=e.samplesReady())){for(var s=r%(t.length/t.resolution),o=0,u=Object.entries(t.tracks);o<u.length;o++){var c=Object(a.a)(u[o],2),m=c[0];if(c[1].rep[s]){var p=e.samples[m];void 0!==p&&p.player.start(i)}}e.onPatternTimeChange&&l.a.schedule((function(){var n=s*t.resolution%t.length;e.onPatternTimeChange(n)}),i)}}},h=function(){function t(e,n,i,s){Object(r.a)(this,t),this.samples={},this.sequences={},this.currentPattern=null,this.gain=new l.b,this.gain.toDestination(),this.onPatternTimeChange=s,l.f.bpm.value=i,l.f.loop=!0,this.sampleCount=0,this.expectedSampleCount=0,this.patternDetails={};var m,p=[],h=Object(o.a)(n);try{for(h.s();!(m=h.n()).done;){var f=m.value;this.patternDetails[f.name]={resolution:u.determineMinResolution(e,f.instrumentTracks),length:u.determineTrackLength(e,f.instrumentTracks),name:f.name,tracks:f.instrumentTracks},this.populateSamples(e,f.instrumentTracks,p)}}catch(k){h.e(k)}finally{h.f()}if(this.sequences=this.createSequences(e,n),this.currentPatternName=null,p.length>0){var d,b="Failed to load samples for instruments:\n",j=function(t){var e,n=[],i=Object(o.a)(t);try{for(i.s();!(e=i.n()).done;){var r,s=Object(a.a)(e.value,2),u=s[0],l=s[1],c=!0,m=Object(o.a)(n);try{for(m.s();!(r=m.n()).done;){var p=Object(a.a)(r.value,2),h=p[0],f=p[1];if(u===h&&l===f){c=!1;break}}}catch(k){m.e(k)}finally{m.f()}c&&n.push([u,l])}}catch(k){i.e(k)}finally{i.f()}return n.sort(),n}(p),v=Object(o.a)(j);try{for(v.s();!(d=v.n()).done;){var g=Object(a.a)(d.value,2),O=g[0];b+="    -"+g[1],""!==O&&(b+=" ("+O+")"),b+="\n"}}catch(k){v.e(k)}finally{v.f()}b+="This is typically because they belong to commercial sound libraries. tabit's supported drumkits are\n"+c.join(", ")+".",alert(b)}}return Object(s.a)(t,[{key:"samplesReady",value:function(){return this.sampleCount===this.expectedSampleCount}},{key:"populateSamples",value:function(t,e,n){var i=this;this.sampleCount=0;for(var r=function(){var e=Object(a.a)(o[s],1)[0],r=t.filter((function(t){return t.id.toString()===e}));if(r.length>0){var u=r[0],p=m(Math.min(Math.max(0,u.volume),1));if(u.id in i.samples)return"continue";if("drumkit"in u&&"filename"in u&&c.includes(u.drumkit)){var h=u.filename.replace(".flac",".wav"),f=new l.c("/tabit/wav/"+u.drumkit+"/"+h,(function(){i.sampleCount++}));f.mute=u.muted;var d=new l.b(p,"normalRange");f.connect(d),d.connect(i.gain),i.samples[u.id]={player:f,gain:d},i.expectedSampleCount++}else if("drumkit"in u){var b=function(t,e){var n=e.toLowerCase();return n.includes("kick")?"The Black Pearl 1.0/PearlKick-Hard.wav":n.includes("stick")?"DeathMetal/16297_ltibbits_sticks_low_pitch.wav":n.includes("tom")?"TR808EmulationKit/808_Tom_Mid.wav":n.includes("clap")?"TR808EmulationKit/808_Clap.wav":n.includes("snare")?"GMRockKit/Snare-Soft.wav":n.includes("cowbell")?"GMRockKit/Cowbell-Softest.wav":null}(u.drumkit,u.name);if(null!==b){var j=new l.c("/tabit/wav/"+b,(function(){i.sampleCount++}));j.mute=u.muted;var v=new l.b(p,"normalRange");j.connect(v),v.connect(i.gain),i.samples[u.id]={player:j,gain:v},i.expectedSampleCount++}else n.push([u.drumkit,u.name])}else n.push(["",u.name])}},s=0,o=Object.entries(e);s<o.length;s++)r()}},{key:"createSequences",value:function(t,e){var n,r={},s=Object(o.a)(e);try{for(s.s();!(n=s.n()).done;){var a=n.value,c=u.determineMinResolution(t,a.instrumentTracks),m=u.determineTrackLength(t,a.instrumentTracks),h=p(this.patternDetails[a.name],this);r[a.name]=new l.d(h,Object(i.a)(Array(m/c).keys()),l.e("4n")*(c/48)),r[a.name]._part.mute=!0,r[a.name].start(0)}}catch(f){s.e(f)}finally{s.f()}return r}},{key:"setActivePattern",value:function(t){var e=this,n=null!==this.currentPatternName?this.currentPatternName:null,i=this.patternDetails[t].length,r=null!==n?this.patternDetails[n]:null,s=l.f.loopEnd-l.f.toSeconds(l.f.position),o=function(s){null!==n&&(e.sequences[n]._part.mute=!0),null!==n&&r===i||l.f.setLoopPoints(0,l.e("4n")*(i/48)),e.sequences[t]._part.mute=!1,e.currentPatternName=t};null!==n&&"started"===l.f.state&&s>0&&s<l.f.toSeconds(l.e("8n"))?l.f.scheduleOnce(o,l.e("0")):o()}},{key:"play",value:function(){l.g().then((function(){l.f.start()}))}},{key:"stop",value:function(){var t=this;"started"===l.f.state&&(l.f.stop(),this.onPatternTimeChange&&l.a.schedule((function(){t.onPatternTimeChange(null)}),l.f.now()))}},{key:"setMutedForInstrument",value:function(t,e){this.samples[t].player.mute=e}},{key:"setVolumeForInstrument",value:function(t,e){this.samples[t].gain.set({gain:m(e)})}},{key:"setTempo",value:function(t){l.f.bpm.value=t}}]),t}();e.a=h},183:function(t,e,n){"use strict";(function(t,i){var r=n(38),s=n(15),o=n(16),a=n(1),u=n(2),l=n(4),c=n(3),m=n(9),p=n(0),h=n.n(p),f=n(12),d=n(256),b=n(280),j=n(260),v=(n(344),n(455)),g=n(449),O=n(191),k=n(451),y=n(288),x=n(452),S=n(439),w=n(284),C=n(450),R=n(60),T=n(65),P=n(279),M=n.n(P),A=n(277),I=n.n(A),F=n(188),N=n.n(F),D=n(195),E=n(192),B=n(194),_=n(193),L=n(139),z=n(13),G=n(278),K=n.n(G),q=n(184),J=n(95),W=n(83),U=n(51),V=n(44),H=n(271),X=n(108),Y=n(272),$=n(138),Z=n(273),Q=n(30),tt=n(186),et=n.n(tt),nt=n(187),it=n.n(nt),rt=n(276),st=n.n(rt),ot=n(136),at=Object(O.a)({palette:{type:"dark",primary:{main:"#36d9be"},secondary:{main:"#f50057"}}}),ut=function(t){return t&&"keydown"===t.type&&("Tab"===t.key||"Shift"===t.key)},lt=function(t){return"https://cors-anywhere.herokuapp.com/"+function(t){return"https://jsonbase.com/tabit-song/"+t}(t)},ct={modal:{display:"flex",alignItems:"center",justifyContent:"center"},paper:{backgroundColor:at.palette.background.paper,border:"2px solid #000",boxShadow:at.shadows[5],padding:at.spacing(2,4,3)}},mt=function(e){Object(l.a)(p,e);var n=Object(c.a)(p);function p(t){var e;return Object(a.a)(this,p),(e=n.call(this,t)).state={instruments:null,instrumentIndex:null,instrumentMask:null,patterns:null,formatSettings:Object.assign({},q.a),patternSettings:[],loadedFile:null,selectedPattern:null,settingsOpen:!1,patternsOpen:!1,progress:null,showSharingDialog:!1,showTitleOptions:void 0===e.props.match.params.song,permanentUrl:""},e.pattern=h.a.createRef(),e}return Object(u.a)(p,[{key:"componentDidMount",value:function(){var t=this;this.props.match.params.song&&fetch(lt(this.props.match.params.song)).then((function(t){return t.json()})).then((function(e){var n=t.decodeState(e);if(et()(e)!==t.props.match.params.song)throw new Error("Hash did not match");t.handleJson(null,n)})).catch((function(e){t.setState({showTitleOptions:!0}),alert("Song "+t.props.match.params.song+" could not be found.")}))}},{key:"getExportState",value:function(){return{instruments:this.state.instruments,instrumentIndex:this.state.instrumentIndex,patterns:this.state.patterns,formatSettings:this.state.formatSettings,patternSettings:this.state.patternSettings}}},{key:"save",value:function(){var t="download.tabit";if(this.state.loadedFile){var e=this.state.loadedFile.split(".");t=1===e.length?e[0]+".tabit":e.slice(0,e.length-1).join(".")+".tabit"}var n=JSON.stringify(this.getExportState(),null,4),i=new Blob([n],{type:"application/json"});Object(Y.saveAs)(i,t)}},{key:"encodeState",value:function(t){var e=JSON.stringify(this.getExportState());return{state:it.a.deflateSync(e).toString("base64")}}},{key:"decodeState",value:function(e){var n=new t(e.state,"base64"),i=it.a.inflateSync(n);return JSON.parse(i)}},{key:"share",value:function(){var t=this,e=this.encodeState(this.getExportState()),n=et()(e),i=lt(n),r={method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)},s=window.origin+"/tabit/song/"+n;fetch(i,r).then((function(e){t.setState({permanentUrl:s,showSharingDialog:!0})})).catch((function(t){alert("Couldn't upload song at this time. Sorry for any inconvenience.")}))}},{key:"figurePatternSettings",value:function(t){return Array.from(t,(function(t){return U.a.guessPerPatternSettings(t.instrumentTracks)}))}},{key:"handleJson",value:function(t,e){var n=this;this.setState({instrumentIndex:e.instrumentIndex,instrumentMask:Object(J.b)(e.instrumentIndex,e.instruments),instruments:e.instruments,patterns:function(t){var e,n=[],i=Object(o.a)(t);try{for(i.s();!(e=i.n()).done;){for(var r=e.value,a={},u=0,l=Object.entries(r.instrumentTracks);u<l.length;u++){var c=Object(s.a)(l[u],2),m=c[0],p=c[1];a[m]=new X.a(p.rep,p.resolution)}var h=Object.assign({},r);h.instrumentTracks=a,n.push(h)}}catch(f){i.e(f)}finally{i.f()}return n}(e.patterns),formatSettings:e.formatSettings,patternSettings:e.patternSettings,loadedFile:null!==t&&void 0!==t?t:e.loadedFile,selectedPattern:0===e.patterns.length?null:0,patternsOpen:0!==e.patterns.length},(function(){n.audio=new $.a(n.state.instrumentIndex,n.state.patterns,100,(function(t){n.onPatternTimeChange(t)})),n.audio.setActivePattern(n.state.patterns[n.state.selectedPattern].name)}))}},{key:"handleFileImport",value:function(t){var e=this;t.file.name.includes("h2song")?j.a.parseHydrogenPromise(t.content).then((function(n){var i,r=Object(W.c)(n.instruments,W.a,n.patterns),s=Object(W.b)(n.instruments,n.patterns),a=Object(o.a)(s);try{for(a.s();!(i=a.n()).done;){i.value.volume=.5}}catch(u){a.e(u)}finally{a.f()}e.setState({instrumentIndex:s,instrumentMask:Object(J.b)(s,r),instruments:r,patterns:n.patterns,patternSettings:e.figurePatternSettings(n.patterns),loadedFile:t.file.name,patternsOpen:!0,selectedPattern:0===n.patterns.length?null:0},(function(){e.audio=new $.a(e.state.instrumentIndex,e.state.patterns,100,(function(t){e.onPatternTimeChange(t)})),e.audio.setActivePattern(e.state.patterns[e.state.selectedPattern].name)}))})).catch((function(e){alert("Failed to load file "+t.file.name+" with error "+e)})):Promise.resolve(t.content).then(JSON.parse).then((function(n){e.handleJson(t.file.name,n)})).catch((function(e){alert("Failed to load file "+t.file.name+" with error "+e)}))}},{key:"loadExample",value:function(){var t,e=this,n=function(t){var e,n=Object(o.a)(t.patterns);try{for(n.s();!(e=n.n()).done;){for(var i=e.value,r={},a=0,u=Object.entries(i.instrumentTracks);a<u.length;a++){var l=Object(s.a)(u[a],2),c=l[0],m=l[1];r[c]=new X.a(m.rep,m.resolution)}i.instrumentTracks=r}}catch(p){n.e(p)}finally{n.f()}return t}(H),i=Object(W.c)(n.instruments,W.a,n.patterns),r=Object(W.b)(n.instruments,n.patterns),a=Object(o.a)(r);try{for(a.s();!(t=a.n()).done;){t.value.volume=.5}}catch(u){a.e(u)}finally{a.f()}this.setState({instrumentIndex:r,instrumentMask:Object(J.b)(r,i),instruments:i,patterns:n.patterns,selectedPattern:0===n.patterns.length?null:0,loadedFile:"kuva.example",patternsOpen:!0,patternSettings:this.figurePatternSettings(n.patterns)},(function(){e.audio=new $.a(e.state.instrumentIndex,e.state.patterns,100,(function(t){e.onPatternTimeChange(t)})),e.audio.setActivePattern(e.state.patterns[e.state.selectedPattern].name)}))}},{key:"selectPattern",value:function(t){this.audio.setActivePattern(this.state.patterns[t].name),this.setState({selectedPattern:t})}},{key:"renderPattern",value:function(t,e){var n=this;return Object(m.jsxs)(h.a.Fragment,{children:[Object(m.jsx)(b.a,{instruments:this.state.instruments,tracks:t.instrumentTracks,config:e,active:this.state.progress,ref:this.pattern}),Object(m.jsx)(Z.a,{onPlay:function(){n.audio&&n.audio.play()},onStop:function(){n.audio&&n.audio.stop()},onTempoChange:function(t){n.audio&&n.audio.setTempo(t)}})]})}},{key:"onPatternTimeChange",value:function(t){this.pattern.current.onPatternTimeChange(t)}},{key:"getTrackLength",value:function(t){for(var e=48,n=0,i=Object.entries(t.instrumentTracks);n<i.length;n++){var r=Object(s.a)(i[n],2)[1];e=Math.max(e,r.length())}return e}},{key:"getResolution",value:function(t){for(var e=48,n=0,i=Object.entries(t.instrumentTracks);n<i.length;n++){var r=Object(s.a)(i[n],2)[1];e=Math.min(e,r.resolution)}return e}},{key:"renderTitlePage",value:function(){var t=null!=this.state.patterns&&0===this.state.patterns.length?Object(m.jsxs)(v.a,{severity:"error",children:[this.state.loadedFile," contained no patterns! Try another."]}):"",e=Object(m.jsxs)(h.a.Fragment,{children:[Object(m.jsx)(T.a,{variant:"contained",onClick:this.loadExample.bind(this),style:{margin:"1em"},children:"Load example"}),Object(m.jsx)(d.a,{style:{margin:"1em"},variant:"contained",onImport:this.handleFileImport.bind(this),accept:".tabit,.h2song"}),t]}),n=Object(m.jsxs)(h.a.Fragment,{children:[Object(m.jsx)("p",{children:" Loading song... "}),Object(m.jsx)(g.a,{})]});return Object(m.jsxs)(h.a.Fragment,{children:[Object(m.jsxs)("div",{children:[Object(m.jsx)("h2",{children:"tabit"}),Object(m.jsx)("p",{children:"I read .h2songs and write tab"}),this.state.showTitleOptions?e:n]}),Object(m.jsx)("div",{style:{position:"absolute",bottom:0},children:Object(m.jsxs)("p",{children:["tabit relies on publicly available sound libraries listed at ",Object(m.jsx)("a",{href:"https://github.com/andrew-murray/tabit",children:"https://github.com/andrew-murray/tabit"})]})})]})}},{key:"renderPatternDrawer",value:function(t,e){var n,i=this,r=this.props,s=function(t){ut(t)||i.setState({patternsOpen:!1})};return Object(m.jsxs)(y.a,{disableBackdropTransition:!t,disableDiscovery:t,className:r.drawer,variant:e?void 0:"persistent",open:this.state.patternsOpen,onOpen:function(t){ut(t)||i.setState({patternsOpen:!0})},onClose:s,children:[Object(m.jsx)("div",{className:r.drawerHeader,children:Object(m.jsx)(R.a,{onClick:s,children:Object(m.jsx)(I.a,{})})}),Object(m.jsx)(D.a,{}),Object(m.jsx)("div",{className:r.drawerContainer,children:Object(m.jsx)(S.a,{children:(null!==(n=this.state.patterns)&&void 0!==n?n:[]).map((function(t,e){return Object(m.jsx)(w.a,{button:!0,onClick:function(){return i.selectPattern(e)},children:Object(m.jsx)(C.a,{primary:t.name})},"drawer-pattern"+e.toString())}))})})]})}},{key:"renderSettingsDrawer",value:function(t,e,n){var i=this,r=this.props,o=function(t){ut(t)||i.setState({settingsOpen:!1})},a=this.state.patterns[this.state.selectedPattern],u={name:a.name,resolution:a.resolution,length:this.getTrackLength(a)};return Object(m.jsxs)(y.a,{disableBackdropTransition:!t,disableDiscovery:t,className:r.drawer,variant:e?void 0:"persistent",anchor:"right",open:this.state.settingsOpen,onOpen:function(t){ut(t)||i.setState({settingsOpen:!0})},onClose:o,classes:{paper:r.drawerPaper},children:[Object(m.jsx)("div",{className:r.drawerHeader,children:Object(m.jsx)(R.a,{onClick:o,children:Object(m.jsx)(N.a,{})})}),Object(m.jsx)(D.a,{}),Object(m.jsx)(q.b,{onChange:function(t){for(var e=Array.from(i.state.patternSettings),n=Object.assign({},i.state.formatSettings),r=0,o=Object.entries(t);r<o.length;r++){var a=Object(s.a)(o[r],2),u=a[0],l=a[1];u in e[i.state.selectedPattern]?e[i.state.selectedPattern][u]=l:n[u]=l}i.setState({formatSettings:n,patternSettings:e})},settings:n,pattern:u}),Object(m.jsx)(T.a,{style:{backgroundColor:"white",color:at.palette.background.default},onClick:function(t){i.save()},children:"Download"}),Object(m.jsx)(D.a,{}),Object(m.jsx)(T.a,{style:{backgroundColor:"white",color:at.palette.background.default},onClick:function(t){i.share()},children:"Share"})]})}},{key:"renderSharingDialog",value:function(){var t=this;return Object(m.jsx)(E.a,{open:this.state.showSharingDialog,onClose:function(e){t.setState({showSharingDialog:!1})},"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:Object(m.jsxs)(_.a,{children:[Object(m.jsx)(L.a,{id:"alert-dialog-description",children:"Your song is available at"}),Object(m.jsxs)(L.a,{children:[this.state.permanentUrl,Object(m.jsx)(R.a,{onClick:function(e){st()(t.state.permanentUrl)},children:Object(m.jsx)(K.a,{})})]}),Object(m.jsx)(B.a,{children:Object(m.jsx)(T.a,{onClick:function(e){t.setState({showSharingDialog:!1})},children:"Close"})})]})})}},{key:"renderMainContent",value:function(){var t=this;if(null==this.state.patterns||0===this.state.patterns.length)return this.renderTitlePage();var e=this.state.patterns[this.state.selectedPattern],n=Object.assign(Object.assign({},this.state.formatSettings),this.state.patternSettings[this.state.selectedPattern]),s=this.renderPattern(e,n),o=this.props,a=i.browser&&/iPad|iPhone|iPod/.test(navigator.userAgent),u=Object(ot.a)(),l=u?12:8;return Object(m.jsxs)(h.a.Fragment,{children:[this.renderSharingDialog(),Object(m.jsxs)("div",{style:{display:"flex",width:"95%"},children:[Object(m.jsx)(R.a,{color:"inherit","aria-label":"open pattern list",edge:"start",onClick:function(e){t.setState({patternsOpen:!0})},className:Object(f.a)(Object(r.a)({},o.hide,!this.state.patternsOpen)),children:Object(m.jsx)(N.a,{})}),Object(m.jsx)("div",{className:"content-title",style:{flexGrow:1}}),Object(m.jsx)(R.a,{color:"inherit","aria-label":"open settings",edge:"end",onClick:function(e){t.setState({settingsOpen:!0})},className:Object(f.a)(this.state.settingsOpen&&o.hide),children:Object(m.jsx)(M.a,{})})]}),s,Object(m.jsxs)(V.a,{container:!0,children:[Object(m.jsx)(V.a,{item:!0,xs:(12-l)/2}),Object(m.jsx)(V.a,{item:!0,xs:l,children:Object(m.jsx)(J.a,{instruments:this.state.instruments,instrumentIndex:this.state.instrumentIndex,instrumentMask:this.state.instrumentMask,onChange:function(e){t.setState({instruments:e,instrumentMask:Object(J.b)(t.state.instrumentIndex,e)})},onVolumeEvent:function(e){if("volume"in e){var n=t.state.instrumentIndex[e.instrument].id;t.audio.setVolumeForInstrument(n,e.volume)}else if("muted"in e){var i=t.state.instrumentIndex[e.instrument].id;t.audio.setMutedForInstrument(i,e.muted)}}})}),Object(m.jsx)(V.a,{item:!0,xs:(12-l)/2})]}),this.renderPatternDrawer(a,u),this.renderSettingsDrawer(a,u,n)]})}},{key:"render",value:function(){var t=this.renderMainContent();return Object(m.jsx)("div",{className:"App",children:Object(m.jsxs)(k.a,{theme:at,children:[Object(m.jsx)(x.a,{}),t]})})}}]),p}(h.a.Component);e.a=Object(z.a)(ct)(Object(Q.f)(mt))}).call(this,n(67).Buffer,n(68))},184:function(t,e,n){"use strict";n.d(e,"b",(function(){return x})),n.d(e,"a",(function(){return S}));var i=n(38),r=n(10),s=n(9),o=(n(0),n(283)),a=n(34),u=n(459),l=n(440),c=n(437),m=n(442),p=n(285),h=n(441),f=n(454),d=n(51),b=n(263),j=n.n(b),v=n(458),g=n(443),O=n(44),k=Object(o.a)((function(t){return{formControl:{margin:t.spacing(1),minWidth:120}}}));function y(t){var e=t.replace(/([A-Z])/g," $1");return e[0].toUpperCase()+e.slice(1)}function x(t){var e=k(t),n=Object(a.a)();function o(t){return" "===t?"space":t}function b(t){return"space"===t?" ":t}var x=function(e,n){var s=Object(r.a)(Object(r.a)({},t.settings),{},Object(i.a)({},e,n));t.onChange(s)},S=function(e){var n=Object(r.a)(Object(r.a)({},t.settings),{},Object(i.a)({},e.target.name,e.target.checked));t.onChange(n)};function w(n,i){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:b,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:o,m="form-control-"+n+"-id";return Object(s.jsxs)(c.a,{variant:"filled",className:e.formControl,id:m,children:[Object(s.jsx)(u.a,{id:"settings-option-{name}",children:n}),Object(s.jsx)(f.a,{labelId:"settings-option-"+n+"-labelID",id:"settings-option-"+n+"-id",value:a(t.settings[n]),name:n,onChange:function(t){return x(t.target.name,r(t.target.value))},children:i.map((function(t){return Object(s.jsx)(l.a,{value:a(t),children:a(t)},"settings-menu-item-"+n+"-"+t)}))})]},m)}for(var C=[],R=0,T=[2,3,4,5,6,7,8,14,16,32];R<T.length;R++){var P=48*T[R];P%t.settings.beatResolution===0&&P<=t.pattern.length&&C.push(P)}C.includes(t.pattern.length)||(C.push(t.pattern.length),C.sort());for(var M=[],A=0,I=[24,36,48,72,96];A<I.length;A++){var F=I[A];F%t.pattern.resolution===0&&t.settings.lineResolution%F===0&&M.push(F)}return Object(s.jsxs)(m.a,{className:e.root,children:[d.a.FORMAT_CONFIG_STRINGS.map((function(t){return w(t[0],t[1])})).reduce((function(t,e){return[t,e]})),d.a.FORMAT_CONFIG_BOOLS.map((function(e){return n=e,Object(s.jsx)(p.a,{control:Object(s.jsx)(h.a,{checked:t.settings[n],onChange:S,name:n}),label:y(n)},"switch-"+n);var n})).reduce((function(t,e){return[t,e]})),Object(s.jsx)("div",{style:{backgroundColor:"white",color:n.palette.background.default},children:Object(s.jsxs)("p",{children:[" ",t.pattern.name+" Options"," "]})}),w("beatResolution",M,(function(t){return t.toString()}),(function(t){return parseInt(t)})),w("lineResolution",C,(function(e){return t.settings.beatResolution*parseInt(e)}),(function(e){return(e/t.settings.beatResolution).toString()})),Object(s.jsxs)(O.a,{container:!0,children:[Object(s.jsx)(O.a,{item:!0,xs:8}),Object(s.jsx)(O.a,{item:!0,xs:4,children:Object(s.jsx)(v.a,{title:"Only options that produce lines made up of 'n' whole beats (no part-beats) are shown. If the options displayed for either lineResolution or beatResolution are too restrictive, try changing the other option. If lineResolution only results in one line, more options for beatResolution will be shown.","aria-label":"help",children:Object(s.jsx)(g.a,{children:Object(s.jsx)(j.a,{})})})})]})]})}var S=d.a.DEFAULT_FORMAT_CONFIG},256:function(t,e,n){"use strict";var i=n(10),r=n(58),s=n(1),o=n(2),a=n(4),u=n(3),l=n(9),c=n(0),m=n.n(c),p=n(65),h=function(t){Object(a.a)(n,t);var e=Object(u.a)(n);function n(t){var i;return Object(s.a)(this,n),(i=e.call(this,t)).hiddenFileInput=m.a.createRef(),i}return Object(o.a)(n,[{key:"onChange",value:function(t){var e=this,n=t.target.files[0],i=new FileReader;i.onload=function(t){e.props.onImport&&e.props.onImport({file:n,content:t.target.result})},i.readAsText(n)}},{key:"render",value:function(){var t=this,e=Object(i.a)({},this.props),n=(e.onImport,e.accept),s=Object(r.a)(e,["onImport","accept"]);return Object(l.jsxs)(m.a.Fragment,{children:[Object(l.jsx)(p.a,Object(i.a)(Object(i.a)({onClick:function(e){t.hiddenFileInput.current.click()}},s),{},{children:"Import File"})),Object(l.jsx)("input",{type:"file",hidden:!0,accept:n,onChange:function(e){return t.onChange(e)},ref:this.hiddenFileInput})]})}}]),n}(m.a.Component);e.a=h},260:function(t,e,n){"use strict";var i=n(8),r=n.n(i),s=n(17),o=n(19),a=n(15),u=n(16),l=n(108),c=n(261),m=n.n(c),p=n(131);function h(t,e){var n=Array.from(t.notes,(function(t){return t.position}));return Object(p.a)(n,e)}function f(t){var e=t.song.instrumentList[0].instrument,n=Array.from(e,(function(t){var e=t.instrumentComponent[0],n={id:parseInt(t.id),name:t.name[0],volume:parseFloat(t.volume),muted:"true"===t.isMuted[0],gain:parseFloat(t.gain),drumkit:t.drumkit[0]};return"layer"in e&&(n.filename=e.layer[0].filename[0]),n})),i=t.song.patternList[0].pattern,r=Array.from(i,(function(t){var e=t.noteList[0].note,n=parseInt(t.size),i=[];return e&&(i=(i=Array.from(e,(function(t){return{position:parseInt(t.position),instrument:parseInt(t.instrument)}}))).filter((function(t){return t.position<n}))),{size:n,name:t.name[0],notes:i}})),s=Array.from(r,(function(t){var e,i=h(t,t.size),r={},s=Object(u.a)(n);try{var o=function(){var n=e.value,s=t.notes.filter((function(t){return t.instrument===n.id})),o=Array.from(s,(function(t){return t.position}));r[n.id.toString()]=l.a.fromPositions(o,t.size,i)};for(s.s();!(e=s.n()).done;)o()}catch(a){s.e(a)}finally{s.f()}return t.resolution=i,t.instrumentTracks=r,t}));if(t.song.virtualPatternList){var c=t.song.virtualPatternList[0].pattern;if(c){for(var m={},p=0,f=Array.from(c);p<f.length;p++){var d=f[p],b=d.name[0],j=Array.from(d.virtual);m[b]=new Set(j)}for(var v=0;v<20;++v){for(var g={},O=!1,k=0,y=Object.entries(m);k<y.length;k++){var x,S=Object(a.a)(y[k],2),w=S[0],C=S[1],R=new Set(C),T=Object(u.a)(R);try{for(T.s();!(x=T.n()).done;){var P=x.value;P in m&&(R=new Set([].concat(Object(o.a)(R),Object(o.a)(m[P]))))}}catch(F){T.e(F)}finally{T.f()}O=O||R.size!==C.size,g[w]=R}if(!O)break;if(20===v)throw new Error("Reached max virtual_pattern recursion depth.");m=g}for(var M=function(){var t,e=Object(a.a)(I[A],2),n=e[0],i=e[1],r=s.find((function(t){return t.name===n})),o=Object(u.a)(i);try{var l=function(){for(var e=t.value,n=s.find((function(t){return t.name===e})),i=0,o=Object.entries(n.instrumentTracks);i<o.length;i++){var u=Object(a.a)(o[i],2),l=u[0],c=u[1];if(l in r.instrumentTracks){var m=r.instrumentTracks[l].aggregate(c);m.rep.length=r.size/m.resolution,r.instrumentTracks[l]=m}else{var p=c.format(r.resolution);p.length=r.size/r.resolution,r.instrumentTracks[l]=p}}};for(o.s();!(t=o.n()).done;)l()}catch(F){o.e(F)}finally{o.f()}var c=h(r,r.size);r.resolution=c;for(var m=0,p=Object.entries(r.instrumentTracks);m<p.length;m++){var f=Object(a.a)(p[m],2),d=f[0],b=f[1];r[d]=b.format(c)}},A=0,I=Object.entries(m);A<I.length;A++)M()}}return{instruments:n,patterns:s}}function d(){return(d=Object(s.a)(r.a.mark((function t(e){var n;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=new m.a.Parser,t.abrupt("return",n.parseStringPromise(e).then(f));case 2:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var b={parseHydrogenPromise:function(t){return d.apply(this,arguments)}};e.a=b},271:function(t){t.exports=JSON.parse('{"instruments":[{"id":23,"name":"Stick","volume":0.99569,"muted":false,"gain":1,"drumkit":"GMRockKit","filename":"SideStick-Softest.wav"},{"id":24,"name":"Kick Short","volume":1,"muted":false,"gain":1,"drumkit":"TR808EmulationKit","filename":"808_Kick_Short.flac"},{"id":20,"name":"Stick","volume":0.193966,"muted":false,"gain":1,"drumkit":"DeathMetal"},{"id":26,"name":"Stick","volume":0.99569,"muted":false,"gain":1,"drumkit":"GMRockKit","filename":"SideStick-Softest.wav"},{"id":25,"name":"Kick Short","volume":1,"muted":false,"gain":1,"drumkit":"TR808EmulationKit","filename":"808_Kick_Short.flac"},{"id":22,"name":"tom02","volume":0.65,"muted":false,"gain":1,"drumkit":"DeathMetal"},{"id":27,"name":"snare","volume":0.49,"muted":false,"gain":1,"drumkit":"DeathMetal","filename":"014b.WAV"},{"id":13,"name":"Snare 1","volume":0.35,"muted":false,"gain":0.4,"drumkit":"DeathMetal"},{"id":10,"name":"Djembe4 Slap","volume":0.12931,"muted":false,"gain":1,"drumkit":"circAfrique v4","filename":"Djembe4 Slap.wav"},{"id":11,"name":"Djembe4 Tone","volume":0.12931,"muted":false,"gain":0.95,"drumkit":"circAfrique v4","filename":"Djembe4 Tone.wav"},{"id":12,"name":"Djembe4 Bass","volume":0.181034,"muted":false,"gain":1.5,"drumkit":"circAfrique v4","filename":"Djembe4 Bass.wav"},{"id":16,"name":"Shaker","volume":0.232759,"muted":false,"gain":2.2,"drumkit":"TR808EmulationKit","filename":"808_Shaker.flac"},{"id":21,"name":"Shaker","volume":1.5,"muted":false,"gain":2.45,"drumkit":"TR808EmulationKit","filename":"808_Shaker.flac"}],"patterns":[{"size":384,"name":"k-1","notes":[{"position":0,"instrument":21},{"position":0,"instrument":24},{"position":0,"instrument":26},{"position":0,"instrument":11},{"position":12,"instrument":21},{"position":24,"instrument":11},{"position":24,"instrument":21},{"position":24,"instrument":24},{"position":24,"instrument":26},{"position":24,"instrument":27},{"position":36,"instrument":21},{"position":36,"instrument":11},{"position":48,"instrument":21},{"position":48,"instrument":11},{"position":48,"instrument":23},{"position":48,"instrument":26},{"position":48,"instrument":27},{"position":60,"instrument":24},{"position":72,"instrument":10},{"position":72,"instrument":21},{"position":72,"instrument":26},{"position":84,"instrument":25},{"position":96,"instrument":23},{"position":96,"instrument":26},{"position":108,"instrument":25},{"position":120,"instrument":12},{"position":120,"instrument":25},{"position":144,"instrument":12},{"position":144,"instrument":21},{"position":144,"instrument":23},{"position":144,"instrument":25},{"position":144,"instrument":27},{"position":156,"instrument":21},{"position":168,"instrument":21},{"position":180,"instrument":27},{"position":192,"instrument":11},{"position":192,"instrument":21},{"position":192,"instrument":24},{"position":192,"instrument":26},{"position":216,"instrument":12},{"position":216,"instrument":21},{"position":216,"instrument":24},{"position":216,"instrument":26},{"position":216,"instrument":27},{"position":240,"instrument":11},{"position":240,"instrument":23},{"position":240,"instrument":26},{"position":240,"instrument":27},{"position":252,"instrument":12},{"position":252,"instrument":24},{"position":264,"instrument":21},{"position":264,"instrument":27},{"position":276,"instrument":11},{"position":276,"instrument":25},{"position":288,"instrument":12},{"position":288,"instrument":21},{"position":288,"instrument":24},{"position":288,"instrument":25},{"position":300,"instrument":21},{"position":312,"instrument":11},{"position":312,"instrument":23},{"position":312,"instrument":26},{"position":324,"instrument":12},{"position":324,"instrument":21},{"position":324,"instrument":24},{"position":324,"instrument":25},{"position":336,"instrument":21},{"position":336,"instrument":27},{"position":360,"instrument":21},{"position":360,"instrument":10},{"position":360,"instrument":23},{"position":360,"instrument":26},{"position":360,"instrument":27},{"position":372,"instrument":21},{"position":372,"instrument":27}],"resolution":12,"instrumentTracks":{"10":{"rep":[0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0],"resolution":12},"11":{"rep":[1,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,1,0,0,1,0,0,1,0,0,0,0,0],"resolution":12},"12":{"rep":[0,0,0,0,0,0,0,0,0,0,1,0,1,0,0,0,0,0,1,0,0,1,0,0,1,0,0,1,0,0,0,0],"resolution":12},"13":{"rep":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"resolution":12},"16":{"rep":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"resolution":12},"20":{"rep":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"resolution":12},"21":{"rep":[1,1,1,1,1,0,1,0,0,0,0,0,1,1,1,0,1,0,1,0,0,0,1,0,1,1,0,1,1,0,1,1],"resolution":12},"22":{"rep":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"resolution":12},"23":{"rep":[0,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,1,0],"resolution":12},"24":{"rep":[1,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,1,0,1,0,0,1,0,0,1,0,0,1,0,0,0,0],"resolution":12},"25":{"rep":[0,0,0,0,0,0,0,1,0,1,1,0,1,0,0,0,0,0,0,0,0,0,0,1,1,0,0,1,0,0,0,0],"resolution":12},"26":{"rep":[1,0,1,0,1,0,1,0,1,0,0,0,0,0,0,0,1,0,1,0,1,0,0,0,0,0,1,0,0,0,1,0],"resolution":12},"27":{"rep":[0,0,1,0,1,0,0,0,0,0,0,0,1,0,0,1,0,0,1,0,1,0,1,0,0,0,0,0,1,0,1,1],"resolution":12}}},{"size":384,"name":"k-2","notes":[{"position":0,"instrument":12},{"position":0,"instrument":21},{"position":0,"instrument":24},{"position":0,"instrument":25},{"position":0,"instrument":27},{"position":12,"instrument":12},{"position":12,"instrument":24},{"position":12,"instrument":25},{"position":24,"instrument":12},{"position":24,"instrument":21},{"position":24,"instrument":24},{"position":24,"instrument":25},{"position":36,"instrument":21},{"position":48,"instrument":21},{"position":48,"instrument":10},{"position":48,"instrument":23},{"position":48,"instrument":26},{"position":48,"instrument":27},{"position":72,"instrument":21},{"position":84,"instrument":21},{"position":84,"instrument":27},{"position":96,"instrument":21},{"position":96,"instrument":23},{"position":96,"instrument":26},{"position":108,"instrument":21},{"position":108,"instrument":27},{"position":120,"instrument":11},{"position":120,"instrument":21},{"position":132,"instrument":10},{"position":132,"instrument":27},{"position":144,"instrument":23},{"position":144,"instrument":26},{"position":144,"instrument":27},{"position":156,"instrument":10},{"position":168,"instrument":12},{"position":168,"instrument":21},{"position":168,"instrument":24},{"position":168,"instrument":25},{"position":180,"instrument":12},{"position":180,"instrument":24},{"position":180,"instrument":25},{"position":192,"instrument":12},{"position":192,"instrument":21},{"position":192,"instrument":24},{"position":192,"instrument":25},{"position":192,"instrument":27},{"position":216,"instrument":21},{"position":216,"instrument":11},{"position":228,"instrument":11},{"position":228,"instrument":21},{"position":228,"instrument":27},{"position":240,"instrument":21},{"position":240,"instrument":23},{"position":240,"instrument":26},{"position":240,"instrument":27},{"position":252,"instrument":10},{"position":264,"instrument":21},{"position":264,"instrument":11},{"position":276,"instrument":21},{"position":276,"instrument":27},{"position":288,"instrument":11},{"position":288,"instrument":21},{"position":288,"instrument":23},{"position":288,"instrument":26},{"position":300,"instrument":11},{"position":312,"instrument":21},{"position":324,"instrument":10},{"position":336,"instrument":11},{"position":336,"instrument":23},{"position":336,"instrument":26},{"position":360,"instrument":21}],"resolution":12,"instrumentTracks":{"10":{"rep":[0,0,0,0,1,0,0,0,0,0,0,1,0,1,0,0,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0],"resolution":12},"11":{"rep":[0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,1,1,0,0,1,0,1,1,0,0,1,0,0,0],"resolution":12},"12":{"rep":[1,1,1,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"resolution":12},"13":{"rep":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"resolution":12},"16":{"rep":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"resolution":12},"20":{"rep":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"resolution":12},"21":{"rep":[1,0,1,1,1,0,1,1,1,1,1,0,0,0,1,0,1,0,1,1,1,0,1,1,1,0,1,0,0,0,1,0],"resolution":12},"22":{"rep":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"resolution":12},"23":{"rep":[0,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0],"resolution":12},"24":{"rep":[1,1,1,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"resolution":12},"25":{"rep":[1,1,1,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"resolution":12},"26":{"rep":[0,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0],"resolution":12},"27":{"rep":[1,0,0,0,1,0,0,1,0,1,0,1,1,0,0,0,1,0,0,1,1,0,0,1,0,0,0,0,0,0,0,0],"resolution":12}}},{"size":192,"name":"lightbulb","notes":[{"position":0,"instrument":24},{"position":12,"instrument":24},{"position":24,"instrument":24},{"position":36,"instrument":24},{"position":48,"instrument":24},{"position":96,"instrument":27},{"position":144,"instrument":24},{"position":160,"instrument":24},{"position":176,"instrument":24}],"resolution":4,"instrumentTracks":{"10":{"rep":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"resolution":4},"11":{"rep":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"resolution":4},"12":{"rep":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"resolution":4},"13":{"rep":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"resolution":4},"16":{"rep":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"resolution":4},"20":{"rep":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"resolution":4},"21":{"rep":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"resolution":4},"22":{"rep":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"resolution":4},"23":{"rep":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"resolution":4},"24":{"rep":[1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0],"resolution":4},"25":{"rep":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"resolution":4},"26":{"rep":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"resolution":4},"27":{"rep":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"resolution":4}}},{"size":192,"name":"break","notes":[{"position":24,"instrument":21},{"position":24,"instrument":11},{"position":24,"instrument":27},{"position":48,"instrument":21},{"position":48,"instrument":11},{"position":48,"instrument":27},{"position":96,"instrument":21},{"position":96,"instrument":11},{"position":96,"instrument":27},{"position":120,"instrument":21},{"position":120,"instrument":11},{"position":120,"instrument":27},{"position":144,"instrument":24},{"position":168,"instrument":21},{"position":168,"instrument":11},{"position":168,"instrument":24},{"position":168,"instrument":27}],"resolution":24,"instrumentTracks":{"10":{"rep":[0,0,0,0,0,0,0,0],"resolution":24},"11":{"rep":[0,1,1,0,1,1,0,1],"resolution":24},"12":{"rep":[0,0,0,0,0,0,0,0],"resolution":24},"13":{"rep":[0,0,0,0,0,0,0,0],"resolution":24},"16":{"rep":[0,0,0,0,0,0,0,0],"resolution":24},"20":{"rep":[0,0,0,0,0,0,0,0],"resolution":24},"21":{"rep":[0,1,1,0,1,1,0,1],"resolution":24},"22":{"rep":[0,0,0,0,0,0,0,0],"resolution":24},"23":{"rep":[0,0,0,0,0,0,0,0],"resolution":24},"24":{"rep":[0,0,0,0,0,0,1,1],"resolution":24},"25":{"rep":[0,0,0,0,0,0,0,0],"resolution":24},"26":{"rep":[0,0,0,0,0,0,0,0],"resolution":24},"27":{"rep":[0,1,1,0,1,1,0,1],"resolution":24}}},{"size":192,"name":"squash","notes":[{"position":0,"instrument":21},{"position":0,"instrument":12},{"position":0,"instrument":24},{"position":0,"instrument":27},{"position":48,"instrument":21},{"position":48,"instrument":12},{"position":48,"instrument":24},{"position":48,"instrument":27},{"position":96,"instrument":21},{"position":96,"instrument":12},{"position":96,"instrument":24},{"position":96,"instrument":27},{"position":144,"instrument":21},{"position":144,"instrument":12},{"position":144,"instrument":24},{"position":144,"instrument":27}],"resolution":48,"instrumentTracks":{"10":{"rep":[0,0,0,0],"resolution":48},"11":{"rep":[0,0,0,0],"resolution":48},"12":{"rep":[1,1,1,1],"resolution":48},"13":{"rep":[0,0,0,0],"resolution":48},"16":{"rep":[0,0,0,0],"resolution":48},"20":{"rep":[0,0,0,0],"resolution":48},"21":{"rep":[1,1,1,1],"resolution":48},"22":{"rep":[0,0,0,0],"resolution":48},"23":{"rep":[0,0,0,0],"resolution":48},"24":{"rep":[1,1,1,1],"resolution":48},"25":{"rep":[0,0,0,0],"resolution":48},"26":{"rep":[0,0,0,0],"resolution":48},"27":{"rep":[1,1,1,1],"resolution":48}}}]}')},273:function(t,e,n){"use strict";var i=n(9),r=n(0),s=n.n(r),o=n(60),a=n(274),u=n.n(a),l=n(275),c=n.n(l),m=n(289),p=n(44);e.a=function(t){return Object(i.jsxs)(s.a.Fragment,{children:[Object(i.jsxs)("div",{children:[Object(i.jsx)(o.a,{color:"primary","aria-label":"play",onClick:function(){t.onPlay&&t.onPlay()},children:Object(i.jsx)(u.a,{})}),Object(i.jsx)(o.a,{color:"secondary","aria-label":"stop",onClick:function(){t.onStop&&t.onStop()},children:Object(i.jsx)(c.a,{})})]}),Object(i.jsxs)(p.a,{container:!0,children:[Object(i.jsx)(p.a,{item:!0,xs:4}),Object(i.jsx)(p.a,{item:!0,xs:4,children:Object(i.jsx)(m.a,{defaultValue:100,min:60,step:1,max:180,onChange:function(e,n){t.onTempoChange&&t.onTempoChange(n)},valueLabelDisplay:"auto"})}),Object(i.jsx)(p.a,{item:!0,xs:4})]})]})}},280:function(t,e,n){"use strict";var i=n(19),r=n(1),s=n(2),o=n(4),a=n(3),u=n(9),l=n(0),c=n.n(l),m=n(51),p=n(13),h=function(t){Object(o.a)(n,t);var e=Object(a.a)(n);function n(t){var i;return Object(r.a)(this,n),(i=e.call(this,t)).state={},i}return Object(s.a)(n,[{key:"render",value:function(){var t=this,e=Object.values(this.props.tracks);if(0===e.length)return Object(u.jsx)(c.a.Fragment,{});var n=m.a.formatPatternString(this.props.instrument,this.props.tracks,this.props.config.restMark),r=e[0].resolution;if(this.props.config.lineResolution%this.props.config.beatResolution!==0&&n.length*r>this.props.config.lineResolution)throw new Error("This code only supports a beatResolution that divides the lineResolution");var s=m.a.chunkArray(n,this.props.config.lineResolution/r,0),o=this.props.config.lineResolution/this.props.config.beatResolution,a=this.props.config.beatResolution/r,l=s.map((function(t){return m.a.chunkArray(t,a)})),p=Object(i.a)(s.keys()),h=function(e,n,r){var s=Object(i.a)(n.keys());return Object(u.jsxs)("p",{children:[Object(u.jsx)("span",{children:t.props.config.lineMark},"line-start-"+e),s.map((function(e){return Object(u.jsxs)(c.a.Fragment,{children:[Object(u.jsx)("span",{className:e+r===t.props.activeNote?"activeNote":"",children:n[e].join("")},"span-beat-"+(e+r).toString()),Object(u.jsx)("span",{children:t.props.config.showBeatMark&&e!==s[s.length-1]?t.props.config.beatMark:""},"span-beat-marker-"+(e+r).toString())]},"fragment-beat-"+(e+r).toString())})),Object(u.jsx)("span",{children:t.props.config.lineMark},"line-end-"+e)]},"pattern-line-"+e)},f=m.a.createNumberMarker(this.props.config.numberRestMark,this.props.config.beatResolution,r,Math.min(this.props.config.lineResolution,s[0].length*r)),d=m.a.chunkArray(f,this.props.config.beatResolution/r);return Object(u.jsxs)(c.a.Fragment,{children:[this.props.config.showBeatNumbers?h("beat",d,0):"",p.map((function(t){return h(t.toString(),l[t],o*t)}))]})}}]),n}(c.a.Component),f=Object(p.a)((function(t){return{root:{whiteSpace:"pre"}}}))(h);var d=function(t){Object(o.a)(n,t);var e=Object(a.a)(n);function n(t){var i;return Object(r.a)(this,n),(i=e.call(this,t)).state={},i}return Object(s.a)(n,[{key:"render",value:function(){var t=function(t,e){var n=t?t.toLowerCase():"";return["h1","h2","h3","h4","h5","h6"].includes(n)?n:e}(this.props.headingLevel,"h4");return Object(u.jsxs)("article",{children:[Object(u.jsx)(t,{children:this.props.instrumentName}),Object(u.jsx)(f,{instrument:this.props.instrument,tracks:this.props.tracks,config:this.props.config,activeNote:this.props.activeNote})]})}}]),n}(c.a.Component),b=function(t){Object(o.a)(n,t);var e=Object(a.a)(n);function n(t){var i;return Object(r.a)(this,n),(i=e.call(this,t)).state={patternTime:void 0},i}return Object(s.a)(n,[{key:"onPatternTimeChange",value:function(t){null!==t&&void 0!==t?this.setState({patternTime:t}):this.setState({patternTime:void 0})}},{key:"render",value:function(){var t=this,e=this.props.classes,n=Object(i.a)(this.props.instruments.keys()),r=this.props.config.beatResolution;return Object(u.jsx)("div",{className:e.root,children:n.map((function(e){return Object(u.jsx)(d,{instrumentName:t.props.instruments[e][0],instrument:t.props.instruments[e][1],tracks:t.props.tracks,config:t.props.config,activeNote:void 0!==t.state.patternTime?Math.floor(t.state.patternTime/r):void 0},"part-"+e.toString())}))})}}]),n}(c.a.Component);e.a=Object(p.a)((function(t){return{root:{"margin-bottom":t.spacing(2),fontFamily:"Roboto Mono",textAlign:"left",whiteSpace:"pre","& .activeNote":{color:t.palette.primary.main}}}}))(b)},314:function(t,e,n){},332:function(t,e){},334:function(t,e){},344:function(t,e,n){},436:function(t,e,n){"use strict";n.r(e);var i=n(9),r=n(0),s=n.n(r),o=n(24),a=n.n(o),u=(n(314),n(182)),l=n(30),c=n(183);function m(){return Object(i.jsx)(u.a,{basename:"/tabit",children:Object(i.jsxs)(l.c,{children:[Object(i.jsx)(l.a,{path:"/song/:song",children:Object(i.jsx)(c.a,{})}),Object(i.jsx)(l.a,{path:"/",children:Object(i.jsx)(c.a,{})})]})})}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a.a.render(Object(i.jsx)(s.a.StrictMode,{children:Object(i.jsx)(m,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))},51:function(t,e,n){"use strict";var i=n(15),r=n(1),s=n(2),o=function(){function t(){Object(r.a)(this,t)}return Object(s.a)(t,null,[{key:"validateConfig",value:function(t,e){if(null!=e&&t.beatResolution%e!==0)throw new Error("patternResolution doesn't divide beatResolution");if(t.lineResolution<=0)throw new Error("config.lineResolution must be greater than zero")}},{key:"resolveConfig",value:function(e){for(var n=0,i=Object.keys(e);n<i.length;n++){var r=i[n];if(!t.DEFAULT_FORMAT_CONFIG.hasOwnProperty(r))throw new Error("passed unrecognised property "+r)}return Object.assign(Object.assign({},t.DEFAULT_FORMAT_CONFIG),e)}},{key:"chunkString",value:function(t,e){if(e<=0)throw new Error("chunkSize must be > 0");return t.match(new RegExp(".{1,"+e+"}","g"))}},{key:"chunkArray",value:function(t,e){if(e<=0)throw new Error("chunkSize must be > 0");for(var n=[],i=0;i<t.length;i+=e)n.push(t.slice(i,Math.min(i+e,t.length)));return n}},{key:"createNumberMarker",value:function(t,e,n,i){if(i<=0)throw new Error("lineLength <= 0");if(e%n!==0)throw new Error("patternResolution "+n.toString()+" does not divide beatResolution "+e.toString());for(var r=Math.ceil(i/e),s=Array.from(Array(i/n),(function(e){return t})),o=0;o<r;o++)s[o*(e/n)]=((o+1)%10).toString();return s}},{key:"formatLineWithMarkers",value:function(e,n,i,r){t.validateConfig(e);for(var s=e.beatResolution/i,o=r?function(t,e){return"<span class='note-"+(n=e,((n+="").length>=(i=4)?n:new Array(i-n.length+1).join("0")+n)+"'>")+t+"</span>";var n,i}:function(t,e){return t},a="",u=0;u<n.length;++u){var l=i*u;a+=o(n.charAt(u),l)}var c=e.showBeatMark?t.chunkString(a,s*o("X",0).length).join(e.beatMark):a;return e.lineMark+c+e.lineMark}},{key:"defaultLineResolution",value:function(t,e){var n=Object.values(t);if(0===n.length)return 384;var i=n[0].length(),r=i/e;return r<=12?i:r>32?768:[i,i/2,i/3,i/2,i,i/3,i,i/4,i/3,i/2,i,i/3,i/5,i,i/3,i/4,i,i/6,i,i/4][r-13]}},{key:"guessPerPatternSettings",value:function(e){return{lineResolution:t.defaultLineResolution(e,48),beatResolution:48}}},{key:"formatPatternString",value:function(t,e,n){var r=Object.values(e);if(0===r.length)return"";for(var s=r[0].length(),o=r[0].resolution,a=Array(s/o).fill(n),u=0;u<a.length;++u)for(var l=0,c=Object.entries(t);l<c.length;l++){var m=Object(i.a)(c[l],2),p=m[0],h=m[1],f=e[p];null!=f&&1===f.rep[u]&&(a[u]=h)}return a}},{key:"fromInstrumentAndTrack",value:function(e,n,i){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},s=t.resolveConfig(r),o=Object.values(n);if(0===o.length)return"";var a=t.formatPatternString(e,n,s.restMark),u=a.join(""),l=o[0].resolution,c=o[0].length(),m=t.chunkString(u,s.lineResolution/l),p=[];s.showBeatNumbers&&p.push(t.formatLineWithMarkers(s,t.createNumberMarker(s.numberRestMark,s.beatResolution,l,Math.min(s.lineResolution,c)).join(""),l,i));for(var h=0;h<m.length;++h)p.push(t.formatLineWithMarkers(s,m[h],l,i));return p.join("\n")}}]),t}();o.DEFAULT_FORMAT_CONFIG={restMark:"-",beatMark:"|",lineMark:"|",numberRestMark:"-",beatResolution:48,showBeatMark:!0,showBeatNumbers:!0,lineResolution:384},o.FORMAT_CONFIG_STRINGS=[["restMark",["-","."," "]],["numberRestMark",["-","."," "]]],o.FORMAT_CONFIG_BOOLS=["showBeatMark","showBeatNumbers"],e.a=o},83:function(t,e,n){"use strict";n.d(e,"b",(function(){return l})),n.d(e,"a",(function(){return s})),n.d(e,"c",(function(){return m}));var i=n(15),r=n(16),s={"Djembe Slap":"S","Djembe Tone":"t","Djembe Bass":"O","Snare Ghost":"x","Snare Accent":"X","Shaker Ghost":"x","Shaker Accent":"X",Click:"X",Bass:"O",Tom:"O",Default:"X"};function o(t){var e,n=[],i=Object(r.a)(t);try{for(i.s();!(e=i.n()).done;){var s=e.value,o=Object.assign({},s);o.name=o.name.toLowerCase(),n.push(o)}}catch(a){i.e(a)}finally{i.f()}return n}function a(t,e,n,i){var s=[];if(2===t.length){var o=t[0],a=t[1],u=o.volume>a.volume||o.volume===a.volume&&o.gain>a.gain,l={};l[o.id.toString()]=u?n:i,l[a.id.toString()]=u?i:n,s.push([e,l])}else{var c,m=Object(r.a)(t);try{for(m.s();!(c=m.n()).done;){var p=c.value,h={};h[p.id.toString()]=n,s.push([e,h])}}catch(f){m.e(f)}finally{m.f()}}return s}function u(t){var e,n=new Set,s=Object(r.a)(t);try{for(s.s();!(e=s.n()).done;)for(var o=e.value,a=0,u=Object.entries(o.instrumentTracks);a<u.length;a++){var l=Object(i.a)(u[a],2),c=l[0];l[1].empty()||n.add(parseInt(c))}}catch(m){s.e(m)}finally{s.f()}return n}function l(t,e){var n,i=u(e),s=[],o=Object(r.a)(t);try{for(o.s();!(n=o.n()).done;){var a=n.value;i.has(a.id)&&s.push(a)}}catch(l){o.e(l)}finally{o.f()}return s}function c(t,e){var n=e.toLowerCase();return n.includes("click")||n.includes("stick")?t.Click:n.includes("bass")||n.includes("kick")?t.Bass:n.includes("snare")?t["Snare Accent"]:n.includes("shaker")?t.Shaker:n.includes("tom")?t.Tom:n.includes("djembe")?n.includes("slap")?t["Djembe Slap"]:n.includes("tone")?t["Djembe Tone"]:t["Djembe Bass"]:t.Default}function m(t,e,n){var i=[];i=(i=(i=(i=i.concat(function(t,e,n){for(var i=o(t),r=u(n),s=i.filter((function(t){return r.has(t.id)&&!t.name.includes("djembe")&&(t.name.includes("click")||t.name.includes("stick")||t.name.includes("tom")||t.name.includes("bass")||t.name.includes("kick"))})),a=Array.from(s,(function(t){return t.name.includes("click")||t.name.includes("stick")})),l=1,c=1,m=[],p=0;p<Math.floor(s.length/2);++p)if(a[2*p]!==a[2*p+1]){var h=a[2*p]?s[2*p]:s[2*p+1],f=a[2*p]?s[2*p+1]:s[2*p],d=f.name.includes("tom"),b=d?"Tom":"Bass",j="";d?(j=b+(l>=2?" "+l.toString():""),l+=1):(j=b+(c>=2?" "+c.toString():""),c+=1);var v={};v[f.id.toString()]=e[b],v[h.id.toString()]=e.Click,m.push([j,v])}if(s.length%2!==0&&!a[s.length-1]){var g=s[s.length-1],O=g.name.includes("tom"),k=O?"Tom":"Bass",y="";O?(y=k+(l>=2?" "+l.toString():""),l+=1):(y=k+(c>=2?" "+c.toString():""),c+=1);var x={};x[g.id.toString()]=e[k],m.push([y,x])}return m}(t,e,n))).concat(function(t,e){var n=o(t).filter((function(t){return t.name.includes("djembe")}));if(0===n.length)return[];if(n.length<=3){for(var i=Array.from(n,(function(t){return t.name.includes("slap")})),r=Array.from(n,(function(t){return t.name.includes("tone")})),s=Array.from(n,(function(t){return t.name.includes("bass")})),a=0;a<n.length;++a)if(1!==i[a]+r[a]+s[a])return[];for(var u={},l=0;l<n.length;++l)i[l]?u[n[l].id.toString()]=e["Djembe Slap"]:r[l]?u[n[l].id.toString()]=e["Djembe Tone"]:s[l]&&(u[n[l].id.toString()]=e["Djembe Bass"]);return[["Djembe",u]]}return[]}(t,e))).concat(function(t,e){return a(o(t).filter((function(t){return t.name.includes("snare")})),"Snare",e["Snare Accent"],e["Snare Ghost"])}(t,e))).concat(function(t,e){return a(o(t).filter((function(t){return t.name.includes("shaker")})),"Shaker",e["Shaker Accent"],e["Shaker Ghost"])}(t,e));var s,l=u(n),m=Object(r.a)(t);try{for(m.s();!(s=m.n()).done;){var p=s.value;if(l.has(p.id)){var h,f=!1,d=Object(r.a)(i);try{for(d.s();!(h=d.n()).done;){var b=h.value;p.id.toString()in b[1]&&(f=!0)}}catch(v){d.e(v)}finally{d.f()}if(!1===f){var j={};j[p.id.toString()]=c(e,p.name),i.push([p.name,j])}}}}catch(v){m.e(v)}finally{m.f()}return i}},95:function(t,e,n){"use strict";n.d(e,"b",(function(){return ot})),n.d(e,"a",(function(){return st}));var i=n(19),r=n(1),s=n(2),o=n(4),a=n(3),u=n(15),l=n(9),c=n(0),m=n.n(c),p=n(283),h=n(285),f=n(457),d=n(445),b=n(447),j=n(96),v=n(448),g=n(446),O=n(140),k=n(270),y=n.n(k),x=n(185),S=n.n(x),w=n(65),C=n(60),R=n(269),T=n.n(R),P=n(290),M=n(192),A=n(194),I=n(193),F=n(139),N=n(287),D=n(13),E=n(66),B=n(44),_=n(265),L=n.n(_),z=n(266),G=n.n(z),K=n(267),q=n.n(K),J=n(268),W=n.n(J),U=n(264),V=n.n(U),H=n(289),X=n(136),Y=Object(p.a)((function(t){return{root:{display:"flex"}}})),$=Object(D.a)({root:{marginLeft:0,marginRight:0}})(h.a),Z=Object(D.a)({root:{padding:2}})(C.a),Q=Object(D.a)((function(t){return{root:{borderBottom:"none",textAlign:"center",paddingBottom:t.spacing(0)}}}))(j.a),tt=Object(D.a)((function(t){return{root:{textAlign:"center"}}}))(j.a);function et(t){var e=m.a.useState(!1),n=Object(u.a)(e,2),i=n[0],r=n[1],s=m.a.useState(100),o=Object(u.a)(s,2),a=o[0],c=o[1],p=m.a.useState(t.muted),h=Object(u.a)(p,2),f=h[0],d=h[1],b=m.a.useRef(null),j=t.height?t.height/3:24,v={height:3*j,position:"absolute",top:-j},g=Object.assign(i?{}:{visibility:"hidden",paddingLeft:"0px"},v),O=i?{visibility:"hidden"}:{},k=Object(X.a)();return Object(l.jsx)(V.a,{time:.5,onClickNHold:k?function(t,e){i||r(!0)}:function(t,e){i||r(!0),b&&b.current.dispatchEvent(e.nativeEvent)},onEnd:k?null:function(t){r(!1)},children:Object(l.jsxs)(Z,{disableRipple:!0,disableFocusRipple:!0,onClick:function(){d(!f),t.onMuteEvent(!f)},children:[Object(l.jsx)("div",{style:g,children:Object(l.jsx)(H.a,{defaultValue:100,orientation:"vertical","aria-labelledby":"vertical-slider",onChange:function(e,n){k&&r(!1),function(e,n){c(n),t.onChange&&t.onChange(n)}(0,n)},ref:b})}),Object(l.jsx)("div",{style:O,children:f?Object(l.jsx)(L.a,{fontSize:"small"}):a<10?Object(l.jsx)(G.a,{fontSize:"small"}):a<50?Object(l.jsx)(q.a,{fontSize:"small"}):Object(l.jsx)(W.a,{fontSize:"small"})})]})})}var nt=function(t){Object(o.a)(n,t);var e=Object(a.a)(n);function n(t){var i;return Object(r.a)(this,n),(i=e.call(this,t)).state={currentSymbol:null},i}return Object(s.a)(n,[{key:"render",value:function(){var t,e=this,n=function(t){e.setState({currentSymbol:null}),e.props.onCancel&&e.props.onCancel()};return Object(l.jsxs)(M.a,{open:this.props.open,onClose:n,"aria-labelledby":"form-dialog-title",children:[Object(l.jsx)(N.a,{id:"form-dialog-title"}),Object(l.jsxs)(I.a,{children:[Object(l.jsx)(F.a,{children:"Enter notation symbol"}),Object(l.jsx)(P.a,{autoFocus:!0,margin:"dense",id:"name",fullWidth:!0,value:null!==(t=this.state.currentSymbol)&&void 0!==t?t:this.props.value,onChange:function(t){e.setState({currentSymbol:t.target.value})}})]}),Object(l.jsxs)(A.a,{children:[Object(l.jsx)(w.a,{onClick:n,color:"primary",children:"Cancel"}),Object(l.jsx)(w.a,{onClick:function(t){null!==e.state.currentSymbol&&1===e.state.currentSymbol.length?e.props.onChange&&e.props.onChange(e.state.currentSymbol):alert('You selected an invalid symbol "'+e.state.currentSymbol+'".\nSymbols must be precisely 1 character.')},color:"primary",children:"Confirm"})]})]})}}]),n}(m.a.Component),it=function(t){Object(o.a)(n,t);var e=Object(a.a)(n);function n(t){var i;return Object(r.a)(this,n),(i=e.call(this,t)).state={currentName:null},i}return Object(s.a)(n,[{key:"render",value:function(){var t,e=this,n=function(){e.props.onCancel&&e.props.onCancel(),e.setState({currentName:null})};return Object(l.jsxs)(M.a,{open:this.props.open,onClose:n,"aria-labelledby":"form-dialog-title",children:[Object(l.jsx)(N.a,{id:"form-dialog-title"}),Object(l.jsxs)(I.a,{children:[Object(l.jsx)(F.a,{children:"Enter instrument name"}),Object(l.jsx)(P.a,{autoFocus:!0,margin:"dense",id:"name",fullWidth:!0,value:null!==(t=this.state.currentName)&&void 0!==t?t:this.props.value,onChange:function(t){e.setState({currentName:t.target.value})}})]}),Object(l.jsxs)(A.a,{children:[Object(l.jsx)(w.a,{onClick:n,color:"primary",children:"Cancel"}),Object(l.jsx)(w.a,{onClick:function(){null!==e.state.currentName?e.state.currentName.trim().length>0?(e.props.onChange&&e.props.onChange(e.state.currentName),e.setState({currentName:null})):alert('You selected an invalid instrument name "'+e.state.currentName+'".\nMust be non-empty.'):n()},color:"primary",children:"Confirm"})]})]})}}]),n}(m.a.Component);function rt(t){var e=Y(),n=function(e,n){return Object(l.jsx)(j.a,{align:"center",children:Object(l.jsx)($,{control:Object(l.jsx)(f.a,{checked:t.instrumentMask[e]===n,onChange:function(i){!function(e,n,i){var r=t.instrumentIndex[e].id,s=t.instruments.findIndex((function(t){return r in t[1]})),o=n;if(s!==o){var a=t.instruments[s],u=["",{}];if(null!=a){u[0]=a[0];for(var l=0,c=Object.keys(a[1]);l<c.length;l++){var m=c[l];m!==r.toString()&&(u[1][m]=a[1][m])}}var p=[t.instruments[o][0],Object.assign({},t.instruments[o][1])];p[1][r.toString()]=null!=a?a[1][r]:"X";for(var h=[],f=0;f<t.instruments.length;++f)f===s?h.push(u):f===o?h.push(p):h.push(t.instruments[f]);t.onChange(h)}}(e,n)},name:e+","+n.toString()})})},"instrumentPanel-cell-"+n.toString()+"-"+e.toString())},r=function(e){return Object(l.jsxs)(O.a,{children:[Object(l.jsxs)(j.a,{component:"th",scope:"row",children:[Object(l.jsx)(E.a,{children:t.instruments[e][0]}),Object(l.jsx)(Z,{onClick:function(n){!function(e){t.onEditRow&&t.onEditRow(e)}(e)},children:Object(l.jsx)(S.a,{fontSize:"small"})}),Object(l.jsx)(Z,{onClick:function(n){!function(e){t.onRemoveRow&&t.onRemoveRow(e)}(e)},children:Object(l.jsx)(T.a,{fontSize:"small"})})]},"instrumentPanel-row-"+e.toString()+"-name"),Object(i.a)(Array(t.instrumentMask.length).keys()).map((function(t){return n(t,e)}))]},"instrumentPanel-row-"+e.toString())};return Object(l.jsxs)(d.a,{className:e.table,"aria-label":"simple table",children:[Object(l.jsxs)(g.a,{children:[Object(l.jsxs)(O.a,{children:[Object(l.jsx)(Q,{children:" Instrument "},"instrumentPanel-row-instrument"),Object(i.a)(Array(t.instrumentIndex.length).keys()).map((function(e){return Object(l.jsx)(Q,{children:Object(l.jsx)(E.a,{children:t.instrumentIndex[e].name})},"instrumentPanel-row-header-cell-"+e.toString())}))]},"instrumentPanel-row-header"),Object(l.jsxs)(O.a,{children:[Object(l.jsx)(j.a,{},"instrumentPanel-row-instrument"),Object(i.a)(Array(t.instrumentIndex.length).keys()).map((function(e){return Object(l.jsx)(tt,{children:Object(l.jsxs)(B.a,{container:!0,children:[Object(l.jsx)(B.a,{item:!0,xs:6,children:Object(l.jsx)(Z,{onClick:function(n){!function(e){t.onEditColumn&&t.onEditColumn(e)}(e)},children:Object(l.jsx)(S.a,{fontSize:"small"})})}),Object(l.jsx)(B.a,{item:!0,xs:6,children:Object(l.jsx)(et,{muted:t.instrumentIndex[e].muted,onChange:function(n){t.onVolumeEvent({instrument:e,volume:n/100})},onMuteEvent:function(n){t.onVolumeEvent({instrument:e,muted:n})}})})]})},"instrumentPanel-row-controls-cell-"+e.toString())}))]},"instrumentPanel-row-controls")]}),Object(l.jsxs)(b.a,{children:[Object(i.a)(Array(t.instruments.length).keys()).map((function(t){return r(t)})),Object(l.jsx)(O.a,{children:Object(l.jsx)(j.a,{component:"th",scope:"row",children:Object(l.jsx)(C.a,{onClick:function(e){t.onAddRow&&t.onAddRow()},"aria-label":"add",children:Object(l.jsx)(y.a,{})})},"instrumentPanel-row-edit-cell")},"instrumentPanel-row-edit")]})]})}function st(t){var e,n=m.a.useState(null),i=Object(u.a)(n,2),r=i[0],s=i[1],o=m.a.useState(null),a=Object(u.a)(o,2),c=a[0],p=a[1],h=function(e){if(null!==e){var n=t.instrumentIndex[r].id,i=t.instruments.findIndex((function(t){return n in t[1]})),o=Array.from(t.instruments);o[i][1][n]=e,t.onChange(o)}s(null)};return Object(l.jsxs)(m.a.Fragment,{children:[Object(l.jsx)(it,{open:null!==c,onCancel:function(){p(null)},onChange:function(e){!function(e){if(c===t.instruments.length){var n=[e,{}],i=Array.from(t.instruments);i.push(n),t.onChange(i)}else{var r=Array.from(t.instruments);r[c][0]=e,t.onChange(r)}p(null)}(e)},value:null!==c?(e=c,t.instruments[e][0]):null}),Object(l.jsx)(nt,{open:null!==r,onCancel:function(){h(null)},onChange:function(t){h(t)},value:null!==r?function(e){var n=t.instrumentIndex[r].id,i=t.instruments.findIndex((function(t){return n in t[1]}));return t.instruments[i][1][n]}():null}),Object(l.jsx)(v.a,{children:Object(l.jsx)(rt,{instrumentIndex:t.instrumentIndex,instrumentMask:t.instrumentMask,instruments:t.instruments,onEditColumn:function(t){s(t)},onEditRow:function(t){p(t)},onAddRow:function(){p(t.instruments.length)},onRemoveRow:function(e){!function(e){var n=t.instruments.slice(0,e).concat(t.instruments.slice(e+1));t.onChange(n)}(e)},onVolumeEvent:t.onVolumeEvent,onChange:t.onChange})})]})}function ot(t,e){for(var n=Array(t.length),i=0;i<t.length;++i)for(var r=t[i].id,s=0;s<e.length;++s){var o=e[s];r.toString()in o[1]&&(n[i]=s)}return n}}},[[436,1,2]]]);
//# sourceMappingURL=main.44e22ec0.chunk.js.map