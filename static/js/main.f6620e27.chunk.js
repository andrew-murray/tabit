(this.webpackJsonptabit=this.webpackJsonptabit||[]).push([[0],{109:function(t,e,n){"use strict";var i=n(16),r=n(1),o=n(2),s=n(132);function a(t,e){if(t<1||e<1)throw new Error("x<1 || y<1");for(;Math.max(t,e)%Math.min(t,e)!==0;)t>e?t%=e:e%=t;return Math.min(t,e)}var u=function(){function t(e,n){if(Object(r.a)(this,t),0===e.length)throw new Error("patternArray must not be zero length");this.rep=e,this.resolution=n}return Object(o.a)(t,[{key:"length",value:function(){return this.rep.length*this.resolution}},{key:"empty",value:function(){return 0===this.rep.reduce((function(t,e){return t+e}))}},{key:"_sumOverlapsOfArrays",value:function(t,e){for(var n=0,i=0;i<t.length;++i)t[i]&&e[i]&&n++;return n}},{key:"countOverlaps",value:function(t){if(this.resolution===t.resolution)return this._sumOverlapsOfArrays(this.rep,t.rep);var e=a(this.resolution,t.resolution),n=this.formatResolution(e),i=t.formatResolution(e);return this._sumOverlapsOfArrays(n.rep,i.rep)}},{key:"aggregate",value:function(e){if(this.resolution===e.resolution){for(var n=Math.max(this.rep.length,e.rep.length),i=new Array(n).fill(0),r=0;r<i.length;++r)i[r]=(r<this.rep.length?this.rep[r]:0)||(r<e.rep.length?e.rep[r]:0);return new t(i,this.resolution)}var o=a(this.resolution,e.resolution),s=this.formatResolution(o),u=e.formatResolution(o);return s.aggregate(u)}},{key:"format",value:function(e){var n=this.resolution*this.rep.length,i=this.toPoints(),r=t.representPoints(i,e,n);return r?new t(r,e):null}},{key:"toPoints",value:function(){var t,e=[],n=Object(i.a)(Array(this.rep.length).keys());try{for(n.s();!(t=n.n()).done;){var r=t.value;this.rep[r]&&e.push(this.resolution*r)}}catch(o){n.e(o)}finally{n.f()}return e}}],[{key:"representPoints",value:function(t,e,n){if(n<=0)throw new Error("size must be greater than zero");if(n<e||n%e!==0)throw new Error("resolution must be less than size and divide it evenly");var r,o=new Array(n/e).fill(0),s=Object(i.a)(t);try{for(s.s();!(r=s.n()).done;){var a=r.value;if(a%e!==0)throw new Error("Failed to represent point "+a.toString()+" at resolution "+e.toString());if(a>=n)throw new Error("Failed to represent point "+a.toString()+" for invalid specified size "+n.toString());o[a/e]=1}}catch(u){s.e(u)}finally{s.f()}return o}},{key:"fromPositions",value:function(e,n){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,r=null!==i&&void 0!==i?i:Object(s.a)(e,n);return new t(t.representPoints(e,r,n),r)}}]),t}();e.a=u},132:function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var i=n(16);function r(t,e){for(var n=t.concat([e]),r=0,o=[48,24,16,12,8,6,4,3,2,1];r<o.length;r++){var s,a=o[r],u=!0,c=Object(i.a)(n);try{for(c.s();!(s=c.n()).done;){if(s.value%a!==0){u=!1;break}}}catch(l){c.e(l)}finally{c.f()}if(u)return a}throw new Error("Failed to predict base")}},137:function(t,e,n){"use strict";function i(){var t=navigator.userAgent||navigator.vendor||window.opera;return[/Android/i,/webOS/i,/iPhone/i,/iPad/i,/iPod/i,/BlackBerry/i,/Windows Phone/i].some((function(e){return t.match(e)}))}n.d(e,"a",(function(){return i}))},139:function(t,e,n){"use strict";var i=n(19),r=n(1),o=n(2),s=n(16),a=n(15),u=function(){function t(){Object(r.a)(this,t)}return Object(o.a)(t,null,[{key:"createWebContext",value:function(){return new(window.AudioContext||window.webkitAudioContext||Object)}},{key:"determineMinResolution",value:function(t,e){for(var n=48,i=function(){var e=Object(a.a)(o[r],2),i=e[0],s=e[1];t.filter((function(t){return t.id.toString()===i})).length>0&&!s.empty()&&(n=Math.min(n,s.resolution))},r=0,o=Object.entries(e);r<o.length;r++)i();return n}},{key:"determineTrackLength",value:function(t,e){for(var n=48,i=function(){var e=Object(a.a)(o[r],2),i=e[0],s=e[1];t.filter((function(t){return t.id.toString()===i})).length>0&&!s.empty()&&(n=Math.max(n,s.length()))},r=0,o=Object.entries(e);r<o.length;r++)i();return n}},{key:"peakAmplitude",value:function(t){for(var e=0,n=0;n<t.numberOfChannels;n++)for(var i=t.getChannelData(n),r=0;r<i.length;++r)e=Math.max(Math.abs(i[r]),e);return e}},{key:"normalizeAudioBuffer",value:function(e){var n=t.peakAmplitude(e);if(n>1)for(var i=0;i<e.numberOfChannels;i++)for(var r=e.getChannelData(i),o=0;o<r.length;++o)r[o]=r[o]/n;return e}},{key:"createMasterTrack",value:function(e,n,i,r,o){for(var u=t.determineTrackLength(i,n),c=44100*(u*(60/o*1e3/48))/1e3,l=Math.floor(c),m=Math.floor(l/u),p=e.createBuffer(2,l,44100),h=0;h<p.numberOfChannels;h++)for(var f=p.getChannelData(h),d=function(){var t=Object(a.a)(j[b],2),e=t[0],n=t[1],o=i.filter((function(t){return t.id.toString()===e}));if(o.length>0&&o[0].id in r&&!n.empty()){var u,c=r[o[0].id],l=2===c.numberOfChannels?c.getChannelData(h):c.getChannelData(0),p=n.toPoints(),d=Object(s.a)(p);try{for(d.s();!(u=d.n()).done;)for(var v=u.value*m,g=0;g<c.length;++g)f[v+g]=f[v+g]+l[g]}catch(O){d.e(O)}finally{d.f()}}},b=0,j=Object.entries(n);b<j.length;b++)d();return t.normalizeAudioBuffer(p)}},{key:"createAudioSource",value:function(t,e,n){var i=t.createBufferSource();return i.buffer=e,i.loop=!0,null!==n&&(i.playbackRate.value=n/100),i.connect(t.destination),i}},{key:"createOneShotAudioSource",value:function(t,e,n){var i=t.createBufferSource();return i.buffer=e,i.loop=!1,null!==n&&(i.playbackRate.value=n/100),i.connect(t.destination),i}}]),t}(),c=n(25),l=["circAfrique v4","DeathMetal","The Black Pearl 1.0","GMRockKit","TR808EmulationKit"],m=function(t){return Math.pow(t,2.5)},p=function(t,e){var n=e.samplesReady();return function(i,r){if(n||(n=e.samplesReady())){for(var o=r%(t.length/t.resolution),s=0,u=Object.entries(t.tracks);s<u.length;s++){var l=Object(a.a)(u[s],2),m=l[0];if(l[1].rep[o]){var p=e.samples[m];void 0!==p&&p.player.start(i)}}e.onPatternTimeChange&&c.a.schedule((function(){var n=o*t.resolution%t.length;e.onPatternTimeChange(n)}),i)}}},h=function(){function t(e,n,i,o){Object(r.a)(this,t),this.samples={},this.sequences={},this.currentPattern=null,this.gain=new c.b,this.gain.toDestination(),this.onPatternTimeChange=o,c.f.bpm.value=i,c.f.loop=!0,this.sampleCount=0,this.expectedSampleCount=0,this.patternDetails={};var m,p=[],h=Object(s.a)(n);try{for(h.s();!(m=h.n()).done;){var f=m.value;this.patternDetails[f.name]={resolution:u.determineMinResolution(e,f.instrumentTracks),length:u.determineTrackLength(e,f.instrumentTracks),name:f.name,tracks:f.instrumentTracks},this.populateSamples(e,f.instrumentTracks,p)}}catch(k){h.e(k)}finally{h.f()}if(this.sequences=this.createSequences(e,n),this.currentPatternName=null,p.length>0){var d,b="Failed to load samples for instruments:\n",j=function(t){var e,n=[],i=Object(s.a)(t);try{for(i.s();!(e=i.n()).done;){var r,o=Object(a.a)(e.value,2),u=o[0],c=o[1],l=!0,m=Object(s.a)(n);try{for(m.s();!(r=m.n()).done;){var p=Object(a.a)(r.value,2),h=p[0],f=p[1];if(u===h&&c===f){l=!1;break}}}catch(k){m.e(k)}finally{m.f()}l&&n.push([u,c])}}catch(k){i.e(k)}finally{i.f()}return n.sort(),n}(p),v=Object(s.a)(j);try{for(v.s();!(d=v.n()).done;){var g=Object(a.a)(d.value,2),O=g[0];b+="    -"+g[1],""!==O&&(b+=" ("+O+")"),b+="\n"}}catch(k){v.e(k)}finally{v.f()}b+="This is typically because they belong to commercial sound libraries. tabit's supported drumkits are\n"+l.join(", ")+".",alert(b)}}return Object(o.a)(t,[{key:"samplesReady",value:function(){return this.sampleCount===this.expectedSampleCount}},{key:"populateSamples",value:function(t,e,n){var i=this;this.sampleCount=0;for(var r=function(){var e=Object(a.a)(s[o],1)[0],r=t.filter((function(t){return t.id.toString()===e}));if(r.length>0){var u=r[0],p=m(Math.min(Math.max(0,u.volume),1));if(u.id in i.samples)return"continue";if("drumkit"in u&&"filename"in u&&l.includes(u.drumkit)){var h=u.filename.replace(".flac",".wav"),f=new c.c("/tabit/wav/"+u.drumkit+"/"+h,(function(){i.sampleCount++}));f.mute=u.muted;var d=new c.b(p,"normalRange");f.connect(d),d.connect(i.gain),i.samples[u.id]={player:f,gain:d},i.expectedSampleCount++}else if("drumkit"in u){var b=function(t,e){var n=e.toLowerCase();return n.includes("kick")?"The Black Pearl 1.0/PearlKick-Hard.wav":n.includes("stick")?"DeathMetal/16297_ltibbits_sticks_low_pitch.wav":n.includes("tom")?"TR808EmulationKit/808_Tom_Mid.wav":n.includes("clap")?"TR808EmulationKit/808_Clap.wav":n.includes("snare")?"GMRockKit/Snare-Soft.wav":n.includes("cowbell")?"GMRockKit/Cowbell-Softest.wav":null}(u.drumkit,u.name);if(null!==b){var j=new c.c("/tabit/wav/"+b,(function(){i.sampleCount++}));j.mute=u.muted;var v=new c.b(p,"normalRange");j.connect(v),v.connect(i.gain),i.samples[u.id]={player:j,gain:v},i.expectedSampleCount++}else n.push([u.drumkit,u.name])}else n.push(["",u.name])}},o=0,s=Object.entries(e);o<s.length;o++)r()}},{key:"createSequences",value:function(t,e){var n,r={},o=Object(s.a)(e);try{for(o.s();!(n=o.n()).done;){var a=n.value,l=u.determineMinResolution(t,a.instrumentTracks),m=u.determineTrackLength(t,a.instrumentTracks),h=p(this.patternDetails[a.name],this);r[a.name]=new c.d(h,Object(i.a)(Array(m/l).keys()),c.e("4n")*(l/48)),r[a.name]._part.mute=!0,r[a.name].start(0)}}catch(f){o.e(f)}finally{o.f()}return r}},{key:"setActivePattern",value:function(t){var e=this,n=null!==this.currentPatternName?this.currentPatternName:null,i=this.patternDetails[t].length,r=null!==n?this.patternDetails[n]:null,o=c.f.loopEnd-c.f.toSeconds(c.f.position),s=function(o){null!==n&&(e.sequences[n]._part.mute=!0),null!==n&&r===i||c.f.setLoopPoints(0,c.e("4n")*(i/48)),e.sequences[t]._part.mute=!1,e.currentPatternName=t};null!==n&&"started"===c.f.state&&o>0&&o<c.f.toSeconds(c.e("8n"))?c.f.scheduleOnce(s,c.e("0")):s()}},{key:"play",value:function(){c.g().then((function(){c.f.start()}))}},{key:"stop",value:function(){var t=this;"started"===c.f.state&&(c.f.stop(),this.onPatternTimeChange&&c.a.schedule((function(){t.onPatternTimeChange(null)}),c.f.now()))}},{key:"setMutedForInstrument",value:function(t,e){this.samples[t].player.mute=e}},{key:"setVolumeForInstrument",value:function(t,e){this.samples[t].gain.set({gain:m(e)})}},{key:"setTempo",value:function(t){c.f.bpm.value=t}}]),t}();e.a=h},184:function(t,e,n){"use strict";(function(t,i){var r=n(38),o=n(15),s=n(16),a=n(1),u=n(2),c=n(4),l=n(3),m=n(8),p=n(0),h=n.n(p),f=n(12),d=n(260),b=n(285),j=n(264),v=(n(348),n(457)),g=n(452),O=n(461),k=n(191),y=n(453),x=n(293),S=n(454),w=n(288),C=n(193),R=n(292),T=n(60),P=n(65),M=n(284),A=n.n(M),N=n(282),I=n.n(N),F=n(188),D=n.n(F),E=n(197),L=n(194),_=n(196),B=n(195),z=n(140),G=n(13),K=n(283),J=n.n(K),V=n(185),W=n(95),q=n(83),U=n(51),H=n(44),X=n(275),Y=n(109),$=n(276),Z=n(139),Q=n(277),tt=n(31),et=n(110),nt=n.n(et),it=n(187),rt=n.n(it),ot=n(280),st=n.n(ot),at=n(137),ut=n(281),ct=Object(O.a)(Object(k.a)({palette:{type:"dark",primary:{main:"#36d9be"},secondary:{main:"#f50057"}}})),lt=function(t){return t&&"keydown"===t.type&&("Tab"===t.key||"Shift"===t.key)},mt=function(t){return"https://cors-anywhere.herokuapp.com/"+function(t){return"https://jsonbase.com/tabit-song/"+t}(t)},pt={modal:{display:"flex",alignItems:"center",justifyContent:"center"},paper:{backgroundColor:ct.palette.background.paper,border:"2px solid #000",boxShadow:ct.shadows[5],padding:ct.spacing(2,4,3)}},ht=function(e){Object(c.a)(p,e);var n=Object(l.a)(p);function p(t){var e;Object(a.a)(this,p),e=n.call(this,t);var i=localStorage.getItem("tabit-history");return e.state={instruments:null,instrumentIndex:null,instrumentMask:null,patterns:null,formatSettings:Object.assign({},V.a),patternSettings:[],loadedFile:null,selectedPattern:null,settingsOpen:!1,patternsOpen:!1,progress:null,showSharingDialog:!1,showTitleOptions:void 0===e.props.match.params.song,permanentUrl:"",history:i?JSON.parse(i).sort((function(t,e){return e.date-t.date})):[]},e.pattern=h.a.createRef(),e}return Object(u.a)(p,[{key:"recordSongVisited",value:function(){var t=this.getExportState(),e=this.encodeState(t),n=nt()(e),i=Array.from(this.state.history),r=i.filter((function(e){return e.id===n&&e.name===t.songName}));if(0!==r.length)r[0].date=Date.now();else{var o={name:t.songName,id:n,date:Date.now(),content:e};i.push(o)}var s=i.sort((function(t,e){return e.date-t.date})).slice(0,10);this.setState({history:s},(function(){localStorage.setItem("tabit-history",JSON.stringify(s))}))}},{key:"fetchSong",value:function(t,e){var n=this;fetch(mt(t)).then((function(t){return t.json()})).then((function(i){var r=n.decodeState(i);if(nt()(i)!==t)throw new Error("Hash did not match");n.handleJson(e,r)})).catch((function(i){n.setState({showTitleOptions:!0}),alert("Song "+(null!==e&&void 0!==e?e:t)+" could not be found.")}))}},{key:"loadLocalSong",value:function(t){var e=this.decodeState(t.content);if(nt()(t.content)!==t.id)throw new Error("Hash did not match");this.handleJson(t.name,e)}},{key:"componentDidMount",value:function(){this.props.match.params.song&&this.fetchSong(this.props.match.params.song)}},{key:"getExportState",value:function(){return{instruments:this.state.instruments,instrumentIndex:this.state.instrumentIndex,patterns:this.state.patterns,formatSettings:this.state.formatSettings,patternSettings:this.state.patternSettings,songName:this.state.songName,version:"1.1.0"}}},{key:"save",value:function(){var t="download.tabit";if(this.state.loadedFile){var e=this.state.loadedFile.split(".");t=1===e.length?e[0]+".tabit":e.slice(0,e.length-1).join(".")+".tabit"}var n=JSON.stringify(this.getExportState(),null,4),i=new Blob([n],{type:"application/json"});Object($.saveAs)(i,t)}},{key:"encodeState",value:function(t){var e=JSON.stringify(this.getExportState());return{state:rt.a.deflateSync(e).toString("base64")}}},{key:"decodeState",value:function(e){var n=new t(e.state,"base64"),i=rt.a.inflateSync(n);return JSON.parse(i)}},{key:"share",value:function(){var t=this,e=this.encodeState(this.getExportState()),n=nt()(e),i=mt(n),r={method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)},o=window.origin+"/tabit/song/"+n;fetch(i,r).then((function(e){t.setState({permanentUrl:o,showSharingDialog:!0})})).catch((function(t){alert("Couldn't upload song at this time. Sorry for any inconvenience.")}))}},{key:"figurePatternSettings",value:function(t){return Array.from(t,(function(t){return U.a.guessPerPatternSettings(t.instrumentTracks)}))}},{key:"songNameFromFile",value:function(t){return null===t?null:t.includes(".")?t.split(".").slice(0,-1).join("."):t}},{key:"handleJson",value:function(t,e){var n=this,i=this.songNameFromFile(t);this.setState({instrumentIndex:e.instrumentIndex,instrumentMask:Object(W.b)(e.instrumentIndex,e.instruments),instruments:e.instruments,patterns:function(t){var e,n=[],i=Object(s.a)(t);try{for(i.s();!(e=i.n()).done;){for(var r=e.value,a={},u=0,c=Object.entries(r.instrumentTracks);u<c.length;u++){var l=Object(o.a)(c[u],2),m=l[0],p=l[1];a[m]=new Y.a(p.rep,p.resolution)}var h=Object.assign({},r);h.instrumentTracks=a,n.push(h)}}catch(f){i.e(f)}finally{i.f()}return n}(e.patterns),formatSettings:e.formatSettings,patternSettings:e.patternSettings,loadedFile:null!==t&&void 0!==t?t:e.loadedFile,selectedPattern:0===e.patterns.length?null:0,patternsOpen:0!==e.patterns.length,songName:null!==i&&void 0!==i?i:e.songName},(function(){n.audio=new Z.a(n.state.instrumentIndex,n.state.patterns,100,(function(t){n.onPatternTimeChange(t)})),n.audio.setActivePattern(n.state.patterns[n.state.selectedPattern].name),n.recordSongVisited()}))}},{key:"handleFileImport",value:function(t){var e=this;t.file.name.includes("h2song")?j.a.parseHydrogenPromise(t.content).then((function(n){var i,r=Object(q.c)(n.instruments,q.a,n.patterns),o=Object(q.b)(n.instruments,n.patterns),a=Object(s.a)(o);try{for(a.s();!(i=a.n()).done;){i.value.volume=.5}}catch(u){a.e(u)}finally{a.f()}e.setState({instrumentIndex:o,instrumentMask:Object(W.b)(o,r),instruments:r,patterns:n.patterns,patternSettings:e.figurePatternSettings(n.patterns),loadedFile:t.file.name,patternsOpen:!0,selectedPattern:0===n.patterns.length?null:0,songName:e.songNameFromFile(t.file.name)},(function(){e.audio=new Z.a(e.state.instrumentIndex,e.state.patterns,100,(function(t){e.onPatternTimeChange(t)})),e.audio.setActivePattern(e.state.patterns[e.state.selectedPattern].name),e.recordSongVisited()}))})).catch((function(e){alert("Failed to load file "+t.file.name+" with error "+e)})):Promise.resolve(t.content).then(JSON.parse).then((function(n){e.handleJson(t.file.name,n)})).catch((function(e){alert("Failed to load file "+t.file.name+" with error "+e)}))}},{key:"loadExample",value:function(){var t,e=this,n=function(t){var e,n=Object(s.a)(t.patterns);try{for(n.s();!(e=n.n()).done;){for(var i=e.value,r={},a=0,u=Object.entries(i.instrumentTracks);a<u.length;a++){var c=Object(o.a)(u[a],2),l=c[0],m=c[1];r[l]=new Y.a(m.rep,m.resolution)}i.instrumentTracks=r}}catch(p){n.e(p)}finally{n.f()}return t}(X),i=Object(q.c)(n.instruments,q.a,n.patterns),r=Object(q.b)(n.instruments,n.patterns),a=Object(s.a)(r);try{for(a.s();!(t=a.n()).done;){t.value.volume=.5}}catch(u){a.e(u)}finally{a.f()}this.setState({instrumentIndex:r,instrumentMask:Object(W.b)(r,i),instruments:i,patterns:n.patterns,selectedPattern:0===n.patterns.length?null:0,loadedFile:"kuva.example",patternsOpen:!0,patternSettings:this.figurePatternSettings(n.patterns)},(function(){e.audio=new Z.a(e.state.instrumentIndex,e.state.patterns,100,(function(t){e.onPatternTimeChange(t)})),e.audio.setActivePattern(e.state.patterns[e.state.selectedPattern].name)}))}},{key:"selectPattern",value:function(t){this.audio.setActivePattern(this.state.patterns[t].name),this.setState({selectedPattern:t})}},{key:"renderPattern",value:function(t,e){var n=this;return Object(m.jsxs)(h.a.Fragment,{children:[Object(m.jsx)(b.a,{instruments:this.state.instruments,tracks:t.instrumentTracks,config:e,active:this.state.progress,ref:this.pattern}),Object(m.jsx)(Q.a,{onPlay:function(){n.audio&&n.audio.play()},onStop:function(){n.audio&&n.audio.stop()},onTempoChange:function(t){n.audio&&n.audio.setTempo(t)}})]})}},{key:"onPatternTimeChange",value:function(t){this.pattern.current.onPatternTimeChange(t)}},{key:"getTrackLength",value:function(t){for(var e=48,n=0,i=Object.entries(t.instrumentTracks);n<i.length;n++){var r=Object(o.a)(i[n],2)[1];e=Math.max(e,r.length())}return e}},{key:"getResolution",value:function(t){for(var e=48,n=0,i=Object.entries(t.instrumentTracks);n<i.length;n++){var r=Object(o.a)(i[n],2)[1];e=Math.min(e,r.resolution)}return e}},{key:"renderTitlePage",value:function(){var t=this,e=null!=this.state.patterns&&0===this.state.patterns.length?Object(m.jsxs)(v.a,{severity:"error",children:[this.state.loadedFile," contained no patterns! Try another."]}):"",n=Object(m.jsxs)(h.a.Fragment,{children:[Object(m.jsx)(P.a,{variant:"contained",onClick:this.loadExample.bind(this),style:{margin:"1em"},children:"Load example"}),Object(m.jsx)(d.a,{style:{margin:"1em"},variant:"contained",onImport:this.handleFileImport.bind(this),accept:".tabit,.h2song"}),e]}),i=Object(m.jsxs)(h.a.Fragment,{children:[Object(m.jsx)("p",{children:" Loading song... "}),Object(m.jsx)(g.a,{})]});return Object(m.jsxs)(h.a.Fragment,{children:[Object(m.jsxs)("div",{children:[Object(m.jsx)("h2",{children:"tabit"}),Object(m.jsx)("p",{children:"I read .h2songs and write tab"}),this.state.showTitleOptions?n:i]}),Object(m.jsx)("div",{style:{position:"absolute",bottom:0},children:Object(m.jsxs)("p",{children:["tabit relies on publicly available sound libraries listed at ",Object(m.jsx)("a",{href:"https://github.com/andrew-murray/tabit",children:"https://github.com/andrew-murray/tabit"})]})}),this.state.history.length>0?Object(m.jsx)(ut.a,{data:this.state.history,onClick:function(e){t.loadLocalSong(e)}}):""]})}},{key:"renderPatternDrawer",value:function(t,e){var n,i=this,r=this.props,o=function(t){lt(t)||i.setState({patternsOpen:!1})};return Object(m.jsxs)(x.a,{disableBackdropTransition:!t,disableDiscovery:t,className:r.drawer,variant:e?void 0:"persistent",open:this.state.patternsOpen,onOpen:function(t){lt(t)||i.setState({patternsOpen:!0})},onClose:o,children:[Object(m.jsx)("div",{className:r.drawerHeader,children:Object(m.jsx)(T.a,{onClick:o,children:Object(m.jsx)(I.a,{})})}),Object(m.jsx)(E.a,{}),Object(m.jsx)("div",{className:r.drawerContainer,children:Object(m.jsx)(w.a,{children:(null!==(n=this.state.patterns)&&void 0!==n?n:[]).map((function(t,e){return Object(m.jsx)(C.a,{button:!0,onClick:function(){return i.selectPattern(e)},children:Object(m.jsx)(R.a,{primary:t.name})},"drawer-pattern"+e.toString())}))})})]})}},{key:"renderSettingsDrawer",value:function(t,e,n){var i=this,r=this.props,s=function(t){lt(t)||i.setState({settingsOpen:!1})},a=this.state.patterns[this.state.selectedPattern],u={name:a.name,resolution:a.resolution,length:this.getTrackLength(a)};return Object(m.jsxs)(x.a,{disableBackdropTransition:!t,disableDiscovery:t,className:r.drawer,variant:e?void 0:"persistent",anchor:"right",open:this.state.settingsOpen,onOpen:function(t){lt(t)||i.setState({settingsOpen:!0})},onClose:s,classes:{paper:r.drawerPaper},children:[Object(m.jsx)("div",{className:r.drawerHeader,children:Object(m.jsx)(T.a,{onClick:s,children:Object(m.jsx)(D.a,{})})}),Object(m.jsx)(E.a,{}),Object(m.jsx)(V.b,{onChange:function(t){for(var e=Array.from(i.state.patternSettings),n=Object.assign({},i.state.formatSettings),r=0,s=Object.entries(t);r<s.length;r++){var a=Object(o.a)(s[r],2),u=a[0],c=a[1];u in e[i.state.selectedPattern]?e[i.state.selectedPattern][u]=c:n[u]=c}i.setState({formatSettings:n,patternSettings:e})},settings:n,pattern:u}),Object(m.jsx)(P.a,{style:{backgroundColor:"white",color:ct.palette.background.default},onClick:function(t){i.save()},children:"Download"}),Object(m.jsx)(E.a,{}),Object(m.jsx)(P.a,{style:{backgroundColor:"white",color:ct.palette.background.default},onClick:function(t){i.share()},children:"Share"})]})}},{key:"renderSharingDialog",value:function(){var t=this;return Object(m.jsx)(L.a,{open:this.state.showSharingDialog,onClose:function(e){t.setState({showSharingDialog:!1})},"aria-labelledby":"alert-dialog-title","aria-describedby":"alert-dialog-description",children:Object(m.jsxs)(B.a,{children:[Object(m.jsx)(z.a,{id:"alert-dialog-description",children:"Your song is available at"}),Object(m.jsxs)(z.a,{children:[this.state.permanentUrl,Object(m.jsx)(T.a,{onClick:function(e){st()(t.state.permanentUrl)},children:Object(m.jsx)(J.a,{})})]}),Object(m.jsx)(_.a,{children:Object(m.jsx)(P.a,{onClick:function(e){t.setState({showSharingDialog:!1})},children:"Close"})})]})})}},{key:"renderMainContent",value:function(){var t=this;if(null==this.state.patterns||0===this.state.patterns.length)return this.renderTitlePage();var e=this.state.patterns[this.state.selectedPattern],n=Object.assign(Object.assign({},this.state.formatSettings),this.state.patternSettings[this.state.selectedPattern]),o=this.renderPattern(e,n),s=this.props,a=i.browser&&/iPad|iPhone|iPod/.test(navigator.userAgent),u=Object(at.a)(),c=u?12:8;return Object(m.jsxs)(h.a.Fragment,{children:[this.renderSharingDialog(),Object(m.jsxs)("div",{style:{display:"flex",width:"95%"},children:[Object(m.jsx)(T.a,{color:"inherit","aria-label":"open pattern list",edge:"start",onClick:function(e){t.setState({patternsOpen:!0})},className:Object(f.a)(Object(r.a)({},s.hide,!this.state.patternsOpen)),children:Object(m.jsx)(D.a,{})}),Object(m.jsx)("div",{className:"content-title",style:{flexGrow:1}}),Object(m.jsx)(T.a,{color:"inherit","aria-label":"open settings",edge:"end",onClick:function(e){t.setState({settingsOpen:!0})},className:Object(f.a)(this.state.settingsOpen&&s.hide),children:Object(m.jsx)(A.a,{})})]}),o,Object(m.jsxs)(H.a,{container:!0,children:[Object(m.jsx)(H.a,{item:!0,xs:(12-c)/2}),Object(m.jsx)(H.a,{item:!0,xs:c,children:Object(m.jsx)(W.a,{instruments:this.state.instruments,instrumentIndex:this.state.instrumentIndex,instrumentMask:this.state.instrumentMask,onChange:function(e){t.setState({instruments:e,instrumentMask:Object(W.b)(t.state.instrumentIndex,e)})},onVolumeEvent:function(e){if("volume"in e){var n=t.state.instrumentIndex[e.instrument].id;t.audio.setVolumeForInstrument(n,e.volume)}else if("muted"in e){var i=t.state.instrumentIndex[e.instrument].id;t.audio.setMutedForInstrument(i,e.muted)}}})}),Object(m.jsx)(H.a,{item:!0,xs:(12-c)/2})]}),this.renderPatternDrawer(a,u),this.renderSettingsDrawer(a,u,n)]})}},{key:"render",value:function(){var t=this.renderMainContent();return Object(m.jsx)("div",{className:"App",children:Object(m.jsxs)(y.a,{theme:ct,children:[Object(m.jsx)(S.a,{}),t]})})}}]),p}(h.a.Component);e.a=Object(G.a)(pt)(Object(tt.f)(ht))}).call(this,n(68).Buffer,n(69))},185:function(t,e,n){"use strict";n.d(e,"b",(function(){return x})),n.d(e,"a",(function(){return S}));var i=n(38),r=n(10),o=n(8),s=(n(0),n(192)),a=n(34),u=n(462),c=n(443),l=n(441),m=n(445),p=n(289),h=n(444),f=n(456),d=n(51),b=n(267),j=n.n(b),v=n(460),g=n(446),O=n(44),k=Object(s.a)((function(t){return{formControl:{margin:t.spacing(1),minWidth:120}}}));function y(t){var e=t.replace(/([A-Z])/g," $1");return e[0].toUpperCase()+e.slice(1)}function x(t){var e=k(t),n=Object(a.a)();function s(t){return" "===t?"space":t}function b(t){return"space"===t?" ":t}var x=function(e,n){var o=Object(r.a)(Object(r.a)({},t.settings),{},Object(i.a)({},e,n));t.onChange(o)},S=function(e){var n=Object(r.a)(Object(r.a)({},t.settings),{},Object(i.a)({},e.target.name,e.target.checked));t.onChange(n)};function w(n,i){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:b,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:s,m="form-control-"+n+"-id";return Object(o.jsxs)(l.a,{variant:"filled",className:e.formControl,id:m,children:[Object(o.jsx)(u.a,{id:"settings-option-{name}",children:n}),Object(o.jsx)(f.a,{labelId:"settings-option-"+n+"-labelID",id:"settings-option-"+n+"-id",value:a(t.settings[n]),name:n,onChange:function(t){return x(t.target.name,r(t.target.value))},children:i.map((function(t){return Object(o.jsx)(c.a,{value:a(t),children:a(t)},"settings-menu-item-"+n+"-"+t)}))})]},m)}for(var C=[],R=0,T=[2,3,4,5,6,7,8,14,16,32];R<T.length;R++){var P=48*T[R];P%t.settings.beatResolution===0&&P<=t.pattern.length&&C.push(P)}C.includes(t.pattern.length)||(C.push(t.pattern.length),C.sort());for(var M=[],A=0,N=[24,36,48,72,96];A<N.length;A++){var I=N[A];I%t.pattern.resolution===0&&t.settings.lineResolution%I===0&&M.push(I)}return Object(o.jsxs)(m.a,{className:e.root,children:[d.a.FORMAT_CONFIG_STRINGS.map((function(t){return w(t[0],t[1])})).reduce((function(t,e){return[t,e]})),d.a.FORMAT_CONFIG_BOOLS.map((function(e){return n=e,Object(o.jsx)(p.a,{control:Object(o.jsx)(h.a,{checked:t.settings[n],onChange:S,name:n}),label:y(n)},"switch-"+n);var n})).reduce((function(t,e){return[t,e]})),Object(o.jsx)("div",{style:{backgroundColor:"white",color:n.palette.background.default},children:Object(o.jsxs)("p",{children:[" ",t.pattern.name+" Options"," "]})}),w("beatResolution",M,(function(t){return t.toString()}),(function(t){return parseInt(t)})),w("lineResolution",C,(function(e){return t.settings.beatResolution*parseInt(e)}),(function(e){return(e/t.settings.beatResolution).toString()})),Object(o.jsxs)(O.a,{container:!0,children:[Object(o.jsx)(O.a,{item:!0,xs:8}),Object(o.jsx)(O.a,{item:!0,xs:4,children:Object(o.jsx)(v.a,{title:"Only options that produce lines made up of 'n' whole beats (no part-beats) are shown. If the options displayed for either lineResolution or beatResolution are too restrictive, try changing the other option. If lineResolution only results in one line, more options for beatResolution will be shown.","aria-label":"help",children:Object(o.jsx)(g.a,{children:Object(o.jsx)(j.a,{})})})})]})]})}var S=d.a.DEFAULT_FORMAT_CONFIG},260:function(t,e,n){"use strict";var i=n(10),r=n(58),o=n(1),s=n(2),a=n(4),u=n(3),c=n(8),l=n(0),m=n.n(l),p=n(65),h=function(t){Object(a.a)(n,t);var e=Object(u.a)(n);function n(t){var i;return Object(o.a)(this,n),(i=e.call(this,t)).hiddenFileInput=m.a.createRef(),i}return Object(s.a)(n,[{key:"onChange",value:function(t){var e=this,n=t.target.files[0],i=new FileReader;i.onload=function(t){e.props.onImport&&e.props.onImport({file:n,content:t.target.result})},i.readAsText(n)}},{key:"render",value:function(){var t=this,e=Object(i.a)({},this.props),n=(e.onImport,e.accept),o=Object(r.a)(e,["onImport","accept"]);return Object(c.jsxs)(m.a.Fragment,{children:[Object(c.jsx)(p.a,Object(i.a)(Object(i.a)({onClick:function(e){t.hiddenFileInput.current.click()}},o),{},{children:"Import File"})),Object(c.jsx)("input",{type:"file",hidden:!0,accept:n,onChange:function(e){return t.onChange(e)},ref:this.hiddenFileInput})]})}}]),n}(m.a.Component);e.a=h},264:function(t,e,n){"use strict";var i=n(9),r=n.n(i),o=n(17),s=n(19),a=n(15),u=n(16),c=n(109),l=n(265),m=n.n(l),p=n(132);function h(t,e){var n=Array.from(t.notes,(function(t){return t.position}));return Object(p.a)(n,e)}function f(t){var e=t.song.instrumentList[0].instrument,n=Array.from(e,(function(t){var e=t.instrumentComponent[0],n={id:parseInt(t.id),name:t.name[0],volume:parseFloat(t.volume),muted:"true"===t.isMuted[0],gain:parseFloat(t.gain),drumkit:t.drumkit[0]};return"layer"in e&&(n.filename=e.layer[0].filename[0]),n})),i=t.song.patternList[0].pattern,r=Array.from(i,(function(t){var e=t.noteList[0].note,n=parseInt(t.size),i=[];return e&&(i=(i=Array.from(e,(function(t){return{position:parseInt(t.position),instrument:parseInt(t.instrument)}}))).filter((function(t){return t.position<n}))),{size:n,name:t.name[0],notes:i}})),o=Array.from(r,(function(t){var e,i=h(t,t.size),r={},o=Object(u.a)(n);try{var s=function(){var n=e.value,o=t.notes.filter((function(t){return t.instrument===n.id})),s=Array.from(o,(function(t){return t.position}));r[n.id.toString()]=c.a.fromPositions(s,t.size,i)};for(o.s();!(e=o.n()).done;)s()}catch(a){o.e(a)}finally{o.f()}return t.resolution=i,t.instrumentTracks=r,t}));if(t.song.virtualPatternList){var l=t.song.virtualPatternList[0].pattern;if(l){for(var m={},p=0,f=Array.from(l);p<f.length;p++){var d=f[p],b=d.name[0],j=Array.from(d.virtual);m[b]=new Set(j)}for(var v=0;v<20;++v){for(var g={},O=!1,k=0,y=Object.entries(m);k<y.length;k++){var x,S=Object(a.a)(y[k],2),w=S[0],C=S[1],R=new Set(C),T=Object(u.a)(R);try{for(T.s();!(x=T.n()).done;){var P=x.value;P in m&&(R=new Set([].concat(Object(s.a)(R),Object(s.a)(m[P]))))}}catch(I){T.e(I)}finally{T.f()}O=O||R.size!==C.size,g[w]=R}if(!O)break;if(20===v)throw new Error("Reached max virtual_pattern recursion depth.");m=g}for(var M=function(){var t,e=Object(a.a)(N[A],2),n=e[0],i=e[1],r=o.find((function(t){return t.name===n})),s=Object(u.a)(i);try{var c=function(){for(var e=t.value,n=o.find((function(t){return t.name===e})),i=0,s=Object.entries(n.instrumentTracks);i<s.length;i++){var u=Object(a.a)(s[i],2),c=u[0],l=u[1];if(c in r.instrumentTracks){var m=r.instrumentTracks[c].aggregate(l);m.rep.length=r.size/m.resolution,r.instrumentTracks[c]=m}else{var p=l.format(r.resolution);p.length=r.size/r.resolution,r.instrumentTracks[c]=p}}};for(s.s();!(t=s.n()).done;)c()}catch(I){s.e(I)}finally{s.f()}var l=h(r,r.size);r.resolution=l;for(var m=0,p=Object.entries(r.instrumentTracks);m<p.length;m++){var f=Object(a.a)(p[m],2),d=f[0],b=f[1];r[d]=b.format(l)}},A=0,N=Object.entries(m);A<N.length;A++)M()}}return{instruments:n,patterns:o}}function d(){return(d=Object(o.a)(r.a.mark((function t(e){var n;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=new m.a.Parser,t.abrupt("return",n.parseStringPromise(e).then(f));case 2:case"end":return t.stop()}}),t)})))).apply(this,arguments)}var b={parseHydrogenPromise:function(t){return d.apply(this,arguments)}};e.a=b},275:function(t){t.exports=JSON.parse('{"instruments":[{"id":23,"name":"Stick","volume":0.99569,"muted":false,"gain":1,"drumkit":"GMRockKit","filename":"SideStick-Softest.wav"},{"id":24,"name":"Kick Short","volume":1,"muted":false,"gain":1,"drumkit":"TR808EmulationKit","filename":"808_Kick_Short.flac"},{"id":20,"name":"Stick","volume":0.193966,"muted":false,"gain":1,"drumkit":"DeathMetal"},{"id":26,"name":"Stick","volume":0.99569,"muted":false,"gain":1,"drumkit":"GMRockKit","filename":"SideStick-Softest.wav"},{"id":25,"name":"Kick Short","volume":1,"muted":false,"gain":1,"drumkit":"TR808EmulationKit","filename":"808_Kick_Short.flac"},{"id":22,"name":"tom02","volume":0.65,"muted":false,"gain":1,"drumkit":"DeathMetal"},{"id":27,"name":"snare","volume":0.49,"muted":false,"gain":1,"drumkit":"DeathMetal","filename":"014b.WAV"},{"id":13,"name":"Snare 1","volume":0.35,"muted":false,"gain":0.4,"drumkit":"DeathMetal"},{"id":10,"name":"Djembe4 Slap","volume":0.12931,"muted":false,"gain":1,"drumkit":"circAfrique v4","filename":"Djembe4 Slap.wav"},{"id":11,"name":"Djembe4 Tone","volume":0.12931,"muted":false,"gain":0.95,"drumkit":"circAfrique v4","filename":"Djembe4 Tone.wav"},{"id":12,"name":"Djembe4 Bass","volume":0.181034,"muted":false,"gain":1.5,"drumkit":"circAfrique v4","filename":"Djembe4 Bass.wav"},{"id":16,"name":"Shaker","volume":0.232759,"muted":false,"gain":2.2,"drumkit":"TR808EmulationKit","filename":"808_Shaker.flac"},{"id":21,"name":"Shaker","volume":1.5,"muted":false,"gain":2.45,"drumkit":"TR808EmulationKit","filename":"808_Shaker.flac"}],"patterns":[{"size":384,"name":"k-1","notes":[{"position":0,"instrument":21},{"position":0,"instrument":24},{"position":0,"instrument":26},{"position":0,"instrument":11},{"position":12,"instrument":21},{"position":24,"instrument":11},{"position":24,"instrument":21},{"position":24,"instrument":24},{"position":24,"instrument":26},{"position":24,"instrument":27},{"position":36,"instrument":21},{"position":36,"instrument":11},{"position":48,"instrument":21},{"position":48,"instrument":11},{"position":48,"instrument":23},{"position":48,"instrument":26},{"position":48,"instrument":27},{"position":60,"instrument":24},{"position":72,"instrument":10},{"position":72,"instrument":21},{"position":72,"instrument":26},{"position":84,"instrument":25},{"position":96,"instrument":23},{"position":96,"instrument":26},{"position":108,"instrument":25},{"position":120,"instrument":12},{"position":120,"instrument":25},{"position":144,"instrument":12},{"position":144,"instrument":21},{"position":144,"instrument":23},{"position":144,"instrument":25},{"position":144,"instrument":27},{"position":156,"instrument":21},{"position":168,"instrument":21},{"position":180,"instrument":27},{"position":192,"instrument":11},{"position":192,"instrument":21},{"position":192,"instrument":24},{"position":192,"instrument":26},{"position":216,"instrument":12},{"position":216,"instrument":21},{"position":216,"instrument":24},{"position":216,"instrument":26},{"position":216,"instrument":27},{"position":240,"instrument":11},{"position":240,"instrument":23},{"position":240,"instrument":26},{"position":240,"instrument":27},{"position":252,"instrument":12},{"position":252,"instrument":24},{"position":264,"instrument":21},{"position":264,"instrument":27},{"position":276,"instrument":11},{"position":276,"instrument":25},{"position":288,"instrument":12},{"position":288,"instrument":21},{"position":288,"instrument":24},{"position":288,"instrument":25},{"position":300,"instrument":21},{"position":312,"instrument":11},{"position":312,"instrument":23},{"position":312,"instrument":26},{"position":324,"instrument":12},{"position":324,"instrument":21},{"position":324,"instrument":24},{"position":324,"instrument":25},{"position":336,"instrument":21},{"position":336,"instrument":27},{"position":360,"instrument":21},{"position":360,"instrument":10},{"position":360,"instrument":23},{"position":360,"instrument":26},{"position":360,"instrument":27},{"position":372,"instrument":21},{"position":372,"instrument":27}],"resolution":12,"instrumentTracks":{"10":{"rep":[0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0],"resolution":12},"11":{"rep":[1,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,1,0,0,1,0,0,1,0,0,0,0,0],"resolution":12},"12":{"rep":[0,0,0,0,0,0,0,0,0,0,1,0,1,0,0,0,0,0,1,0,0,1,0,0,1,0,0,1,0,0,0,0],"resolution":12},"13":{"rep":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"resolution":12},"16":{"rep":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"resolution":12},"20":{"rep":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"resolution":12},"21":{"rep":[1,1,1,1,1,0,1,0,0,0,0,0,1,1,1,0,1,0,1,0,0,0,1,0,1,1,0,1,1,0,1,1],"resolution":12},"22":{"rep":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"resolution":12},"23":{"rep":[0,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,1,0],"resolution":12},"24":{"rep":[1,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,1,0,1,0,0,1,0,0,1,0,0,1,0,0,0,0],"resolution":12},"25":{"rep":[0,0,0,0,0,0,0,1,0,1,1,0,1,0,0,0,0,0,0,0,0,0,0,1,1,0,0,1,0,0,0,0],"resolution":12},"26":{"rep":[1,0,1,0,1,0,1,0,1,0,0,0,0,0,0,0,1,0,1,0,1,0,0,0,0,0,1,0,0,0,1,0],"resolution":12},"27":{"rep":[0,0,1,0,1,0,0,0,0,0,0,0,1,0,0,1,0,0,1,0,1,0,1,0,0,0,0,0,1,0,1,1],"resolution":12}}},{"size":384,"name":"k-2","notes":[{"position":0,"instrument":12},{"position":0,"instrument":21},{"position":0,"instrument":24},{"position":0,"instrument":25},{"position":0,"instrument":27},{"position":12,"instrument":12},{"position":12,"instrument":24},{"position":12,"instrument":25},{"position":24,"instrument":12},{"position":24,"instrument":21},{"position":24,"instrument":24},{"position":24,"instrument":25},{"position":36,"instrument":21},{"position":48,"instrument":21},{"position":48,"instrument":10},{"position":48,"instrument":23},{"position":48,"instrument":26},{"position":48,"instrument":27},{"position":72,"instrument":21},{"position":84,"instrument":21},{"position":84,"instrument":27},{"position":96,"instrument":21},{"position":96,"instrument":23},{"position":96,"instrument":26},{"position":108,"instrument":21},{"position":108,"instrument":27},{"position":120,"instrument":11},{"position":120,"instrument":21},{"position":132,"instrument":10},{"position":132,"instrument":27},{"position":144,"instrument":23},{"position":144,"instrument":26},{"position":144,"instrument":27},{"position":156,"instrument":10},{"position":168,"instrument":12},{"position":168,"instrument":21},{"position":168,"instrument":24},{"position":168,"instrument":25},{"position":180,"instrument":12},{"position":180,"instrument":24},{"position":180,"instrument":25},{"position":192,"instrument":12},{"position":192,"instrument":21},{"position":192,"instrument":24},{"position":192,"instrument":25},{"position":192,"instrument":27},{"position":216,"instrument":21},{"position":216,"instrument":11},{"position":228,"instrument":11},{"position":228,"instrument":21},{"position":228,"instrument":27},{"position":240,"instrument":21},{"position":240,"instrument":23},{"position":240,"instrument":26},{"position":240,"instrument":27},{"position":252,"instrument":10},{"position":264,"instrument":21},{"position":264,"instrument":11},{"position":276,"instrument":21},{"position":276,"instrument":27},{"position":288,"instrument":11},{"position":288,"instrument":21},{"position":288,"instrument":23},{"position":288,"instrument":26},{"position":300,"instrument":11},{"position":312,"instrument":21},{"position":324,"instrument":10},{"position":336,"instrument":11},{"position":336,"instrument":23},{"position":336,"instrument":26},{"position":360,"instrument":21}],"resolution":12,"instrumentTracks":{"10":{"rep":[0,0,0,0,1,0,0,0,0,0,0,1,0,1,0,0,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0],"resolution":12},"11":{"rep":[0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,1,1,0,0,1,0,1,1,0,0,1,0,0,0],"resolution":12},"12":{"rep":[1,1,1,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"resolution":12},"13":{"rep":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"resolution":12},"16":{"rep":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"resolution":12},"20":{"rep":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"resolution":12},"21":{"rep":[1,0,1,1,1,0,1,1,1,1,1,0,0,0,1,0,1,0,1,1,1,0,1,1,1,0,1,0,0,0,1,0],"resolution":12},"22":{"rep":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"resolution":12},"23":{"rep":[0,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0],"resolution":12},"24":{"rep":[1,1,1,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"resolution":12},"25":{"rep":[1,1,1,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"resolution":12},"26":{"rep":[0,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0],"resolution":12},"27":{"rep":[1,0,0,0,1,0,0,1,0,1,0,1,1,0,0,0,1,0,0,1,1,0,0,1,0,0,0,0,0,0,0,0],"resolution":12}}},{"size":192,"name":"lightbulb","notes":[{"position":0,"instrument":24},{"position":12,"instrument":24},{"position":24,"instrument":24},{"position":36,"instrument":24},{"position":48,"instrument":24},{"position":96,"instrument":27},{"position":144,"instrument":24},{"position":160,"instrument":24},{"position":176,"instrument":24}],"resolution":4,"instrumentTracks":{"10":{"rep":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"resolution":4},"11":{"rep":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"resolution":4},"12":{"rep":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"resolution":4},"13":{"rep":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"resolution":4},"16":{"rep":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"resolution":4},"20":{"rep":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"resolution":4},"21":{"rep":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"resolution":4},"22":{"rep":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"resolution":4},"23":{"rep":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"resolution":4},"24":{"rep":[1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0],"resolution":4},"25":{"rep":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"resolution":4},"26":{"rep":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"resolution":4},"27":{"rep":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"resolution":4}}},{"size":192,"name":"break","notes":[{"position":24,"instrument":21},{"position":24,"instrument":11},{"position":24,"instrument":27},{"position":48,"instrument":21},{"position":48,"instrument":11},{"position":48,"instrument":27},{"position":96,"instrument":21},{"position":96,"instrument":11},{"position":96,"instrument":27},{"position":120,"instrument":21},{"position":120,"instrument":11},{"position":120,"instrument":27},{"position":144,"instrument":24},{"position":168,"instrument":21},{"position":168,"instrument":11},{"position":168,"instrument":24},{"position":168,"instrument":27}],"resolution":24,"instrumentTracks":{"10":{"rep":[0,0,0,0,0,0,0,0],"resolution":24},"11":{"rep":[0,1,1,0,1,1,0,1],"resolution":24},"12":{"rep":[0,0,0,0,0,0,0,0],"resolution":24},"13":{"rep":[0,0,0,0,0,0,0,0],"resolution":24},"16":{"rep":[0,0,0,0,0,0,0,0],"resolution":24},"20":{"rep":[0,0,0,0,0,0,0,0],"resolution":24},"21":{"rep":[0,1,1,0,1,1,0,1],"resolution":24},"22":{"rep":[0,0,0,0,0,0,0,0],"resolution":24},"23":{"rep":[0,0,0,0,0,0,0,0],"resolution":24},"24":{"rep":[0,0,0,0,0,0,1,1],"resolution":24},"25":{"rep":[0,0,0,0,0,0,0,0],"resolution":24},"26":{"rep":[0,0,0,0,0,0,0,0],"resolution":24},"27":{"rep":[0,1,1,0,1,1,0,1],"resolution":24}}},{"size":192,"name":"squash","notes":[{"position":0,"instrument":21},{"position":0,"instrument":12},{"position":0,"instrument":24},{"position":0,"instrument":27},{"position":48,"instrument":21},{"position":48,"instrument":12},{"position":48,"instrument":24},{"position":48,"instrument":27},{"position":96,"instrument":21},{"position":96,"instrument":12},{"position":96,"instrument":24},{"position":96,"instrument":27},{"position":144,"instrument":21},{"position":144,"instrument":12},{"position":144,"instrument":24},{"position":144,"instrument":27}],"resolution":48,"instrumentTracks":{"10":{"rep":[0,0,0,0],"resolution":48},"11":{"rep":[0,0,0,0],"resolution":48},"12":{"rep":[1,1,1,1],"resolution":48},"13":{"rep":[0,0,0,0],"resolution":48},"16":{"rep":[0,0,0,0],"resolution":48},"20":{"rep":[0,0,0,0],"resolution":48},"21":{"rep":[1,1,1,1],"resolution":48},"22":{"rep":[0,0,0,0],"resolution":48},"23":{"rep":[0,0,0,0],"resolution":48},"24":{"rep":[1,1,1,1],"resolution":48},"25":{"rep":[0,0,0,0],"resolution":48},"26":{"rep":[0,0,0,0],"resolution":48},"27":{"rep":[1,1,1,1],"resolution":48}}}]}')},277:function(t,e,n){"use strict";var i=n(8),r=n(0),o=n.n(r),s=n(60),a=n(278),u=n.n(a),c=n(279),l=n.n(c),m=n(294),p=n(44);e.a=function(t){return Object(i.jsxs)(o.a.Fragment,{children:[Object(i.jsxs)("div",{children:[Object(i.jsx)(s.a,{color:"primary","aria-label":"play",onClick:function(){t.onPlay&&t.onPlay()},children:Object(i.jsx)(u.a,{})}),Object(i.jsx)(s.a,{color:"secondary","aria-label":"stop",onClick:function(){t.onStop&&t.onStop()},children:Object(i.jsx)(l.a,{})})]}),Object(i.jsxs)(p.a,{container:!0,children:[Object(i.jsx)(p.a,{item:!0,xs:4}),Object(i.jsx)(p.a,{item:!0,xs:4,children:Object(i.jsx)(m.a,{defaultValue:100,min:60,step:1,max:180,onChange:function(e,n){t.onTempoChange&&t.onTempoChange(n)},valueLabelDisplay:"auto"})}),Object(i.jsx)(p.a,{item:!0,xs:4})]})]})}},281:function(t,e,n){"use strict";var i=n(19),r=n(8),o=(n(0),n(192)),s=n(288),a=n(193),u=n(292),c=Object(o.a)((function(t){return{root:{width:"100%",height:400,maxWidth:300,backgroundColor:t.palette.background.paper}}}));var l=[{name:"roudesann",id:"3b415c320894e531f4daa93711949e78c0aef281",date:Date.now()},{name:"groovy",id:"f23c52481af0c08f5037d820a0cf33e886061ffc",date:Date.now()},{name:"too_much",id:"e7db6989c558e201bceff225d796f0d6073047a9",date:Date.now()}];e.a=function(t){var e,n=c(),o=null!==(e=t.data)&&void 0!==e?e:l;return Object(r.jsxs)("div",{style:{maxHeight:200,overflow:"auto"},className:n.root,children:[Object(r.jsx)("div",{children:"Recently viewed"}),Object(r.jsx)(s.a,{children:Object(i.a)(o.keys()).map((function(e){return function(t){return Object(r.jsx)(a.a,{button:!0,style:t.style,onClick:t.onClick,children:Object(r.jsx)(u.a,{primary:t.name,secondary:new Date(t.date).toLocaleDateString()})},t.index)}({index:e,name:o[e].name,id:o[e].id,date:o[e].date,onClick:function(){t.onClick&&t.onClick(o[e])}})}))})]})}},285:function(t,e,n){"use strict";var i=n(19),r=n(1),o=n(2),s=n(4),a=n(3),u=n(8),c=n(0),l=n.n(c),m=n(51),p=n(66),h=n(13),f=function(t){return{root:{whiteSpace:"pre",fontFamily:"Roboto Mono",fontSize:"0.8rem","@media (min-width:800px)":{fontSize:"1rem"}}}},d=Object(h.a)(f)(p.a),b=function(t){Object(s.a)(n,t);var e=Object(a.a)(n);function n(t){var i;return Object(r.a)(this,n),(i=e.call(this,t)).state={},i}return Object(o.a)(n,[{key:"render",value:function(){var t=this,e=Object.values(this.props.tracks);if(0===e.length)return Object(u.jsx)(l.a.Fragment,{});var n=m.a.formatPatternString(this.props.instrument,this.props.tracks,this.props.config.restMark),r=e[0].resolution;if(this.props.config.lineResolution%this.props.config.beatResolution!==0&&n.length*r>this.props.config.lineResolution)throw new Error("This code only supports a beatResolution that divides the lineResolution");var o=m.a.chunkArray(n,this.props.config.lineResolution/r,0),s=this.props.config.lineResolution/this.props.config.beatResolution,a=this.props.config.beatResolution/r,c=o.map((function(t){return m.a.chunkArray(t,a)})),p=Object(i.a)(o.keys()),h=function(e,n,r){var o=Object(i.a)(n.keys());return Object(u.jsxs)(d,{children:[Object(u.jsx)(d,{variant:"subtitle1",component:"span",children:t.props.config.lineMark},"line-start-"+e),o.map((function(e){return Object(u.jsxs)(l.a.Fragment,{children:[Object(u.jsx)(d,{variant:"subtitle1",component:"span",className:e+r===t.props.activeNote?"activeNote":"",children:n[e].join("")},"span-beat-"+(e+r).toString()),Object(u.jsx)(d,{variant:"subtitle1",component:"span",children:t.props.config.showBeatMark&&e!==o[o.length-1]?t.props.config.beatMark:""},"span-beat-marker-"+(e+r).toString())]},"fragment-beat-"+(e+r).toString())})),Object(u.jsx)(d,{variant:"subtitle1",component:"span",children:t.props.config.lineMark},"line-end-"+e)]},"pattern-line-"+e)},f=m.a.createNumberMarker(this.props.config.numberRestMark,this.props.config.beatResolution,r,Math.min(this.props.config.lineResolution,o[0].length*r)),b=m.a.chunkArray(f,this.props.config.beatResolution/r);return Object(u.jsxs)(l.a.Fragment,{children:[this.props.config.showBeatNumbers?h("beat",b,0):"",p.map((function(t){return h(t.toString(),c[t],s*t)}))]})}}]),n}(l.a.Component),j=Object(h.a)(f)(b);var v=function(t){Object(s.a)(n,t);var e=Object(a.a)(n);function n(t){var i;return Object(r.a)(this,n),(i=e.call(this,t)).state={},i}return Object(o.a)(n,[{key:"render",value:function(){var t=function(t,e){var n=t?t.toLowerCase():"";return["h1","h2","h3","h4","h5","h6"].includes(n)?n:e}(this.props.headingLevel,"h4");return Object(u.jsxs)("article",{children:[Object(u.jsx)(t,{children:this.props.instrumentName}),Object(u.jsx)(j,{instrument:this.props.instrument,tracks:this.props.tracks,config:this.props.config,activeNote:this.props.activeNote})]})}}]),n}(l.a.Component),g=function(t){Object(s.a)(n,t);var e=Object(a.a)(n);function n(t){var i;return Object(r.a)(this,n),(i=e.call(this,t)).state={patternTime:void 0},i}return Object(o.a)(n,[{key:"onPatternTimeChange",value:function(t){null!==t&&void 0!==t?this.setState({patternTime:t}):this.setState({patternTime:void 0})}},{key:"render",value:function(){var t=this,e=this.props.classes,n=Object(i.a)(this.props.instruments.keys()),r=this.props.config.beatResolution;return Object(u.jsx)("div",{className:e.root,children:n.map((function(e){return Object(u.jsx)(v,{instrumentName:t.props.instruments[e][0],instrument:t.props.instruments[e][1],tracks:t.props.tracks,config:t.props.config,activeNote:void 0!==t.state.patternTime?Math.floor(t.state.patternTime/r):void 0},"part-"+e.toString())}))})}}]),n}(l.a.Component);e.a=Object(h.a)((function(t){return{root:{"margin-bottom":t.spacing(2),fontFamily:"Roboto Mono",textAlign:"left",whiteSpace:"pre","& .activeNote":{color:t.palette.primary.main}}}}))(g)},318:function(t,e,n){},336:function(t,e){},338:function(t,e){},348:function(t,e,n){},440:function(t,e,n){"use strict";n.r(e);var i=n(8),r=n(0),o=n.n(r),s=n(24),a=n.n(s),u=(n(318),n(183)),c=n(31),l=n(184);function m(){return Object(i.jsx)(u.a,{basename:"/tabit",children:Object(i.jsxs)(c.c,{children:[Object(i.jsx)(c.a,{path:"/song/:song",children:Object(i.jsx)(l.a,{})}),Object(i.jsx)(c.a,{path:"/",children:Object(i.jsx)(l.a,{})})]})})}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a.a.render(Object(i.jsx)(o.a.StrictMode,{children:Object(i.jsx)(m,{})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))},51:function(t,e,n){"use strict";var i=n(15),r=n(1),o=n(2),s=function(){function t(){Object(r.a)(this,t)}return Object(o.a)(t,null,[{key:"validateConfig",value:function(t,e){if(null!=e&&t.beatResolution%e!==0)throw new Error("patternResolution doesn't divide beatResolution");if(t.lineResolution<=0)throw new Error("config.lineResolution must be greater than zero")}},{key:"resolveConfig",value:function(e){for(var n=0,i=Object.keys(e);n<i.length;n++){var r=i[n];if(!t.DEFAULT_FORMAT_CONFIG.hasOwnProperty(r))throw new Error("passed unrecognised property "+r)}return Object.assign(Object.assign({},t.DEFAULT_FORMAT_CONFIG),e)}},{key:"chunkString",value:function(t,e){if(e<=0)throw new Error("chunkSize must be > 0");return t.match(new RegExp(".{1,"+e+"}","g"))}},{key:"chunkArray",value:function(t,e){if(e<=0)throw new Error("chunkSize must be > 0");for(var n=[],i=0;i<t.length;i+=e)n.push(t.slice(i,Math.min(i+e,t.length)));return n}},{key:"createNumberMarker",value:function(t,e,n,i){if(i<=0)throw new Error("lineLength <= 0");if(e%n!==0)throw new Error("patternResolution "+n.toString()+" does not divide beatResolution "+e.toString());for(var r=Math.ceil(i/e),o=Array.from(Array(i/n),(function(e){return t})),s=0;s<r;s++)o[s*(e/n)]=((s+1)%10).toString();return o}},{key:"formatLineWithMarkers",value:function(e,n,i,r){t.validateConfig(e);for(var o=e.beatResolution/i,s=r?function(t,e){return"<span class='note-"+(n=e,((n+="").length>=(i=4)?n:new Array(i-n.length+1).join("0")+n)+"'>")+t+"</span>";var n,i}:function(t,e){return t},a="",u=0;u<n.length;++u){var c=i*u;a+=s(n.charAt(u),c)}var l=e.showBeatMark?t.chunkString(a,o*s("X",0).length).join(e.beatMark):a;return e.lineMark+l+e.lineMark}},{key:"defaultLineResolution",value:function(t,e){var n=Object.values(t);if(0===n.length)return 384;var i=n[0].length(),r=i/e;return r<=12?i:r>32?768:[i,i/2,i/3,i/2,i,i/3,i,i/4,i/3,i/2,i,i/3,i/5,i,i/3,i/4,i,i/6,i,i/4][r-13]}},{key:"guessPerPatternSettings",value:function(e){return{lineResolution:t.defaultLineResolution(e,48),beatResolution:48}}},{key:"formatPatternString",value:function(t,e,n){var r=Object.values(e);if(0===r.length)return"";for(var o=r[0].length(),s=r[0].resolution,a=Array(o/s).fill(n),u=0;u<a.length;++u)for(var c=0,l=Object.entries(t);c<l.length;c++){var m=Object(i.a)(l[c],2),p=m[0],h=m[1],f=e[p];null!=f&&1===f.rep[u]&&(a[u]=h)}return a}},{key:"fromInstrumentAndTrack",value:function(e,n,i){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=t.resolveConfig(r),s=Object.values(n);if(0===s.length)return"";var a=t.formatPatternString(e,n,o.restMark),u=a.join(""),c=s[0].resolution,l=s[0].length(),m=t.chunkString(u,o.lineResolution/c),p=[];o.showBeatNumbers&&p.push(t.formatLineWithMarkers(o,t.createNumberMarker(o.numberRestMark,o.beatResolution,c,Math.min(o.lineResolution,l)).join(""),c,i));for(var h=0;h<m.length;++h)p.push(t.formatLineWithMarkers(o,m[h],c,i));return p.join("\n")}}]),t}();s.DEFAULT_FORMAT_CONFIG={restMark:"-",beatMark:"|",lineMark:"|",numberRestMark:"-",beatResolution:48,showBeatMark:!0,showBeatNumbers:!0,lineResolution:384},s.FORMAT_CONFIG_STRINGS=[["restMark",["-","."," "]],["numberRestMark",["-","."," "]]],s.FORMAT_CONFIG_BOOLS=["showBeatMark","showBeatNumbers"],e.a=s},83:function(t,e,n){"use strict";n.d(e,"b",(function(){return c})),n.d(e,"a",(function(){return o})),n.d(e,"c",(function(){return m}));var i=n(15),r=n(16),o={"Djembe Slap":"S","Djembe Tone":"t","Djembe Bass":"O","Snare Ghost":"x","Snare Accent":"X","Shaker Ghost":"x","Shaker Accent":"X",Click:"X",Bass:"O",Tom:"O",Default:"X"};function s(t){var e,n=[],i=Object(r.a)(t);try{for(i.s();!(e=i.n()).done;){var o=e.value,s=Object.assign({},o);s.name=s.name.toLowerCase(),n.push(s)}}catch(a){i.e(a)}finally{i.f()}return n}function a(t,e,n,i){var o=[];if(2===t.length){var s=t[0],a=t[1],u=s.volume>a.volume||s.volume===a.volume&&s.gain>a.gain,c={};c[s.id.toString()]=u?n:i,c[a.id.toString()]=u?i:n,o.push([e,c])}else{var l,m=Object(r.a)(t);try{for(m.s();!(l=m.n()).done;){var p=l.value,h={};h[p.id.toString()]=n,o.push([e,h])}}catch(f){m.e(f)}finally{m.f()}}return o}function u(t){var e,n=new Set,o=Object(r.a)(t);try{for(o.s();!(e=o.n()).done;)for(var s=e.value,a=0,u=Object.entries(s.instrumentTracks);a<u.length;a++){var c=Object(i.a)(u[a],2),l=c[0];c[1].empty()||n.add(parseInt(l))}}catch(m){o.e(m)}finally{o.f()}return n}function c(t,e){var n,i=u(e),o=[],s=Object(r.a)(t);try{for(s.s();!(n=s.n()).done;){var a=n.value;i.has(a.id)&&o.push(a)}}catch(c){s.e(c)}finally{s.f()}return o}function l(t,e){var n=e.toLowerCase();return n.includes("click")||n.includes("stick")?t.Click:n.includes("bass")||n.includes("kick")?t.Bass:n.includes("snare")?t["Snare Accent"]:n.includes("shaker")?t.Shaker:n.includes("tom")?t.Tom:n.includes("djembe")?n.includes("slap")?t["Djembe Slap"]:n.includes("tone")?t["Djembe Tone"]:t["Djembe Bass"]:t.Default}function m(t,e,n){var i=[];i=(i=(i=(i=i.concat(function(t,e,n){for(var i=s(t),r=u(n),o=i.filter((function(t){return r.has(t.id)&&!t.name.includes("djembe")&&(t.name.includes("click")||t.name.includes("stick")||t.name.includes("tom")||t.name.includes("bass")||t.name.includes("kick"))})),a=Array.from(o,(function(t){return t.name.includes("click")||t.name.includes("stick")})),c=1,l=1,m=[],p=0;p<Math.floor(o.length/2);++p)if(a[2*p]!==a[2*p+1]){var h=a[2*p]?o[2*p]:o[2*p+1],f=a[2*p]?o[2*p+1]:o[2*p],d=f.name.includes("tom"),b=d?"Tom":"Bass",j="";d?(j=b+(c>=2?" "+c.toString():""),c+=1):(j=b+(l>=2?" "+l.toString():""),l+=1);var v={};v[f.id.toString()]=e[b],v[h.id.toString()]=e.Click,m.push([j,v])}if(o.length%2!==0&&!a[o.length-1]){var g=o[o.length-1],O=g.name.includes("tom"),k=O?"Tom":"Bass",y="";O?(y=k+(c>=2?" "+c.toString():""),c+=1):(y=k+(l>=2?" "+l.toString():""),l+=1);var x={};x[g.id.toString()]=e[k],m.push([y,x])}return m}(t,e,n))).concat(function(t,e){var n=s(t).filter((function(t){return t.name.includes("djembe")}));if(0===n.length)return[];if(n.length<=3){for(var i=Array.from(n,(function(t){return t.name.includes("slap")})),r=Array.from(n,(function(t){return t.name.includes("tone")})),o=Array.from(n,(function(t){return t.name.includes("bass")})),a=0;a<n.length;++a)if(1!==i[a]+r[a]+o[a])return[];for(var u={},c=0;c<n.length;++c)i[c]?u[n[c].id.toString()]=e["Djembe Slap"]:r[c]?u[n[c].id.toString()]=e["Djembe Tone"]:o[c]&&(u[n[c].id.toString()]=e["Djembe Bass"]);return[["Djembe",u]]}return[]}(t,e))).concat(function(t,e){return a(s(t).filter((function(t){return t.name.includes("snare")})),"Snare",e["Snare Accent"],e["Snare Ghost"])}(t,e))).concat(function(t,e){return a(s(t).filter((function(t){return t.name.includes("shaker")})),"Shaker",e["Shaker Accent"],e["Shaker Ghost"])}(t,e));var o,c=u(n),m=Object(r.a)(t);try{for(m.s();!(o=m.n()).done;){var p=o.value;if(c.has(p.id)){var h,f=!1,d=Object(r.a)(i);try{for(d.s();!(h=d.n()).done;){var b=h.value;p.id.toString()in b[1]&&(f=!0)}}catch(v){d.e(v)}finally{d.f()}if(!1===f){var j={};j[p.id.toString()]=l(e,p.name),i.push([p.name,j])}}}}catch(v){m.e(v)}finally{m.f()}return i}},95:function(t,e,n){"use strict";n.d(e,"b",(function(){return st})),n.d(e,"a",(function(){return ot}));var i=n(19),r=n(1),o=n(2),s=n(4),a=n(3),u=n(15),c=n(8),l=n(0),m=n.n(l),p=n(192),h=n(289),f=n(459),d=n(448),b=n(450),j=n(96),v=n(451),g=n(449),O=n(141),k=n(274),y=n.n(k),x=n(186),S=n.n(x),w=n(65),C=n(60),R=n(273),T=n.n(R),P=n(295),M=n(194),A=n(196),N=n(195),I=n(140),F=n(291),D=n(13),E=n(66),L=n(44),_=n(269),B=n.n(_),z=n(270),G=n.n(z),K=n(271),J=n.n(K),V=n(272),W=n.n(V),q=n(268),U=n.n(q),H=n(294),X=n(137),Y=Object(p.a)((function(t){return{root:{display:"flex"}}})),$=Object(D.a)({root:{marginLeft:0,marginRight:0}})(h.a),Z=Object(D.a)({root:{padding:2}})(C.a),Q=Object(D.a)((function(t){return{root:{borderBottom:"none",textAlign:"center",paddingBottom:t.spacing(0)}}}))(j.a),tt=Object(D.a)((function(t){return{root:{textAlign:"center"}}}))(j.a);function et(t){var e=m.a.useState(!1),n=Object(u.a)(e,2),i=n[0],r=n[1],o=m.a.useState(100),s=Object(u.a)(o,2),a=s[0],l=s[1],p=m.a.useState(t.muted),h=Object(u.a)(p,2),f=h[0],d=h[1],b=m.a.useRef(null),j=t.height?t.height/3:24,v={height:3*j,position:"absolute",top:-j},g=Object.assign(i?{}:{visibility:"hidden",paddingLeft:"0px"},v),O=i?{visibility:"hidden"}:{},k=Object(X.a)();return Object(c.jsx)(U.a,{time:.5,onClickNHold:k?function(t,e){i||r(!0)}:function(t,e){i||r(!0),b&&b.current.dispatchEvent(e.nativeEvent)},onEnd:k?null:function(t){r(!1)},children:Object(c.jsxs)(Z,{disableRipple:!0,disableFocusRipple:!0,onClick:function(){d(!f),t.onMuteEvent(!f)},children:[Object(c.jsx)("div",{style:g,children:Object(c.jsx)(H.a,{defaultValue:100,orientation:"vertical","aria-labelledby":"vertical-slider",onChange:function(e,n){k&&r(!1),function(e,n){l(n),t.onChange&&t.onChange(n)}(0,n)},ref:b})}),Object(c.jsx)("div",{style:O,children:f?Object(c.jsx)(B.a,{fontSize:"small"}):a<10?Object(c.jsx)(G.a,{fontSize:"small"}):a<50?Object(c.jsx)(J.a,{fontSize:"small"}):Object(c.jsx)(W.a,{fontSize:"small"})})]})})}var nt=function(t){Object(s.a)(n,t);var e=Object(a.a)(n);function n(t){var i;return Object(r.a)(this,n),(i=e.call(this,t)).state={currentSymbol:null},i}return Object(o.a)(n,[{key:"render",value:function(){var t,e=this,n=function(t){e.setState({currentSymbol:null}),e.props.onCancel&&e.props.onCancel()};return Object(c.jsxs)(M.a,{open:this.props.open,onClose:n,"aria-labelledby":"form-dialog-title",children:[Object(c.jsx)(F.a,{id:"form-dialog-title"}),Object(c.jsxs)(N.a,{children:[Object(c.jsx)(I.a,{children:"Enter notation symbol"}),Object(c.jsx)(P.a,{autoFocus:!0,margin:"dense",id:"name",fullWidth:!0,value:null!==(t=this.state.currentSymbol)&&void 0!==t?t:this.props.value,onChange:function(t){e.setState({currentSymbol:t.target.value})}})]}),Object(c.jsxs)(A.a,{children:[Object(c.jsx)(w.a,{onClick:n,color:"primary",children:"Cancel"}),Object(c.jsx)(w.a,{onClick:function(t){null!==e.state.currentSymbol&&1===e.state.currentSymbol.length?e.props.onChange&&e.props.onChange(e.state.currentSymbol):alert('You selected an invalid symbol "'+e.state.currentSymbol+'".\nSymbols must be precisely 1 character.')},color:"primary",children:"Confirm"})]})]})}}]),n}(m.a.Component),it=function(t){Object(s.a)(n,t);var e=Object(a.a)(n);function n(t){var i;return Object(r.a)(this,n),(i=e.call(this,t)).state={currentName:null},i}return Object(o.a)(n,[{key:"render",value:function(){var t,e=this,n=function(){e.props.onCancel&&e.props.onCancel(),e.setState({currentName:null})};return Object(c.jsxs)(M.a,{open:this.props.open,onClose:n,"aria-labelledby":"form-dialog-title",children:[Object(c.jsx)(F.a,{id:"form-dialog-title"}),Object(c.jsxs)(N.a,{children:[Object(c.jsx)(I.a,{children:"Enter instrument name"}),Object(c.jsx)(P.a,{autoFocus:!0,margin:"dense",id:"name",fullWidth:!0,value:null!==(t=this.state.currentName)&&void 0!==t?t:this.props.value,onChange:function(t){e.setState({currentName:t.target.value})}})]}),Object(c.jsxs)(A.a,{children:[Object(c.jsx)(w.a,{onClick:n,color:"primary",children:"Cancel"}),Object(c.jsx)(w.a,{onClick:function(){null!==e.state.currentName?e.state.currentName.trim().length>0?(e.props.onChange&&e.props.onChange(e.state.currentName),e.setState({currentName:null})):alert('You selected an invalid instrument name "'+e.state.currentName+'".\nMust be non-empty.'):n()},color:"primary",children:"Confirm"})]})]})}}]),n}(m.a.Component);function rt(t){var e=Y(),n=function(e,n){return Object(c.jsx)(j.a,{align:"center",children:Object(c.jsx)($,{control:Object(c.jsx)(f.a,{checked:t.instrumentMask[e]===n,onChange:function(i){!function(e,n,i){var r=t.instrumentIndex[e].id,o=t.instruments.findIndex((function(t){return r in t[1]})),s=n;if(o!==s){var a=t.instruments[o],u=["",{}];if(null!=a){u[0]=a[0];for(var c=0,l=Object.keys(a[1]);c<l.length;c++){var m=l[c];m!==r.toString()&&(u[1][m]=a[1][m])}}var p=[t.instruments[s][0],Object.assign({},t.instruments[s][1])];p[1][r.toString()]=null!=a?a[1][r]:"X";for(var h=[],f=0;f<t.instruments.length;++f)f===o?h.push(u):f===s?h.push(p):h.push(t.instruments[f]);t.onChange(h)}}(e,n)},name:e+","+n.toString()})})},"instrumentPanel-cell-"+n.toString()+"-"+e.toString())},r=function(e){return Object(c.jsxs)(O.a,{children:[Object(c.jsxs)(j.a,{component:"th",scope:"row",children:[Object(c.jsx)(E.a,{children:t.instruments[e][0]}),Object(c.jsx)(Z,{onClick:function(n){!function(e){t.onEditRow&&t.onEditRow(e)}(e)},children:Object(c.jsx)(S.a,{fontSize:"small"})}),Object(c.jsx)(Z,{onClick:function(n){!function(e){t.onRemoveRow&&t.onRemoveRow(e)}(e)},children:Object(c.jsx)(T.a,{fontSize:"small"})})]},"instrumentPanel-row-"+e.toString()+"-name"),Object(i.a)(Array(t.instrumentMask.length).keys()).map((function(t){return n(t,e)}))]},"instrumentPanel-row-"+e.toString())};return Object(c.jsxs)(d.a,{className:e.table,"aria-label":"simple table",children:[Object(c.jsxs)(g.a,{children:[Object(c.jsxs)(O.a,{children:[Object(c.jsx)(Q,{children:" Instrument "},"instrumentPanel-row-instrument"),Object(i.a)(Array(t.instrumentIndex.length).keys()).map((function(e){return Object(c.jsx)(Q,{children:Object(c.jsx)(E.a,{children:t.instrumentIndex[e].name})},"instrumentPanel-row-header-cell-"+e.toString())}))]},"instrumentPanel-row-header"),Object(c.jsxs)(O.a,{children:[Object(c.jsx)(j.a,{},"instrumentPanel-row-instrument"),Object(i.a)(Array(t.instrumentIndex.length).keys()).map((function(e){return Object(c.jsx)(tt,{children:Object(c.jsxs)(L.a,{container:!0,children:[Object(c.jsx)(L.a,{item:!0,xs:6,children:Object(c.jsx)(Z,{onClick:function(n){!function(e){t.onEditColumn&&t.onEditColumn(e)}(e)},children:Object(c.jsx)(S.a,{fontSize:"small"})})}),Object(c.jsx)(L.a,{item:!0,xs:6,children:Object(c.jsx)(et,{muted:t.instrumentIndex[e].muted,onChange:function(n){t.onVolumeEvent({instrument:e,volume:n/100})},onMuteEvent:function(n){t.onVolumeEvent({instrument:e,muted:n})}})})]})},"instrumentPanel-row-controls-cell-"+e.toString())}))]},"instrumentPanel-row-controls")]}),Object(c.jsxs)(b.a,{children:[Object(i.a)(Array(t.instruments.length).keys()).map((function(t){return r(t)})),Object(c.jsx)(O.a,{children:Object(c.jsx)(j.a,{component:"th",scope:"row",children:Object(c.jsx)(C.a,{onClick:function(e){t.onAddRow&&t.onAddRow()},"aria-label":"add",children:Object(c.jsx)(y.a,{})})},"instrumentPanel-row-edit-cell")},"instrumentPanel-row-edit")]})]})}function ot(t){var e,n=m.a.useState(null),i=Object(u.a)(n,2),r=i[0],o=i[1],s=m.a.useState(null),a=Object(u.a)(s,2),l=a[0],p=a[1],h=function(e){if(null!==e){var n=t.instrumentIndex[r].id,i=t.instruments.findIndex((function(t){return n in t[1]})),s=Array.from(t.instruments);s[i][1][n]=e,t.onChange(s)}o(null)};return Object(c.jsxs)(m.a.Fragment,{children:[Object(c.jsx)(it,{open:null!==l,onCancel:function(){p(null)},onChange:function(e){!function(e){if(l===t.instruments.length){var n=[e,{}],i=Array.from(t.instruments);i.push(n),t.onChange(i)}else{var r=Array.from(t.instruments);r[l][0]=e,t.onChange(r)}p(null)}(e)},value:null!==l?(e=l,t.instruments[e][0]):null}),Object(c.jsx)(nt,{open:null!==r,onCancel:function(){h(null)},onChange:function(t){h(t)},value:null!==r?function(e){var n=t.instrumentIndex[r].id,i=t.instruments.findIndex((function(t){return n in t[1]}));return t.instruments[i][1][n]}():null}),Object(c.jsx)(v.a,{children:Object(c.jsx)(rt,{instrumentIndex:t.instrumentIndex,instrumentMask:t.instrumentMask,instruments:t.instruments,onEditColumn:function(t){o(t)},onEditRow:function(t){p(t)},onAddRow:function(){p(t.instruments.length)},onRemoveRow:function(e){!function(e){var n=t.instruments.slice(0,e).concat(t.instruments.slice(e+1));t.onChange(n)}(e)},onVolumeEvent:t.onVolumeEvent,onChange:t.onChange})})]})}function st(t,e){for(var n=Array(t.length),i=0;i<t.length;++i)for(var r=t[i].id,o=0;o<e.length;++o){var s=e[o];r.toString()in s[1]&&(n[i]=o)}return n}}},[[440,1,2]]]);
//# sourceMappingURL=main.f6620e27.chunk.js.map