(this.webpackJsonptabit=this.webpackJsonptabit||[]).push([[0],{119:function(t,e,n){"use strict";n.d(e,"b",(function(){return k})),n.d(e,"a",(function(){return y}));var r=n(30),i=n(9),a=n(0),o=n.n(a),s=n(167),u=n(27),l=n(256),c=n(240),m=n(237),p=n(242),f=n(169),h=n(241),d=n(252),v=n(47),g=Object(s.a)((function(t){return{formControl:{margin:t.spacing(1),minWidth:120},selectEmpty:{marginTop:t.spacing(2)}}}));function b(t){var e=t.replace(/([A-Z])/g," $1");return e[0].toUpperCase()+e.slice(1)}function k(t){var e=g(t),n=Object(u.a)();function a(t){return" "===t?"space":t}function s(t){return"space"===t?" ":t}var k=function(e,n){var a=Object(i.a)(Object(i.a)({},t.settings),{},Object(r.a)({},e,n));t.onChange(a)},y=function(e){var n=Object(i.a)(Object(i.a)({},t.settings),{},Object(r.a)({},e.target.name,e.target.checked));t.onChange(n)};function O(n,r){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:s,u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:a,p="form-control-"+n+"-id";return o.a.createElement(m.a,{variant:"filled",className:e.formControl,key:p,id:p},o.a.createElement(l.a,{id:"settings-option-{name}"},n),o.a.createElement(d.a,{labelId:"settings-option-"+n+"-labelID",id:"settings-option-"+n+"-id",value:u(t.settings[n]),name:n,onChange:function(t){return k(t.target.name,i(t.target.value))}},r.map((function(t){return o.a.createElement(c.a,{key:"settings-menu-item-"+n+"-"+t,value:u(t)},u(t))}))))}for(var S=[],j=0,E=[2,3,4,5,6,7,8];j<E.length;j++){var w=48*E[j];if(w%t.settings.beatResolution===0&&S.push(w),w>t.settings.length)break}for(var C=[],T=0,A=[24,48,96];T<A.length;T++){var M=A[T];M%t.pattern.resolution===0&&C.push(M)}return o.a.createElement(p.a,{className:e.root},v.a.FORMAT_CONFIG_STRINGS.map((function(t){return O(t[0],t[1])})).reduce((function(t,e){return[t,e]})),v.a.FORMAT_CONFIG_BOOLS.map((function(e){return n=e,o.a.createElement(f.a,{control:o.a.createElement(h.a,{checked:t.settings[n],onChange:y,name:n}),label:b(n),key:"switch-"+n});var n})).reduce((function(t,e){return[t,e]})),o.a.createElement("div",{style:{backgroundColor:"white",color:n.palette.background.default}},o.a.createElement("p",null," ",t.pattern.name+" Options"," ")),O("beatResolution",C,(function(t){return t.toString()}),(function(t){return parseInt(t)})),O("lineResolution",S,(function(e){return t.settings.beatResolution*parseInt(e)}),(function(e){return(e/t.settings.beatResolution).toString()})))}var y=v.a.DEFAULT_FORMAT_CONFIG},147:function(t,e,n){"use strict";(function(t){var r=n(30),i=n(14),a=n(15),o=n(1),s=n(2),u=n(4),l=n(3),c=n(0),m=n.n(c),p=n(11),f=n(148),h=n(153),d=n(154),v=(n(226),n(253)),g=n(122),b=n(249),k=n(177),y=n(250),O=n(239),S=n(168),j=n(248),E=n(57),w=n(56),C=n(162),T=n.n(C),A=n(163),M=n.n(A),P=n(121),x=n.n(P),R=n(176),I=n(119),F=n(66),D=n(55),_=n(47),N=n(97),B=n(158),L=n(75),z=n(159),G=n(164),K=Object(g.a)({palette:{type:"dark",primary:{main:"#36d9be"},secondary:{main:"#f50057"}}}),q=function(e){Object(u.a)(c,e);var n=Object(l.a)(c);function c(t){var e;return Object(o.a)(this,c),(e=n.call(this,t)).state={instruments:null,instrumentIndex:null,instrumentMask:null,patterns:null,formatSettings:Object.assign({},I.a),patternSettings:[],loadedFile:null,selectedPattern:null,settingsOpen:!1,patternsOpen:!1,progress:null},e}return Object(s.a)(c,[{key:"getExportState",value:function(){return{instruments:this.state.instruments,instrumentIndex:this.state.instrumentIndex,patterns:this.state.patterns,formatSettings:this.state.formatSettings,patternSettings:this.state.patternSettings}}},{key:"save",value:function(){var t="download.tabit";if(this.state.loadedFile){var e=this.state.loadedFile.split(".");t=1===e.length?e[0]+".tabit":e.slice(0,e.length-1).join(".")+".tabit"}var n=JSON.stringify(this.getExportState(),null,4),r=new Blob([n],{type:"application/json"});Object(z.saveAs)(r,t)}},{key:"figurePatternSettings",value:function(t){return Array.from(t,(function(t){return _.a.guessPerPatternSettings(t.instrumentTracks)}))}},{key:"handleFileImport",value:function(t){var e=this;if(t.file.name.includes("h2song"))d.a.parseHydrogenPromise(t.content).then((function(n){var r=Object(D.c)(n.instruments,D.a,n.patterns),i=Object(D.b)(n.instruments,n.patterns);e.setState({instrumentIndex:i,instrumentMask:Object(F.b)(i,r),instruments:r,patterns:n.patterns,patternSettings:e.figurePatternSettings(n.patterns),loadedFile:t.file.name,patternsOpen:!0,selectedPattern:0===n.patterns.length?null:0})})).catch((function(e){alert("Failed to load file "+t.file.name+" with error "+e)}));else{var n=function(t){var e,n=[],r=Object(a.a)(t);try{for(r.s();!(e=r.n()).done;){for(var o=e.value,s={},u=0,l=Object.entries(o.instrumentTracks);u<l.length;u++){var c=Object(i.a)(l[u],2),m=c[0],p=c[1];s[m]=new L.a(p.rep,p.resolution)}var f=Object.assign({},o);f.instrumentTracks=s,n.push(f)}}catch(h){r.e(h)}finally{r.f()}return n};Promise.resolve(t.content).then(JSON.parse).then((function(r){e.setState({instrumentIndex:r.instrumentIndex,instrumentMask:Object(F.b)(r.instrumentIndex,r.instruments),instruments:r.instruments,patterns:n(r.patterns),formatSettings:r.formatSettings,patternSettings:r.patternSettings,loadedFile:t.file.name,selectedPattern:0===r.patterns.length?null:0,patternsOpen:0!==r.patterns.length})})).catch((function(e){alert("Failed to load file "+t.file.name+" with error "+e)}))}}},{key:"selectPattern",value:function(t){this.setState({selectedPattern:t})}},{key:"renderPattern",value:function(t,e){return m.a.createElement(m.a.Fragment,null,m.a.createElement(h.a,{instruments:this.state.instruments,tracks:t.instrumentTracks,config:e,active:this.state.progress}),m.a.createElement(G.a,{instruments:this.state.instruments,instrumentIndex:this.state.instrumentIndex,selectedPattern:t,patterns:this.state.patterns}))}},{key:"loadExample",value:function(){var t=function(t){var e,n=Object(a.a)(t.patterns);try{for(n.s();!(e=n.n()).done;){for(var r=e.value,o={},s=0,u=Object.entries(r.instrumentTracks);s<u.length;s++){var l=Object(i.a)(u[s],2),c=l[0],m=l[1];o[c]=new L.a(m.rep,m.resolution)}r.instrumentTracks=o}}catch(p){n.e(p)}finally{n.f()}return t}(B),e=Object(D.c)(t.instruments,D.a,t.patterns),n=Object(D.b)(t.instruments,t.patterns);this.setState({instrumentIndex:n,instrumentMask:Object(F.b)(n,e),instruments:e,patterns:t.patterns,selectedPattern:0===t.patterns.length?null:0,loadedFile:"kuva.example",patternsOpen:!0,patternSettings:this.figurePatternSettings(t.patterns)})}},{key:"checkMobile",value:function(){var t=navigator.userAgent||navigator.vendor||window.opera;return[/Android/i,/webOS/i,/iPhone/i,/iPad/i,/iPod/i,/BlackBerry/i,/Windows Phone/i].some((function(e){return t.match(e)}))}},{key:"getTrackLength",value:function(t){for(var e=48,n=0,r=Object.entries(t.instrumentTracks);n<r.length;n++){var a=Object(i.a)(r[n],2)[1];e=Math.max(e,a.length())}return e}},{key:"getResolution",value:function(t){for(var e=48,n=0,r=Object.entries(t.instrumentTracks);n<r.length;n++){var a=Object(i.a)(r[n],2)[1];e=Math.min(e,a.resolution)}return e}},{key:"renderMainContent",value:function(){var e=this;if(null==this.state.patterns||0===this.state.patterns.length){var n=null!=this.state.patterns&&0===this.state.patterns.length?m.a.createElement(v.a,{severity:"error"},this.state.loadedFile," contained no patterns! Try another."):"";return m.a.createElement(m.a.Fragment,null,m.a.createElement("div",null,m.a.createElement("h2",null,"tabit"),m.a.createElement("p",null,"I read .h2songs and write tab"),m.a.createElement(w.a,{variant:"contained",onClick:this.loadExample.bind(this),style:{margin:"1em"}},"Load example"),m.a.createElement(f.a,{style:{margin:"1em"},variant:"contained",onImport:this.handleFileImport.bind(this),accept:".tabit,.h2song"}),n),m.a.createElement("div",{style:{position:"absolute",bottom:0}},m.a.createElement("p",null,"tabit relies on publicly available sound libraries listed at ",m.a.createElement("a",{href:"https://github.com/andrew-murray/tabit"},"https://github.com/andrew-murray/tabit"))))}var a,o=this.state.patterns[this.state.selectedPattern],s=Object.assign(Object.assign({},this.state.formatSettings),this.state.patternSettings[this.state.selectedPattern]),u=this.renderPattern(o,s),l=function(t){return t&&"keydown"===t.type&&("Tab"===t.key||"Shift"===t.key)},c=function(t){l(t)||e.setState({settingsOpen:!0})},h=function(t){l(t)||e.setState({settingsOpen:!1})},d=function(t){l(t)||e.setState({patternsOpen:!1})},g=function(t){l(t)||e.setState({patternsOpen:!0})},b=this.props,y=t.browser&&/iPad|iPhone|iPod/.test(navigator.userAgent),C=this.checkMobile(),A={name:o.name,resolution:o.resolution,length:this.getTrackLength(o)},P=C?12:8;return m.a.createElement(m.a.Fragment,null,m.a.createElement("div",{style:{display:"flex",width:"95%"}},m.a.createElement(E.a,{color:"inherit","aria-label":"open drawer",edge:"start",onClick:g,className:Object(p.a)(Object(r.a)({},b.hide,!this.state.patternsOpen))},m.a.createElement(x.a,null)),m.a.createElement("div",{className:"content-title",style:{flexGrow:1}}),m.a.createElement(E.a,{color:"inherit","aria-label":"open drawer",edge:"end",onClick:c,className:Object(p.a)(this.state.settingsOpen&&b.hide)},m.a.createElement(T.a,null))),u,m.a.createElement(N.a,{container:!0},m.a.createElement(N.a,{item:!0,xs:(12-P)/2}),m.a.createElement(N.a,{item:!0,xs:P},m.a.createElement(F.a,{instruments:this.state.instruments,instrumentIndex:this.state.instrumentIndex,instrumentMask:this.state.instrumentMask,onChange:function(t){e.setState({instruments:t,instrumentMask:Object(F.b)(e.state.instrumentIndex,t)})}})),m.a.createElement(N.a,{item:!0,xs:(12-P)/2})),m.a.createElement(k.a,{disableBackdropTransition:!y,disableDiscovery:y,className:b.drawer,variant:C?void 0:"persistent",open:this.state.patternsOpen,onOpen:g,onClose:d},m.a.createElement("div",{className:b.drawerHeader},m.a.createElement(E.a,{onClick:d},m.a.createElement(M.a,null))),m.a.createElement(R.a,null),m.a.createElement("div",{className:b.drawerContainer},m.a.createElement(O.a,null,(null!==(a=this.state.patterns)&&void 0!==a?a:[]).map((function(t,n){return m.a.createElement(S.a,{button:!0,key:"drawer-pattern"+n.toString(),onClick:function(){return e.selectPattern(n)}},m.a.createElement(j.a,{primary:t.name}))}))))),m.a.createElement(k.a,{disableBackdropTransition:!y,disableDiscovery:y,className:b.drawer,variant:C?void 0:"persistent",anchor:"right",open:this.state.settingsOpen,onOpen:c,onClose:h,classes:{paper:b.drawerPaper}},m.a.createElement("div",{className:b.drawerHeader},m.a.createElement(E.a,{onClick:h},m.a.createElement(x.a,null))),m.a.createElement(R.a,null),m.a.createElement(I.b,{onChange:function(t){for(var n=Array.from(e.state.patternSettings),r=Object.assign({},e.state.formatSettings),a=0,o=Object.entries(t);a<o.length;a++){var s=Object(i.a)(o[a],2),u=s[0],l=s[1];u in n[e.state.selectedPattern]?n[e.state.selectedPattern][u]=l:r[u]=l}e.setState({formatSettings:r,patternSettings:n})},settings:s,pattern:A}),m.a.createElement(w.a,{style:{backgroundColor:"white",color:K.palette.background.default},onClick:function(t){e.save()}},"Download")))}},{key:"render",value:function(){var t=this.renderMainContent();return m.a.createElement("div",{className:"App"},m.a.createElement(b.a,{theme:K},m.a.createElement(y.a,null),t))}}]),c}(m.a.Component);e.a=q}).call(this,n(70))},148:function(t,e,n){"use strict";var r=n(9),i=n(37),a=n(1),o=n(2),s=n(4),u=n(3),l=n(0),c=n.n(l),m=n(56),p=function(t){Object(s.a)(n,t);var e=Object(u.a)(n);function n(t){var r;return Object(a.a)(this,n),(r=e.call(this,t)).hiddenFileInput=c.a.createRef(),r}return Object(o.a)(n,[{key:"onChange",value:function(t){var e=this,n=t.target.files[0],r=new FileReader;r.onload=function(t){e.props.onImport&&e.props.onImport({file:n,content:t.target.result})},r.readAsText(n)}},{key:"render",value:function(){var t=this,e=Object(r.a)({},this.props),n=(e.onImport,e.accept),a=Object(i.a)(e,["onImport","accept"]);return c.a.createElement(c.a.Fragment,null,c.a.createElement(m.a,Object.assign({onClick:function(e){t.hiddenFileInput.current.click()}},a),"Import File"),c.a.createElement("input",{type:"file",hidden:!0,accept:n,onChange:function(e){return t.onChange(e)},ref:this.hiddenFileInput}))}}]),n}(c.a.Component);e.a=p},153:function(t,e,n){"use strict";var r=n(14),i=n(15),a=n(1),o=n(2),s=n(4),u=n(3),l=n(0),c=n.n(l),m=n(47),p=n(12),f=function(t){Object(s.a)(n,t);var e=Object(u.a)(n);function n(t){var r;return Object(a.a)(this,n),(r=e.call(this,t)).state={},r}return Object(o.a)(n,[{key:"formatText",value:function(t){var e,n=this.props.config,a=[],o=Object(i.a)(t);try{for(o.s();!(e=o.n()).done;){var s=Object(r.a)(e.value,2),u=s[0],l=s[1],c=m.a.fromInstrumentAndTrack(l,this.props.tracks,!0,n);a.push(u);var p,f=Object(i.a)(c.split("\n"));try{for(f.s();!(p=f.n()).done;){var h=p.value;a.push(h)}}catch(d){f.e(d)}finally{f.f()}}}catch(d){o.e(d)}finally{o.f()}return a}},{key:"render",value:function(){var t=this.props.classes;return c.a.createElement("div",{className:t.root},this.formatText(this.props.instruments).map((function(t,e){return c.a.createElement("p",{key:e.toString(),dangerouslySetInnerHTML:{__html:t}})})))}}]),n}(c.a.Component);e.a=Object(p.a)((function(t){return{root:{"margin-bottom":t.spacing(2),fontFamily:"Roboto Mono",textAlign:"left",whiteSpace:"pre","& .activeNote":{color:t.palette.secondary.main}}}}))(f)},154:function(t,e,n){"use strict";var r=n(8),i=n.n(r),a=n(16),o=n(18),s=n(14),u=n(15),l=n(75),c=n(155),m=n.n(c),p=n(91);function f(t,e){var n=Array.from(t.notes,(function(t){return t.position}));return Object(p.a)(n,e)}function h(t){var e=t.song.instrumentList[0].instrument,n=Array.from(e,(function(t){var e=t.instrumentComponent[0],n={id:parseInt(t.id),name:t.name[0],volume:parseFloat(t.volume),muted:"true"===t.isMuted[0],gain:parseFloat(t.gain),drumkit:t.drumkit[0]};return"layer"in e&&(n.filename=e.layer[0].filename[0]),n})),r=t.song.patternList[0].pattern,i=Array.from(r,(function(t){var e=t.noteList[0].note,n=parseInt(t.size),r=[];return e&&(r=(r=Array.from(e,(function(t){return{position:parseInt(t.position),instrument:parseInt(t.instrument)}}))).filter((function(t){return t.position<n}))),{size:n,name:t.name[0],notes:r}})),a=Array.from(i,(function(t){var e,r=f(t,t.size),i={},a=Object(u.a)(n);try{var o=function(){var n=e.value,a=t.notes.filter((function(t){return t.instrument===n.id})),o=Array.from(a,(function(t){return t.position}));i[n.id.toString()]=l.a.fromPositions(o,t.size,r)};for(a.s();!(e=a.n()).done;)o()}catch(s){a.e(s)}finally{a.f()}return t.resolution=r,t.instrumentTracks=i,t}));if(t.song.virtualPatternList){var c=t.song.virtualPatternList[0].pattern;if(c){for(var m={},p=0,h=Array.from(c);p<h.length;p++){var d=h[p],v=d.name[0],g=Array.from(d.virtual);m[v]=new Set(g)}for(var b=0;b<20;++b){for(var k={},y=!1,O=0,S=Object.entries(m);O<S.length;O++){var j,E=Object(s.a)(S[O],2),w=E[0],C=E[1],T=new Set(C),A=Object(u.a)(T);try{for(A.s();!(j=A.n()).done;){var M=j.value;M in m&&(T=new Set([].concat(Object(o.a)(T),Object(o.a)(m[M]))))}}catch(I){A.e(I)}finally{A.f()}y=y||T.size!==C.size,k[w]=T}if(!y)break;if(20===b)throw new Error("Reached max virtual_pattern recursion depth.");m=k}for(var P=function(){var t,e=Object(s.a)(R[x],2),n=e[0],r=e[1],i=a.find((function(t){return t.name===n})),o=Object(u.a)(r);try{var l=function(){for(var e=t.value,n=a.find((function(t){return t.name===e})),r=0,o=Object.entries(n.instrumentTracks);r<o.length;r++){var u=Object(s.a)(o[r],2),l=u[0],c=u[1];if(l in i.instrumentTracks){var m=i.instrumentTracks[l].aggregate(c);m.rep.length=i.size/m.resolution,i.instrumentTracks[l]=m}else{var p=c.format(i.resolution);p.length=i.size/i.resolution,i.instrumentTracks[l]=p}}};for(o.s();!(t=o.n()).done;)l()}catch(I){o.e(I)}finally{o.f()}var c=f(i,i.size);i.resolution=c;for(var m=0,p=Object.entries(i.instrumentTracks);m<p.length;m++){var h=Object(s.a)(p[m],2),d=h[0],v=h[1];i[d]=v.format(c)}},x=0,R=Object.entries(m);x<R.length;x++)P()}}return{instruments:n,patterns:a}}function d(){return(d=Object(a.a)(i.a.mark((function t(e){var n;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=new m.a.Parser,t.abrupt("return",n.parseStringPromise(e).then(h));case 2:case"end":return t.stop()}}),t)})))).apply(this,arguments)}e.a={parseHydrogenPromise:function(t){return d.apply(this,arguments)}}},158:function(t){t.exports=JSON.parse('{"instruments":[{"id":23,"name":"Stick","volume":0.99569,"muted":false,"gain":1,"drumkit":"GMRockKit","filename":"SideStick-Softest.wav"},{"id":24,"name":"Kick Short","volume":1,"muted":false,"gain":1,"drumkit":"TR808EmulationKit","filename":"808_Kick_Short.flac"},{"id":20,"name":"Stick","volume":0.193966,"muted":false,"gain":1,"drumkit":"DeathMetal"},{"id":26,"name":"Stick","volume":0.99569,"muted":false,"gain":1,"drumkit":"GMRockKit","filename":"SideStick-Softest.wav"},{"id":25,"name":"Kick Short","volume":1,"muted":false,"gain":1,"drumkit":"TR808EmulationKit","filename":"808_Kick_Short.flac"},{"id":22,"name":"tom02","volume":0.65,"muted":false,"gain":1,"drumkit":"DeathMetal"},{"id":27,"name":"snare","volume":0.49,"muted":false,"gain":1,"drumkit":"DeathMetal","filename":"014b.WAV"},{"id":13,"name":"Snare 1","volume":0.35,"muted":false,"gain":0.4,"drumkit":"DeathMetal"},{"id":10,"name":"Djembe4 Slap","volume":0.12931,"muted":false,"gain":1,"drumkit":"circAfrique v4","filename":"Djembe4 Slap.wav"},{"id":11,"name":"Djembe4 Tone","volume":0.12931,"muted":false,"gain":0.95,"drumkit":"circAfrique v4","filename":"Djembe4 Tone.wav"},{"id":12,"name":"Djembe4 Bass","volume":0.181034,"muted":false,"gain":1.5,"drumkit":"circAfrique v4","filename":"Djembe4 Bass.wav"},{"id":16,"name":"Shaker","volume":0.232759,"muted":false,"gain":2.2,"drumkit":"TR808EmulationKit","filename":"808_Shaker.flac"},{"id":21,"name":"Shaker","volume":1.5,"muted":false,"gain":2.45,"drumkit":"TR808EmulationKit","filename":"808_Shaker.flac"}],"patterns":[{"size":384,"name":"k-1","notes":[{"position":0,"instrument":21},{"position":0,"instrument":24},{"position":0,"instrument":26},{"position":0,"instrument":11},{"position":12,"instrument":21},{"position":24,"instrument":11},{"position":24,"instrument":21},{"position":24,"instrument":24},{"position":24,"instrument":26},{"position":24,"instrument":27},{"position":36,"instrument":21},{"position":36,"instrument":11},{"position":48,"instrument":21},{"position":48,"instrument":11},{"position":48,"instrument":23},{"position":48,"instrument":26},{"position":48,"instrument":27},{"position":60,"instrument":24},{"position":72,"instrument":10},{"position":72,"instrument":21},{"position":72,"instrument":26},{"position":84,"instrument":25},{"position":96,"instrument":23},{"position":96,"instrument":26},{"position":108,"instrument":25},{"position":120,"instrument":12},{"position":120,"instrument":25},{"position":144,"instrument":12},{"position":144,"instrument":21},{"position":144,"instrument":23},{"position":144,"instrument":25},{"position":144,"instrument":27},{"position":156,"instrument":21},{"position":168,"instrument":21},{"position":180,"instrument":27},{"position":192,"instrument":11},{"position":192,"instrument":21},{"position":192,"instrument":24},{"position":192,"instrument":26},{"position":216,"instrument":12},{"position":216,"instrument":21},{"position":216,"instrument":24},{"position":216,"instrument":26},{"position":216,"instrument":27},{"position":240,"instrument":11},{"position":240,"instrument":23},{"position":240,"instrument":26},{"position":240,"instrument":27},{"position":252,"instrument":12},{"position":252,"instrument":24},{"position":264,"instrument":21},{"position":264,"instrument":27},{"position":276,"instrument":11},{"position":276,"instrument":25},{"position":288,"instrument":12},{"position":288,"instrument":21},{"position":288,"instrument":24},{"position":288,"instrument":25},{"position":300,"instrument":21},{"position":312,"instrument":11},{"position":312,"instrument":23},{"position":312,"instrument":26},{"position":324,"instrument":12},{"position":324,"instrument":21},{"position":324,"instrument":24},{"position":324,"instrument":25},{"position":336,"instrument":21},{"position":336,"instrument":27},{"position":360,"instrument":21},{"position":360,"instrument":10},{"position":360,"instrument":23},{"position":360,"instrument":26},{"position":360,"instrument":27},{"position":372,"instrument":21},{"position":372,"instrument":27}],"resolution":12,"instrumentTracks":{"10":{"rep":[0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0],"resolution":12},"11":{"rep":[1,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,1,0,0,1,0,0,1,0,0,0,0,0],"resolution":12},"12":{"rep":[0,0,0,0,0,0,0,0,0,0,1,0,1,0,0,0,0,0,1,0,0,1,0,0,1,0,0,1,0,0,0,0],"resolution":12},"13":{"rep":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"resolution":12},"16":{"rep":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"resolution":12},"20":{"rep":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"resolution":12},"21":{"rep":[1,1,1,1,1,0,1,0,0,0,0,0,1,1,1,0,1,0,1,0,0,0,1,0,1,1,0,1,1,0,1,1],"resolution":12},"22":{"rep":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"resolution":12},"23":{"rep":[0,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,1,0],"resolution":12},"24":{"rep":[1,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,1,0,1,0,0,1,0,0,1,0,0,1,0,0,0,0],"resolution":12},"25":{"rep":[0,0,0,0,0,0,0,1,0,1,1,0,1,0,0,0,0,0,0,0,0,0,0,1,1,0,0,1,0,0,0,0],"resolution":12},"26":{"rep":[1,0,1,0,1,0,1,0,1,0,0,0,0,0,0,0,1,0,1,0,1,0,0,0,0,0,1,0,0,0,1,0],"resolution":12},"27":{"rep":[0,0,1,0,1,0,0,0,0,0,0,0,1,0,0,1,0,0,1,0,1,0,1,0,0,0,0,0,1,0,1,1],"resolution":12}}},{"size":384,"name":"k-2","notes":[{"position":0,"instrument":12},{"position":0,"instrument":21},{"position":0,"instrument":24},{"position":0,"instrument":25},{"position":0,"instrument":27},{"position":12,"instrument":12},{"position":12,"instrument":24},{"position":12,"instrument":25},{"position":24,"instrument":12},{"position":24,"instrument":21},{"position":24,"instrument":24},{"position":24,"instrument":25},{"position":36,"instrument":21},{"position":48,"instrument":21},{"position":48,"instrument":10},{"position":48,"instrument":23},{"position":48,"instrument":26},{"position":48,"instrument":27},{"position":72,"instrument":21},{"position":84,"instrument":21},{"position":84,"instrument":27},{"position":96,"instrument":21},{"position":96,"instrument":23},{"position":96,"instrument":26},{"position":108,"instrument":21},{"position":108,"instrument":27},{"position":120,"instrument":11},{"position":120,"instrument":21},{"position":132,"instrument":10},{"position":132,"instrument":27},{"position":144,"instrument":23},{"position":144,"instrument":26},{"position":144,"instrument":27},{"position":156,"instrument":10},{"position":168,"instrument":12},{"position":168,"instrument":21},{"position":168,"instrument":24},{"position":168,"instrument":25},{"position":180,"instrument":12},{"position":180,"instrument":24},{"position":180,"instrument":25},{"position":192,"instrument":12},{"position":192,"instrument":21},{"position":192,"instrument":24},{"position":192,"instrument":25},{"position":192,"instrument":27},{"position":216,"instrument":21},{"position":216,"instrument":11},{"position":228,"instrument":11},{"position":228,"instrument":21},{"position":228,"instrument":27},{"position":240,"instrument":21},{"position":240,"instrument":23},{"position":240,"instrument":26},{"position":240,"instrument":27},{"position":252,"instrument":10},{"position":264,"instrument":21},{"position":264,"instrument":11},{"position":276,"instrument":21},{"position":276,"instrument":27},{"position":288,"instrument":11},{"position":288,"instrument":21},{"position":288,"instrument":23},{"position":288,"instrument":26},{"position":300,"instrument":11},{"position":312,"instrument":21},{"position":324,"instrument":10},{"position":336,"instrument":11},{"position":336,"instrument":23},{"position":336,"instrument":26},{"position":360,"instrument":21}],"resolution":12,"instrumentTracks":{"10":{"rep":[0,0,0,0,1,0,0,0,0,0,0,1,0,1,0,0,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0],"resolution":12},"11":{"rep":[0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,1,1,0,0,1,0,1,1,0,0,1,0,0,0],"resolution":12},"12":{"rep":[1,1,1,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"resolution":12},"13":{"rep":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"resolution":12},"16":{"rep":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"resolution":12},"20":{"rep":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"resolution":12},"21":{"rep":[1,0,1,1,1,0,1,1,1,1,1,0,0,0,1,0,1,0,1,1,1,0,1,1,1,0,1,0,0,0,1,0],"resolution":12},"22":{"rep":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"resolution":12},"23":{"rep":[0,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0],"resolution":12},"24":{"rep":[1,1,1,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"resolution":12},"25":{"rep":[1,1,1,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"resolution":12},"26":{"rep":[0,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0],"resolution":12},"27":{"rep":[1,0,0,0,1,0,0,1,0,1,0,1,1,0,0,0,1,0,0,1,1,0,0,1,0,0,0,0,0,0,0,0],"resolution":12}}},{"size":192,"name":"lightbulb","notes":[{"position":0,"instrument":24},{"position":12,"instrument":24},{"position":24,"instrument":24},{"position":36,"instrument":24},{"position":48,"instrument":24},{"position":96,"instrument":27},{"position":144,"instrument":24},{"position":160,"instrument":24},{"position":176,"instrument":24}],"resolution":4,"instrumentTracks":{"10":{"rep":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"resolution":4},"11":{"rep":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"resolution":4},"12":{"rep":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"resolution":4},"13":{"rep":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"resolution":4},"16":{"rep":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"resolution":4},"20":{"rep":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"resolution":4},"21":{"rep":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"resolution":4},"22":{"rep":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"resolution":4},"23":{"rep":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"resolution":4},"24":{"rep":[1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0],"resolution":4},"25":{"rep":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"resolution":4},"26":{"rep":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"resolution":4},"27":{"rep":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"resolution":4}}},{"size":192,"name":"break","notes":[{"position":24,"instrument":21},{"position":24,"instrument":11},{"position":24,"instrument":27},{"position":48,"instrument":21},{"position":48,"instrument":11},{"position":48,"instrument":27},{"position":96,"instrument":21},{"position":96,"instrument":11},{"position":96,"instrument":27},{"position":120,"instrument":21},{"position":120,"instrument":11},{"position":120,"instrument":27},{"position":144,"instrument":24},{"position":168,"instrument":21},{"position":168,"instrument":11},{"position":168,"instrument":24},{"position":168,"instrument":27}],"resolution":24,"instrumentTracks":{"10":{"rep":[0,0,0,0,0,0,0,0],"resolution":24},"11":{"rep":[0,1,1,0,1,1,0,1],"resolution":24},"12":{"rep":[0,0,0,0,0,0,0,0],"resolution":24},"13":{"rep":[0,0,0,0,0,0,0,0],"resolution":24},"16":{"rep":[0,0,0,0,0,0,0,0],"resolution":24},"20":{"rep":[0,0,0,0,0,0,0,0],"resolution":24},"21":{"rep":[0,1,1,0,1,1,0,1],"resolution":24},"22":{"rep":[0,0,0,0,0,0,0,0],"resolution":24},"23":{"rep":[0,0,0,0,0,0,0,0],"resolution":24},"24":{"rep":[0,0,0,0,0,0,1,1],"resolution":24},"25":{"rep":[0,0,0,0,0,0,0,0],"resolution":24},"26":{"rep":[0,0,0,0,0,0,0,0],"resolution":24},"27":{"rep":[0,1,1,0,1,1,0,1],"resolution":24}}},{"size":192,"name":"squash","notes":[{"position":0,"instrument":21},{"position":0,"instrument":12},{"position":0,"instrument":24},{"position":0,"instrument":27},{"position":48,"instrument":21},{"position":48,"instrument":12},{"position":48,"instrument":24},{"position":48,"instrument":27},{"position":96,"instrument":21},{"position":96,"instrument":12},{"position":96,"instrument":24},{"position":96,"instrument":27},{"position":144,"instrument":21},{"position":144,"instrument":12},{"position":144,"instrument":24},{"position":144,"instrument":27}],"resolution":48,"instrumentTracks":{"10":{"rep":[0,0,0,0],"resolution":48},"11":{"rep":[0,0,0,0],"resolution":48},"12":{"rep":[1,1,1,1],"resolution":48},"13":{"rep":[0,0,0,0],"resolution":48},"16":{"rep":[0,0,0,0],"resolution":48},"20":{"rep":[0,0,0,0],"resolution":48},"21":{"rep":[1,1,1,1],"resolution":48},"22":{"rep":[0,0,0,0],"resolution":48},"23":{"rep":[0,0,0,0],"resolution":48},"24":{"rep":[1,1,1,1],"resolution":48},"25":{"rep":[0,0,0,0],"resolution":48},"26":{"rep":[0,0,0,0],"resolution":48},"27":{"rep":[1,1,1,1],"resolution":48}}}]}')},164:function(t,e,n){"use strict";var r=n(18),i=n(15),a=n(14),o=n(1),s=n(2),u=n(4),l=n(3),c=n(0),m=n.n(c),p=function(){function t(){Object(o.a)(this,t)}return Object(s.a)(t,null,[{key:"createWebContext",value:function(){return new(window.AudioContext||window.webkitAudioContext||Object)}},{key:"determineMinResolution",value:function(t,e){for(var n=48,r=function(){var e=Object(a.a)(o[i],2),r=e[0],s=e[1];t.filter((function(t){return t.id.toString()===r})).length>0&&!s.empty()&&(n=Math.min(n,s.resolution))},i=0,o=Object.entries(e);i<o.length;i++)r();return n}},{key:"determineTrackLength",value:function(t,e){for(var n=48,r=function(){var e=Object(a.a)(o[i],2),r=e[0],s=e[1];t.filter((function(t){return t.id.toString()===r})).length>0&&!s.empty()&&(n=Math.max(n,s.length()))},i=0,o=Object.entries(e);i<o.length;i++)r();return n}},{key:"peakAmplitude",value:function(t){for(var e=0,n=0;n<t.numberOfChannels;n++)for(var r=t.getChannelData(n),i=0;i<r.length;++i)e=Math.max(Math.abs(r[i]),e);return e}},{key:"normalizeAudioBuffer",value:function(e){var n=t.peakAmplitude(e);if(n>1)for(var r=0;r<e.numberOfChannels;r++)for(var i=e.getChannelData(r),a=0;a<i.length;++a)i[a]=i[a]/n;return e}},{key:"createMasterTrack",value:function(e,n,r,o,s){for(var u=t.determineTrackLength(r,n),l=44100*(u*(60/s*1e3/48))/1e3,c=Math.floor(l),m=Math.floor(c/u),p=e.createBuffer(2,c,44100),f=0;f<p.numberOfChannels;f++)for(var h=p.getChannelData(f),d=function(){var t=Object(a.a)(g[v],2),e=t[0],n=t[1],s=r.filter((function(t){return t.id.toString()===e}));if(s.length>0&&s[0].id in o&&!n.empty()){var u,l=o[s[0].id],c=2===l.numberOfChannels?l.getChannelData(f):l.getChannelData(0),p=n.toPoints(),d=Object(i.a)(p);try{for(d.s();!(u=d.n()).done;)for(var b=u.value*m,k=0;k<l.length;++k)h[b+k]=h[b+k]+c[k]}catch(y){d.e(y)}finally{d.f()}}},v=0,g=Object.entries(n);v<g.length;v++)d();return t.normalizeAudioBuffer(p)}},{key:"createAudioSource",value:function(t,e,n){var r=t.createBufferSource();return r.buffer=e,r.loop=!0,null!==n&&(r.playbackRate.value=n/100),r.connect(t.destination),r}},{key:"createOneShotAudioSource",value:function(t,e,n){var r=t.createBufferSource();return r.buffer=e,r.loop=!1,null!==n&&(r.playbackRate.value=n/100),r.connect(t.destination),r}}]),t}(),f=n(57),h=n(160),d=n.n(h),v=n(161),g=n.n(v),b=n(306),k=n(97),y=n(26),O=["circAfrique v4","DeathMetal","The Black Pearl 1.0","GMRockKit","TR808EmulationKit"],S=function(t){Object(u.a)(n,t);var e=Object(l.a)(n);function n(t){var r;return Object(o.a)(this,n),(r=e.call(this,t)).state={tempo:100},r.samplerCount=0,r.sequences={},r.gain=new y.a,r.gain.toDestination(),y.e.bpm.value=r.state.tempo,r}return Object(s.a)(n,[{key:"chooseAppropriateUrlForInstrument",value:function(t,e){var n=e.toLowerCase();return n.includes("kick")?"The Black Pearl 1.0/PearlKick-Hard.wav":n.includes("stick")?"DeathMetal/16297_ltibbits_sticks_low_pitch.wav":n.includes("tom")?"TR808EmulationKit/808_Tom_Mid.wav":n.includes("clap")?"TR808EmulationKit/808_Clap.wav":n.includes("snare")?"GMRockKit/Snare-Soft.wav":null}},{key:"populateSamples",value:function(){var t=this;this.samplerCount=0,this.expectedSamplerCount=0;for(var e={},n=this.props.selectedPattern.instrumentTracks,r=function(){var n=Object(a.a)(o[i],1)[0],r=t.props.instrumentIndex.filter((function(t){return t.id.toString()===n}));if(r.length>0){var s=r[0];if("drumkit"in s&&"filename"in s&&O.includes(s.drumkit)){var u=s.filename.replace(".flac",".wav");e[s.id]=new y.b("/tabit/wav/"+s.drumkit+"/"+u,(function(){t.samplerCount++})),e[s.id].connect(t.gain),t.expectedSamplerCount++}else if("drumkit"in s){var l=t.chooseAppropriateUrlForInstrument(s.drumkit,s.name);null!==l&&(e[s.id]=new y.b("/tabit/wav/"+l,(function(){t.samplerCount++})),e[s.id].connect(t.gain),t.expectedSamplerCount++)}}},i=0,o=Object.entries(n);i<o.length;i++)r();this.samples=e}},{key:"createSequences",value:function(){var t,e=this,n=this.props.instrumentIndex,a={},o=Object(i.a)(this.props.patterns);try{for(o.s();!(t=o.n()).done;){var s=t.value,u=p.determineMinResolution(n,s.instrumentTracks),l=p.determineTrackLength(n,s.instrumentTracks);a[s.name]=new y.c((function(t,n){e.tick(t,n)}),Object(r.a)(Array(l/u).keys()),y.d("4n")*(u/48)),a[s.name]._part.mute=!0,a[s.name].start(0)}}catch(c){o.e(c)}finally{o.f()}return a}},{key:"schedulePlaybackForNewTracks",value:function(){var t=this,e=this.props.instrumentIndex,n=this.props.selectedPattern.instrumentTracks,r=p.determineMinResolution(e,n),i=p.determineTrackLength(e,n),a=y.e.toSeconds(y.e.position),o=y.e.loopEnd-a,s="started"===y.e.state&&o>0&&o<y.d("8n").toSeconds()&&i>this.state.length,u=function(){t.sequences[t.props.selectedPattern.name]._part.mute=!1,y.e.loop=!0,y.e.setLoopPoints(0,y.d("4n")*(i/48))};r!==this.state.resolution||i!==this.state.length?(s&&console.log("queuing transition to pattern "+this.props.selectedPattern.name),this.setState({resolution:r,length:i},(function(){s?y.e.scheduleOnce(u,y.d("0")):u()}))):u()}},{key:"samplesReady",value:function(){return this.sampleCount===this.expectedSampleCount}},{key:"tick",value:function(t,e){if(t!==this.lastTickTime){this.lastTickTime=t;var n=e%(this.state.length/this.state.resolution);if(this.samplesReady())for(var r=this.props.selectedPattern.instrumentTracks,i=0,o=Object.entries(r);i<o.length;i++){var s=Object(a.a)(o[i],2),u=s[0];s[1].rep[n]&&this.samples[u].start(t)}}}},{key:"play",value:function(){y.e.start()}},{key:"stop",value:function(){y.e.stop()}},{key:"componentDidMount",value:function(){this.populateSamples(),this.sequences=this.createSequences(),this.schedulePlaybackForNewTracks()}},{key:"componentDidUpdate",value:function(t,e,n){t.selectedPattern.name!==this.props.selectedPattern.name&&(this.sequences[t.selectedPattern.name]._part.mute=!0,this.schedulePlaybackForNewTracks())}},{key:"tempoControl",value:function(){var t=this;return m.a.createElement(b.a,{defaultValue:100,min:60,step:1,max:180,onChange:function(e,n){t.setState({tempo:n}),y.e.bpm.value=n},valueLabelDisplay:"auto"})}},{key:"render",value:function(){var t=this;return m.a.createElement(m.a.Fragment,null,m.a.createElement("div",null,m.a.createElement(f.a,{color:"primary","aria-label":"play",onClick:function(e){t.play()}},m.a.createElement(d.a,null)),m.a.createElement(f.a,{color:"secondary","aria-label":"stop",onClick:function(e){t.stop()}},m.a.createElement(g.a,null))),m.a.createElement(k.a,{container:!0},m.a.createElement(k.a,{item:!0,xs:4}),m.a.createElement(k.a,{item:!0,xs:4},this.tempoControl()),m.a.createElement(k.a,{item:!0,xs:4})))}}]),n}(m.a.Component);e.a=S},190:function(t,e,n){t.exports=n(236)},195:function(t,e,n){},214:function(t,e){},216:function(t,e){},226:function(t,e,n){},236:function(t,e,n){"use strict";n.r(e);var r=n(0),i=n.n(r),a=n(22),o=n.n(a),s=(n(195),n(147));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(i.a.createElement(i.a.StrictMode,null,i.a.createElement(s.a,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))},47:function(t,e,n){"use strict";var r=n(14),i=n(1),a=n(2),o=function(){function t(){Object(i.a)(this,t)}return Object(a.a)(t,null,[{key:"validateConfig",value:function(t,e){if(null!=e&&t.beatResolution%e!==0)throw new Error("patternResolution doesn't divide beatResolution");if(t.lineResolution<=0)throw new Error("config.lineResolution must be greater than zero")}},{key:"chunkString",value:function(t,e){if(e<=0)throw new Error("chunkSize must be > 0");return t.match(new RegExp(".{1,"+e+"}","g"))}},{key:"createNumberMarker",value:function(t,e,n,r){if(r<=0)throw new Error("lineLength <= 0");if(e%n!==0)throw new Error("patternResolution "+n.toString()+" does not divide beatResolution "+e.toString());for(var i=Math.ceil(r/e),a=Array.from(Array(r/n),(function(e){return t})),o=0;o<i;o++)a[o*(e/n)]=((o+1)%10).toString();return a.join("")}},{key:"formatLineWithMarkers",value:function(e,n,r,i){t.validateConfig(e);for(var a=e.beatResolution/r,o=i?function(t,e){return"<span class='note-"+(n=e,((n+="").length>=(r=4)?n:new Array(r-n.length+1).join("0")+n)+"'>")+t+"</span>";var n,r}:function(t,e){return t},s="",u=0;u<n.length;++u){var l=r*u;s+=o(n.charAt(u),l)}var c=e.showBeatMark?t.chunkString(s,a*o("X",0).length).join(e.beatMark):s;return e.lineMark+c+e.lineMark}},{key:"defaultLineResolution",value:function(t,e){var n=Object.values(t);if(0===n.length)return 384;var r=n[0].length(),i=r/e;return i<=12?r:i>32?768:[r,r/2,r/3,r/2,r,r/3,r,r/4,r/3,r/2,r,r/3,r/5,r,r/3,r/4,r,r/6,r,r/4][i-13]}},{key:"guessPerPatternSettings",value:function(e){return{lineResolution:t.defaultLineResolution(e,48),beatResolution:48}}},{key:"fromInstrumentAndTrack",value:function(e,n,i){for(var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},o=0,s=Object.keys(a);o<s.length;o++){var u=s[o];if(!t.DEFAULT_FORMAT_CONFIG.hasOwnProperty(u))throw new Error("passed unrecognised property "+u)}var l=Object.assign(Object.assign({},t.DEFAULT_FORMAT_CONFIG),a),c=Object.values(n);if(0===c.length)return"";for(var m=c[0].length(),p=c[0].resolution,f=c[0].length()/c[0].resolution,h=Array(f).fill(l.restMark),d=0;d<h.length;++d)for(var v=0,g=Object.entries(e);v<g.length;v++){var b=Object(r.a)(g[v],2),k=b[0],y=b[1],O=n[k];null!=O&&1===O.rep[d]&&(h[d]=y)}var S=h.join(""),j=t.chunkString(S,l.lineResolution/p),E=[];l.showBeatNumbers&&E.push(t.formatLineWithMarkers(l,t.createNumberMarker(l.numberRestMark,l.beatResolution,p,Math.min(l.lineResolution,m)),p,i));for(var w=0;w<j.length;++w)E.push(t.formatLineWithMarkers(l,j[w],p,i));return E.join("\n")}}]),t}();o.DEFAULT_FORMAT_CONFIG={restMark:"-",beatMark:"|",lineMark:"|",numberRestMark:"-",beatResolution:48,showBeatMark:!0,showBeatNumbers:!0,lineResolution:384},o.FORMAT_CONFIG_STRINGS=[["restMark",["-","."," "]],["numberRestMark",["-","."," "]]],o.FORMAT_CONFIG_BOOLS=["showBeatMark","showBeatNumbers"],e.a=o},55:function(t,e,n){"use strict";n.d(e,"b",(function(){return l})),n.d(e,"a",(function(){return a})),n.d(e,"c",(function(){return m}));var r=n(14),i=n(15),a={"Djembe Slap":"S","Djembe Tone":"t","Djembe Bass":"O","Snare Ghost":"x","Snare Accent":"X","Shaker Ghost":"x","Shaker Accent":"X",Click:"X",Bass:"O",Tom:"O",Default:"X"};function o(t){var e,n=[],r=Object(i.a)(t);try{for(r.s();!(e=r.n()).done;){var a=e.value,o=Object.assign({},a);o.name=o.name.toLowerCase(),n.push(o)}}catch(s){r.e(s)}finally{r.f()}return n}function s(t,e,n,r){var a=[];if(2===t.length){var o=t[0],s=t[1],u=o.volume>s.volume||o.volume===s.volume&&o.gain>s.gain,l={};l[o.id.toString()]=u?n:r,l[s.id.toString()]=u?r:n,a.push([e,l])}else{var c,m=Object(i.a)(t);try{for(m.s();!(c=m.n()).done;){var p=c.value,f={};f[p.id.toString()]=n,a.push([e,f])}}catch(h){m.e(h)}finally{m.f()}}return a}function u(t){var e,n=new Set,a=Object(i.a)(t);try{for(a.s();!(e=a.n()).done;)for(var o=e.value,s=0,u=Object.entries(o.instrumentTracks);s<u.length;s++){var l=Object(r.a)(u[s],2),c=l[0];l[1].empty()||n.add(parseInt(c))}}catch(m){a.e(m)}finally{a.f()}return n}function l(t,e){var n,r=u(e),a=[],o=Object(i.a)(t);try{for(o.s();!(n=o.n()).done;){var s=n.value;r.has(s.id)&&a.push(s)}}catch(l){o.e(l)}finally{o.f()}return a}function c(t,e){var n=e.toLowerCase();return n.includes("click")||n.includes("stick")?t.Click:n.includes("bass")||n.includes("kick")?t.Bass:n.includes("snare")?t["Snare Accent"]:n.includes("shaker")?t.Shaker:n.includes("tom")?t.Tom:n.includes("djembe")?n.includes("slap")?t["Djembe Slap"]:n.includes("tone")?t["Djembe Tone"]:t["Djembe Bass"]:t.Default}function m(t,e,n){var r=[];r=(r=(r=(r=r.concat(function(t,e,n){for(var r=o(t),i=u(n),a=r.filter((function(t){return i.has(t.id)&&!t.name.includes("djembe")&&(t.name.includes("click")||t.name.includes("stick")||t.name.includes("tom")||t.name.includes("bass")||t.name.includes("kick"))})),s=Array.from(a,(function(t){return t.name.includes("click")||t.name.includes("stick")})),l=1,c=1,m=[],p=0;p<Math.floor(a.length/2);++p)if(s[2*p]!==s[2*p+1]){var f=s[2*p]?a[2*p]:a[2*p+1],h=s[2*p]?a[2*p+1]:a[2*p],d=h.name.includes("tom"),v=d?"Tom":"Bass",g="";d?(g=v+(l>=2?" "+l.toString():""),l+=1):(g=v+(c>=2?" "+c.toString():""),c+=1);var b={};b[h.id.toString()]=e[v],b[f.id.toString()]=e.Click,m.push([g,b])}if(a.length%2!==0&&!s[a.length-1]){var k=a[a.length-1],y=k.name.includes("tom"),O=y?"Tom":"Bass",S="";y?(S=O+(l>=2?" "+l.toString():""),l+=1):(S=O+(c>=2?" "+c.toString():""),c+=1);var j={};j[k.id.toString()]=e[O],m.push([S,j])}return m}(t,e,n))).concat(function(t,e){var n=o(t).filter((function(t){return t.name.includes("djembe")}));if(0===n.length)return[];if(n.length<=3){for(var r=Array.from(n,(function(t){return t.name.includes("slap")})),i=Array.from(n,(function(t){return t.name.includes("tone")})),a=Array.from(n,(function(t){return t.name.includes("bass")})),s=0;s<n.length;++s){if(1!==r[s]+i[s]+a[s])return[]}for(var u={},l=0;l<n.length;++l)r[l]?u[n[l].id.toString()]=e["Djembe Slap"]:i[l]?u[n[l].id.toString()]=e["Djembe Tone"]:a[l]&&(u[n[l].id.toString()]=e["Djembe Bass"]);return[["Djembe",u]]}return[]}(t,e))).concat(function(t,e){return s(o(t).filter((function(t){return t.name.includes("snare")})),"Snare",e["Snare Accent"],e["Snare Ghost"])}(t,e))).concat(function(t,e){return s(o(t).filter((function(t){return t.name.includes("shaker")})),"Shaker",e["Shaker Accent"],e["Shaker Ghost"])}(t,e));var a,l=u(n),m=Object(i.a)(t);try{for(m.s();!(a=m.n()).done;){var p=a.value;if(l.has(p.id)){var f,h=!1,d=Object(i.a)(r);try{for(d.s();!(f=d.n()).done;){var v=f.value;p.id.toString()in v[1]&&(h=!0)}}catch(b){d.e(b)}finally{d.f()}if(!1===h){var g={};g[p.id.toString()]=c(e,p.name),r.push([p.name,g])}}}}catch(b){m.e(b)}finally{m.f()}return r}},66:function(t,e,n){"use strict";n.d(e,"b",(function(){return N})),n.d(e,"a",(function(){return _}));var r=n(18),i=n(14),a=n(0),o=n.n(a),s=n(167),u=n(169),l=n(255),c=n(245),m=n(247),p=n(77),f=n(244),h=n(246),d=n(123),v=n(157),g=n.n(v),b=n(120),k=n.n(b),y=n(56),O=n(57),S=n(156),j=n.n(S),E=n(178),w=n(170),C=n(175),T=n(173),A=n(174),M=n(172),P=n(12),x=n(41),R=Object(s.a)((function(t){return{root:{display:"flex"}}})),I=Object(P.a)({root:{marginLeft:0,marginRight:0}})(u.a),F=Object(P.a)({root:{padding:2}})(O.a),D=Object(P.a)({root:{textAlign:"center"}})(p.a);function _(t){var e=R(),n=o.a.useState(-1),a=Object(i.a)(n,2),s=a[0],u=a[1],v=o.a.useState(""),b=Object(i.a)(v,2),S=b[0],P=b[1],_=function(e,n){return o.a.createElement(p.a,{align:"center",key:"instrumentPanel-cell-"+n.toString()+"-"+e.toString()},o.a.createElement(I,{control:o.a.createElement(l.a,{checked:t.instrumentMask[e]===n,onChange:function(r){return function(e,n,r){var i=t.instrumentIndex[e].id,a=t.instruments.findIndex((function(t){return i in t[1]})),o=n;if(a!==o){var s=t.instruments[a],u=["",{}];if(null!=s){u[0]=s[0];for(var l=0,c=Object.keys(s[1]);l<c.length;l++){var m=c[l];m!==i.toString()&&(u[1][m]=s[1][m])}}var p=[t.instruments[o][0],Object.assign({},t.instruments[o][1])];p[1][i.toString()]=null!=s?s[1][i]:"X";for(var f=[],h=0;h<t.instruments.length;++h)h===a?f.push(u):h===o?f.push(p):f.push(t.instruments[h]);t.onChange(f)}}(e,n)},name:e+","+n.toString()})}))},N=function(e){return o.a.createElement(d.a,{key:"instrumentPanel-row-"+e.toString()},o.a.createElement(p.a,{component:"th",scope:"row",key:"instrumentPanel-row-"+e.toString()+"-name"},o.a.createElement(x.a,null,t.instruments[e][0]),o.a.createElement(F,{onClick:function(t){return u(e)}},o.a.createElement(k.a,{fontSize:"small"})),o.a.createElement(F,{onClick:function(n){!function(e){var n=t.instruments.slice(0,e).concat(t.instruments.slice(e+1));t.onChange(n)}(e)}},o.a.createElement(j.a,{fontSize:"small"}))),Object(r.a)(Array(t.instrumentIndex.length).keys()).map((function(t){return _(t,e)})))},B=o.a.useState(-1),L=Object(i.a)(B,2),z=L[0],G=L[1],K=o.a.useState(""),q=Object(i.a)(K,2),W=q[0],U=q[1];return o.a.createElement(o.a.Fragment,null,o.a.createElement(w.a,{open:s>=0,onClose:function(t){return u(-1)},"aria-labelledby":"form-dialog-title"},o.a.createElement(M.a,{id:"form-dialog-title"}),o.a.createElement(T.a,null,o.a.createElement(A.a,null,"Enter instrument name"),o.a.createElement(E.a,{autoFocus:!0,margin:"dense",id:"name",fullWidth:!0,value:S,onChange:function(t){return P(t.target.value)}})),o.a.createElement(C.a,null,o.a.createElement(y.a,{onClick:function(t){return u(-1)},color:"primary"},"Cancel"),o.a.createElement(y.a,{onClick:function(e){var n=S.trim();if(n.length>0)if(s===t.instruments.length){var r=[n,{}],i=Array.from(t.instruments);i.push(r),t.onChange(i)}else{var a=Array.from(t.instruments);a[s][0]=n,t.onChange(a)}u(-1),P("")},color:"primary"},"Confirm"))),o.a.createElement(w.a,{open:z>=0,onClose:function(t){return G(-1)},"aria-labelledby":"form-dialog-title"},o.a.createElement(M.a,{id:"form-dialog-title"}),o.a.createElement(T.a,null,o.a.createElement(A.a,null,"Enter notation symbol"),o.a.createElement(E.a,{autoFocus:!0,margin:"dense",id:"name",fullWidth:!0,value:W,onChange:function(t){return U(t.target.value)}})),o.a.createElement(C.a,null,o.a.createElement(y.a,{onClick:function(t){return G(-1)},color:"primary"},"Cancel"),o.a.createElement(y.a,{onClick:function(e){var n=W;if(1===n.length){var r=t.instrumentIndex[z].id,i=t.instruments.findIndex((function(t){return r in t[1]})),a=Array.from(t.instruments);a[i][1][r]=W,t.onChange(a)}else alert('You selected an invalid symbol "'+n+'".\nSymbols must be precisely 1 character.');G(-1)},color:"primary"},"Confirm"))),o.a.createElement(f.a,null,o.a.createElement(c.a,{className:e.table,"aria-label":"simple table"},o.a.createElement(h.a,null,o.a.createElement(d.a,{key:"instrumentPanel-row-header"},o.a.createElement(p.a,{key:"instrumentPanel-row-instrument"}," Instrument "),Object(r.a)(Array(t.instrumentIndex.length).keys()).map((function(e){return o.a.createElement(D,{key:"instrumentPanel-row-header-cell-"+e.toString()},o.a.createElement(x.a,null,t.instrumentIndex[e].name),o.a.createElement(F,{onClick:function(n){return function(e){var n=t.instrumentIndex[e].id,r=t.instruments.findIndex((function(t){return n in t[1]})),i=t.instruments[r][1][n];U(i),G(e)}(e)}},o.a.createElement(k.a,{fontSize:"small"})))})))),o.a.createElement(m.a,null,Object(r.a)(Array(t.instruments.length).keys()).map((function(t){return N(t)})),o.a.createElement(d.a,{key:"instrumentPanel-row-edit"},o.a.createElement(p.a,{component:"th",scope:"row",key:"instrumentPanel-row-edit-cell"},o.a.createElement(O.a,{onClick:function(e){return u(t.instruments.length)},"aria-label":"add"},o.a.createElement(g.a,null))))))))}function N(t,e){for(var n=Array(t.length),r=0;r<t.length;++r)for(var i=t[r].id,a=0;a<e.length;++a){var o=e[a];i.toString()in o[1]&&(n[r]=a)}return n}},75:function(t,e,n){"use strict";var r=n(15),i=n(1),a=n(2),o=n(91);function s(t,e){if(t<1||e<1)throw new Error("x<1 || y<1");for(;Math.max(t,e)%Math.min(t,e)!==0;)t>e?t%=e:e%=t;return Math.min(t,e)}var u=function(){function t(e,n){if(Object(i.a)(this,t),0===e.length)throw new Error("patternArray must not be zero length");this.rep=e,this.resolution=n}return Object(a.a)(t,[{key:"length",value:function(){return this.rep.length*this.resolution}},{key:"empty",value:function(){return 0===this.rep.reduce((function(t,e){return t+e}))}},{key:"_sumOverlapsOfArrays",value:function(t,e){for(var n=0,r=0;r<t.length;++r)t[r]&&e[r]&&n++;return n}},{key:"countOverlaps",value:function(t){if(this.resolution===t.resolution)return this._sumOverlapsOfArrays(this.rep,t.rep);var e=s(this.resolution,t.resolution),n=this.formatResolution(e),r=t.formatResolution(e);return this._sumOverlapsOfArrays(n.rep,r.rep)}},{key:"aggregate",value:function(e){if(this.resolution===e.resolution){for(var n=Math.max(this.rep.length,e.rep.length),r=new Array(n).fill(0),i=0;i<r.length;++i)r[i]=(i<this.rep.length?this.rep[i]:0)||(i<e.rep.length?e.rep[i]:0);return new t(r,this.resolution)}var a=s(this.resolution,e.resolution),o=this.formatResolution(a),u=e.formatResolution(a);return o.aggregate(u)}},{key:"format",value:function(e){var n=this.resolution*this.rep.length,r=this.toPoints(),i=t.representPoints(r,e,n);return i?new t(i,e):null}},{key:"toPoints",value:function(){var t,e=[],n=Object(r.a)(Array(this.rep.length).keys());try{for(n.s();!(t=n.n()).done;){var i=t.value;this.rep[i]&&e.push(this.resolution*i)}}catch(a){n.e(a)}finally{n.f()}return e}}],[{key:"representPoints",value:function(t,e,n){if(n<=0)throw new Error("size must be greater than zero");if(n<e||n%e!==0)throw new Error("resolution must be less than size and divide it evenly");var i,a=new Array(n/e).fill(0),o=Object(r.a)(t);try{for(o.s();!(i=o.n()).done;){var s=i.value;if(s%e!==0)throw new Error("Failed to represent point "+s.toString()+" at resolution "+e.toString());if(s>=n)throw new Error("Failed to represent point "+s.toString()+" for invalid specified size "+n.toString());a[s/e]=1}}catch(u){o.e(u)}finally{o.f()}return a}},{key:"fromPositions",value:function(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=null!==r&&void 0!==r?r:Object(o.a)(e,n);return new t(t.representPoints(e,i,n),i)}}]),t}();e.a=u},91:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n(15);function i(t,e){for(var n=t.concat([e]),i=0,a=[48,24,16,12,8,6,4,3,2,1];i<a.length;i++){var o,s=a[i],u=!0,l=Object(r.a)(n);try{for(l.s();!(o=l.n()).done;){if(o.value%s!==0){u=!1;break}}}catch(c){l.e(c)}finally{l.f()}if(u)return s}throw new Error("Failed to predict base")}}},[[190,1,2]]]);
//# sourceMappingURL=main.a954670a.chunk.js.map