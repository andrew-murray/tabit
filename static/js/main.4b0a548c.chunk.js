(this.webpackJsonptabit=this.webpackJsonptabit||[]).push([[0],{113:function(t,e,n){"use strict";n.d(e,"b",(function(){return k})),n.d(e,"a",(function(){return y}));var r=n(41),i=n(64),o=n(0),a=n.n(o),s=n(160),u=n(19),l=n(241),c=n(225),m=n(222),p=n(227),f=n(162),h=n(226),d=n(237),v=n(36),g=Object(s.a)((function(t){return{formControl:{margin:t.spacing(1),minWidth:120},selectEmpty:{marginTop:t.spacing(2)}}}));function b(t){var e=t.replace(/([A-Z])/g," $1");return e[0].toUpperCase()+e.slice(1)}function k(t){var e=g(t),n=Object(u.a)();function o(t){return" "===t?"space":t}function s(t){return"space"===t?" ":t}var k=function(e,n){var o=Object(i.a)(Object(i.a)({},t.settings),{},Object(r.a)({},e,n));t.onChange(o)},y=function(e){var n=Object(i.a)(Object(i.a)({},t.settings),{},Object(r.a)({},e.target.name,e.target.checked));t.onChange(n)};function O(n,r){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:s,u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:o,p="form-control-"+n+"-id";return a.a.createElement(m.a,{variant:"filled",className:e.formControl,key:p,id:p},a.a.createElement(l.a,{id:"settings-option-{name}"},n),a.a.createElement(d.a,{labelId:"settings-option-"+n+"-labelID",id:"settings-option-"+n+"-id",value:u(t.settings[n]),name:n,onChange:function(t){return k(t.target.name,i(t.target.value))}},r.map((function(t){return a.a.createElement(c.a,{key:"settings-menu-item-"+n+"-"+t,value:u(t)},u(t))}))))}for(var E=[],S=0,j=[2,3,4,5,6,7,8];S<j.length;S++){var w=48*j[S];if(w%t.settings.beatResolution===0&&E.push(w),w>t.settings.length)break}for(var C=[],M=0,T=[24,48,96];M<T.length;M++){var A=T[M];A%t.pattern.resolution===0&&C.push(A)}return a.a.createElement(p.a,{className:e.root},v.a.FORMAT_CONFIG_STRINGS.map((function(t){return O(t[0],t[1])})).reduce((function(t,e){return[t,e]})),v.a.FORMAT_CONFIG_BOOLS.map((function(e){return n=e,a.a.createElement(f.a,{control:a.a.createElement(h.a,{checked:t.settings[n],onChange:y,name:n}),label:b(n),key:"switch-"+n});var n})).reduce((function(t,e){return[t,e]})),a.a.createElement("div",{style:{backgroundColor:"white",color:n.palette.background.default}},a.a.createElement("p",null," ",t.pattern.name+" Options"," ")),O("beatResolution",C,(function(t){return t.toString()}),(function(t){return parseInt(t)})),O("lineResolution",E,(function(e){return t.settings.beatResolution*parseInt(e)}),(function(e){return(e/t.settings.beatResolution).toString()})))}var y=v.a.DEFAULT_FORMAT_CONFIG},140:function(t,e,n){"use strict";(function(t){var r=n(41),i=n(11),o=n(12),a=n(17),s=n(18),u=n(35),l=n(33),c=n(0),m=n.n(c),p=n(3),f=n(141),h=n(142),d=n(147),v=(n(219),n(239)),g=n(116),b=n(234),k=n(170),y=n(235),O=n(224),E=n(161),S=n(233),j=n(46),w=n(67),C=n(155),M=n.n(C),T=n(156),A=n.n(T),x=n(115),P=n.n(x),I=n(169),R=n(113),F=n(65),D=n(45),B=n(36),N=n(90),_=n(152),L=n(81),z=n(157),G=Object(g.a)({palette:{type:"dark",primary:{main:"#36d9be"},secondary:{main:"#f50057"}}}),K=function(e){Object(u.a)(c,e);var n=Object(l.a)(c);function c(t){var e;return Object(a.a)(this,c),(e=n.call(this,t)).state={instruments:null,instrumentIndex:null,instrumentMask:null,patterns:null,selectedPattern:null,loadedFile:null,settingsOpen:!1,patternsOpen:!1,formatSettings:Object.assign({},R.a),patternSettings:[],progress:null},e}return Object(s.a)(c,[{key:"figurePatternSettings",value:function(t){return Array.from(t,(function(t){return B.a.guessPerPatternSettings(t.instrumentTracks)}))}},{key:"handleFileImport",value:function(t){var e=this;d.a.parseHydrogenPromise(t.content).then((function(n){var r=Object(D.c)(n.instruments,D.a,n.patterns),i=Object(D.b)(n.instruments,n.patterns);e.setState({instrumentIndex:i,instrumentMask:Object(F.b)(i,r),instruments:r,patterns:n.patterns,selectedPattern:0===n.patterns.length?null:0,loadedFile:t.file.name,patternsOpen:!0,patternSettings:e.figurePatternSettings(n.patterns)})}))}},{key:"selectPattern",value:function(t){this.setState({selectedPattern:t})}},{key:"renderPattern",value:function(t,e){var n=this;return m.a.createElement(m.a.Fragment,null,m.a.createElement(h.a,{instruments:this.state.instruments,tracks:t.instrumentTracks,config:e,active:this.state.progress}),m.a.createElement(z.a,{instruments:this.state.instruments,instrumentIndex:this.state.instrumentIndex,tracks:t.instrumentTracks}),m.a.createElement(N.a,{container:!0},m.a.createElement(N.a,{item:!0,xs:2}),m.a.createElement(N.a,{item:!0,xs:8},m.a.createElement(F.a,{instruments:this.state.instruments,instrumentIndex:this.state.instrumentIndex,instrumentMask:this.state.instrumentMask,onChange:function(t){n.setState({instruments:t,instrumentMask:Object(F.b)(n.state.instrumentIndex,t)})}})),m.a.createElement(N.a,{item:!0,xs:2})))}},{key:"loadExample",value:function(){var t=function(t){var e,n=Object(o.a)(t.patterns);try{for(n.s();!(e=n.n()).done;){for(var r=e.value,a={},s=0,u=Object.entries(r.instrumentTracks);s<u.length;s++){var l=Object(i.a)(u[s],2),c=l[0],m=l[1];a[c]=new L.a(m.rep,m.resolution)}r.instrumentTracks=a}}catch(p){n.e(p)}finally{n.f()}return t}(_),e=Object(D.c)(t.instruments,D.a,t.patterns),n=Object(D.b)(t.instruments,t.patterns);this.setState({instrumentIndex:n,instrumentMask:Object(F.b)(n,e),instruments:e,patterns:t.patterns,selectedPattern:0===t.patterns.length?null:0,loadedFile:"kuva.example",patternsOpen:!0,patternSettings:this.figurePatternSettings(t.patterns)})}},{key:"checkMobile",value:function(){var t=navigator.userAgent||navigator.vendor||window.opera;return[/Android/i,/webOS/i,/iPhone/i,/iPad/i,/iPod/i,/BlackBerry/i,/Windows Phone/i].some((function(e){return t.match(e)}))}},{key:"getTrackLength",value:function(t){for(var e=48,n=0,r=Object.entries(t.instrumentTracks);n<r.length;n++){var o=Object(i.a)(r[n],2)[1];e=Math.max(e,o.length())}return e}},{key:"getResolution",value:function(t){for(var e=48,n=0,r=Object.entries(t.instrumentTracks);n<r.length;n++){var o=Object(i.a)(r[n],2)[1];e=Math.min(e,o.resolution)}return e}},{key:"renderMainContent",value:function(){var e=this;if(null==this.state.patterns||0===this.state.patterns.length){var n=null!=this.state.patterns&&0===this.state.patterns.length?m.a.createElement(v.a,{severity:"error"},this.state.loadedFile," contained no patterns! Try another."):"";return m.a.createElement(m.a.Fragment,null,m.a.createElement("div",null,m.a.createElement("h2",null,"tabit"),m.a.createElement("p",null,"I read .h2songs and write tab"),m.a.createElement(w.a,{variant:"contained",onClick:this.loadExample.bind(this)},"See an example"),m.a.createElement("p",null,"Or import your own"),m.a.createElement(f.a,{onImport:this.handleFileImport.bind(this)}),n),m.a.createElement("div",{style:{position:"absolute",bottom:0}},m.a.createElement("p",null,"tabit relies on publicly available sound libraries listed at ",m.a.createElement("a",{href:"https://github.com/andrew-murray/tabit"},"https://github.com/andrew-murray/tabit"))))}var o,a=this.state.patterns[this.state.selectedPattern],s=Object.assign(Object.assign({},this.state.formatSettings),this.state.patternSettings[this.state.selectedPattern]),u=this.renderPattern(a,s),l=function(t){return t&&"keydown"===t.type&&("Tab"===t.key||"Shift"===t.key)},c=function(t){l(t)||e.setState({settingsOpen:!0})},h=function(t){l(t)||e.setState({settingsOpen:!1})},d=function(t){l(t)||e.setState({patternsOpen:!1})},g=function(t){l(t)||e.setState({patternsOpen:!0})},b=this.props,y=t.browser&&/iPad|iPhone|iPod/.test(navigator.userAgent),C=this.checkMobile(),T={name:a.name,resolution:a.resolution,length:this.getTrackLength(a)};return m.a.createElement(m.a.Fragment,null,m.a.createElement("div",{style:{display:"flex",width:"95%"}},m.a.createElement(j.a,{color:"inherit","aria-label":"open drawer",edge:"start",onClick:g,className:Object(p.a)(Object(r.a)({},b.hide,!this.state.patternsOpen))},m.a.createElement(P.a,null)),m.a.createElement("div",{className:"content-title",style:{flexGrow:1}}),m.a.createElement(j.a,{color:"inherit","aria-label":"open drawer",edge:"end",onClick:c,className:Object(p.a)(this.state.settingsOpen&&b.hide)},m.a.createElement(M.a,null))),u,m.a.createElement(k.a,{disableBackdropTransition:!y,disableDiscovery:y,className:b.drawer,variant:C?void 0:"persistent",open:this.state.patternsOpen,onOpen:g,onClose:d},m.a.createElement("div",{className:b.drawerHeader},m.a.createElement(j.a,{onClick:d},m.a.createElement(A.a,null))),m.a.createElement(I.a,null),m.a.createElement("div",{className:b.drawerContainer},m.a.createElement(O.a,null,(null!==(o=this.state.patterns)&&void 0!==o?o:[]).map((function(t,n){return m.a.createElement(E.a,{button:!0,key:"drawer-pattern"+n.toString(),onClick:function(){return e.selectPattern(n)}},m.a.createElement(S.a,{primary:t.name}))}))))),m.a.createElement(k.a,{disableBackdropTransition:!y,disableDiscovery:y,className:b.drawer,variant:C?void 0:"persistent",anchor:"right",open:this.state.settingsOpen,onOpen:c,onClose:h,classes:{paper:b.drawerPaper}},m.a.createElement("div",{className:b.drawerHeader},m.a.createElement(j.a,{onClick:h},m.a.createElement(P.a,null))),m.a.createElement(I.a,null),m.a.createElement(R.b,{onChange:function(t){for(var n=Array.from(e.state.patternSettings),r=Object.assign({},e.state.formatSettings),o=0,a=Object.entries(t);o<a.length;o++){var s=Object(i.a)(a[o],2),u=s[0],l=s[1];u in n[e.state.selectedPattern]?n[e.state.selectedPattern][u]=l:r[u]=l}e.setState({formatSettings:r,patternSettings:n})},settings:s,pattern:T})))}},{key:"render",value:function(){var t=this.renderMainContent();return m.a.createElement("div",{className:"App"},m.a.createElement(b.a,{theme:G},m.a.createElement(y.a,null),t))}}]),c}(m.a.Component);e.a=K}).call(this,n(58))},141:function(t,e,n){"use strict";var r=n(17),i=n(18),o=n(76),a=n(35),s=n(33),u=n(0),l=n.n(u),c=function(t){Object(a.a)(n,t);var e=Object(s.a)(n);function n(t){var i;return Object(r.a)(this,n),(i=e.call(this,t)).onChange=i.onChange.bind(Object(o.a)(i)),i}return Object(i.a)(n,[{key:"onChange",value:function(t){var e=this,n=t.target.files[0],r=new FileReader;r.onload=function(t){e.props.onImport&&e.props.onImport({file:n,content:t.target.result})},r.readAsText(n)}},{key:"render",value:function(){return l.a.createElement("input",{type:"file",onChange:this.onChange})}}]),n}(l.a.Component);e.a=c},142:function(t,e,n){"use strict";var r=n(11),i=n(12),o=n(17),a=n(18),s=n(35),u=n(33),l=n(0),c=n.n(l),m=n(36),p=n(4),f=function(t){Object(s.a)(n,t);var e=Object(u.a)(n);function n(t){var r;return Object(o.a)(this,n),(r=e.call(this,t)).state={},r}return Object(a.a)(n,[{key:"formatText",value:function(t){var e,n=this.props.config,o=[],a=Object(i.a)(t);try{for(a.s();!(e=a.n()).done;){var s=Object(r.a)(e.value,2),u=s[0],l=s[1],c=m.a.fromInstrumentAndTrack(l,this.props.tracks,!0,n);o.push(u);var p,f=Object(i.a)(c.split("\n"));try{for(f.s();!(p=f.n()).done;){var h=p.value;o.push(h)}}catch(d){f.e(d)}finally{f.f()}}}catch(d){a.e(d)}finally{a.f()}return o}},{key:"render",value:function(){var t=this.props.classes;return c.a.createElement("div",{className:t.root},this.formatText(this.props.instruments).map((function(t,e){return c.a.createElement("p",{key:e.toString(),dangerouslySetInnerHTML:{__html:t}})})))}}]),n}(c.a.Component);e.a=Object(p.a)((function(t){return{root:{"margin-bottom":t.spacing(2),fontFamily:"Roboto Mono",textAlign:"left",whiteSpace:"pre","& .activeNote":{color:t.palette.secondary.main}}}}))(f)},147:function(t,e,n){"use strict";var r=n(112),i=n.n(r),o=n(148),a=n(12),s=n(81),u=n(149),l=n.n(u),c=n(82);function m(t){var e=t.song.instrumentList[0].instrument,n=Array.from(e,(function(t){var e=t.instrumentComponent[0],n={id:parseInt(t.id),name:t.name,volume:parseFloat(t.volume),muted:"true"===t.isMuted[0],gain:parseFloat(t.gain),drumkit:t.drumkit[0]};return"layer"in e&&(n.filename=e.layer[0].filename[0]),n})),r=t.song.patternList[0].pattern,i=Array.from(r,(function(t){var e=t.noteList[0].note,n=parseInt(t.size),r=[];return e&&(r=(r=Array.from(e,(function(t){return{position:parseInt(t.position),instrument:parseInt(t.instrument)}}))).filter((function(t){return t.position<n}))),{size:n,name:t.name,notes:r}})),o=Array.from(i,(function(t){var e,r=function(t,e){var n=Array.from(t.notes,(function(t){return t.position}));return Object(c.a)(n,e)}(t,t.size),i={},o=Object(a.a)(n);try{var u=function(){var n=e.value,o=t.notes.filter((function(t){return t.instrument===n.id})),a=Array.from(o,(function(t){return t.position}));i[n.id.toString()]=s.a.fromPositions(a,t.size,r)};for(o.s();!(e=o.n()).done;)u()}catch(l){o.e(l)}finally{o.f()}return t.resolution=r,t.instrumentTracks=i,t}));return{instruments:n,patterns:o}}function p(){return(p=Object(o.a)(i.a.mark((function t(e){var n;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=new l.a.Parser,t.abrupt("return",n.parseStringPromise(e).then(m));case 2:case"end":return t.stop()}}),t)})))).apply(this,arguments)}e.a={parseHydrogenPromise:function(t){return p.apply(this,arguments)}}},152:function(t){t.exports=JSON.parse('{"instruments":[{"id":23,"name":["Stick"],"volume":0.99569,"muted":false,"gain":1,"drumkit":"GMRockKit","filename":"SideStick-Softest.wav"},{"id":24,"name":["Kick Short"],"volume":1,"muted":false,"gain":1,"drumkit":"TR808EmulationKit","filename":"808_Kick_Short.flac"},{"id":20,"name":["Stick"],"volume":0.193966,"muted":false,"gain":1,"drumkit":"DeathMetal"},{"id":26,"name":["Stick"],"volume":0.99569,"muted":false,"gain":1,"drumkit":"GMRockKit","filename":"SideStick-Softest.wav"},{"id":25,"name":["Kick Short"],"volume":1,"muted":false,"gain":1,"drumkit":"TR808EmulationKit","filename":"808_Kick_Short.flac"},{"id":22,"name":["tom02"],"volume":0.65,"muted":false,"gain":1,"drumkit":"DeathMetal"},{"id":27,"name":["snare"],"volume":0.49,"muted":false,"gain":1,"drumkit":"DeathMetal","filename":"014b.WAV"},{"id":13,"name":["Snare 1"],"volume":0.35,"muted":false,"gain":0.4,"drumkit":"DeathMetal"},{"id":10,"name":["Djembe4 Slap"],"volume":0.12931,"muted":false,"gain":1,"drumkit":"circAfrique v4","filename":"Djembe4 Slap.wav"},{"id":11,"name":["Djembe4 Tone"],"volume":0.12931,"muted":false,"gain":0.95,"drumkit":"circAfrique v4","filename":"Djembe4 Tone.wav"},{"id":12,"name":["Djembe4 Bass"],"volume":0.181034,"muted":false,"gain":1.5,"drumkit":"circAfrique v4","filename":"Djembe4 Bass.wav"},{"id":16,"name":["Shaker"],"volume":0.232759,"muted":false,"gain":2.2,"drumkit":"TR808EmulationKit","filename":"808_Shaker.flac"},{"id":21,"name":["Shaker"],"volume":1.5,"muted":false,"gain":2.45,"drumkit":"TR808EmulationKit","filename":"808_Shaker.flac"}],"patterns":[{"size":384,"name":["k-1"],"notes":[{"position":0,"instrument":21},{"position":0,"instrument":24},{"position":0,"instrument":26},{"position":0,"instrument":11},{"position":12,"instrument":21},{"position":24,"instrument":11},{"position":24,"instrument":21},{"position":24,"instrument":24},{"position":24,"instrument":26},{"position":24,"instrument":27},{"position":36,"instrument":21},{"position":36,"instrument":11},{"position":48,"instrument":21},{"position":48,"instrument":11},{"position":48,"instrument":23},{"position":48,"instrument":26},{"position":48,"instrument":27},{"position":60,"instrument":24},{"position":72,"instrument":10},{"position":72,"instrument":21},{"position":72,"instrument":26},{"position":84,"instrument":25},{"position":96,"instrument":23},{"position":96,"instrument":26},{"position":108,"instrument":25},{"position":120,"instrument":12},{"position":120,"instrument":25},{"position":144,"instrument":12},{"position":144,"instrument":21},{"position":144,"instrument":23},{"position":144,"instrument":25},{"position":144,"instrument":27},{"position":156,"instrument":21},{"position":168,"instrument":21},{"position":180,"instrument":27},{"position":192,"instrument":11},{"position":192,"instrument":21},{"position":192,"instrument":24},{"position":192,"instrument":26},{"position":216,"instrument":12},{"position":216,"instrument":21},{"position":216,"instrument":24},{"position":216,"instrument":26},{"position":216,"instrument":27},{"position":240,"instrument":11},{"position":240,"instrument":23},{"position":240,"instrument":26},{"position":240,"instrument":27},{"position":252,"instrument":12},{"position":252,"instrument":24},{"position":264,"instrument":21},{"position":264,"instrument":27},{"position":276,"instrument":11},{"position":276,"instrument":25},{"position":288,"instrument":12},{"position":288,"instrument":21},{"position":288,"instrument":24},{"position":288,"instrument":25},{"position":300,"instrument":21},{"position":312,"instrument":11},{"position":312,"instrument":23},{"position":312,"instrument":26},{"position":324,"instrument":12},{"position":324,"instrument":21},{"position":324,"instrument":24},{"position":324,"instrument":25},{"position":336,"instrument":21},{"position":336,"instrument":27},{"position":360,"instrument":21},{"position":360,"instrument":10},{"position":360,"instrument":23},{"position":360,"instrument":26},{"position":360,"instrument":27},{"position":372,"instrument":21},{"position":372,"instrument":27}],"resolution":12,"instrumentTracks":{"10":{"rep":[0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0],"resolution":12},"11":{"rep":[1,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,1,0,0,1,0,0,1,0,0,0,0,0],"resolution":12},"12":{"rep":[0,0,0,0,0,0,0,0,0,0,1,0,1,0,0,0,0,0,1,0,0,1,0,0,1,0,0,1,0,0,0,0],"resolution":12},"13":{"rep":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"resolution":12},"16":{"rep":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"resolution":12},"20":{"rep":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"resolution":12},"21":{"rep":[1,1,1,1,1,0,1,0,0,0,0,0,1,1,1,0,1,0,1,0,0,0,1,0,1,1,0,1,1,0,1,1],"resolution":12},"22":{"rep":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"resolution":12},"23":{"rep":[0,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,1,0],"resolution":12},"24":{"rep":[1,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,1,0,1,0,0,1,0,0,1,0,0,1,0,0,0,0],"resolution":12},"25":{"rep":[0,0,0,0,0,0,0,1,0,1,1,0,1,0,0,0,0,0,0,0,0,0,0,1,1,0,0,1,0,0,0,0],"resolution":12},"26":{"rep":[1,0,1,0,1,0,1,0,1,0,0,0,0,0,0,0,1,0,1,0,1,0,0,0,0,0,1,0,0,0,1,0],"resolution":12},"27":{"rep":[0,0,1,0,1,0,0,0,0,0,0,0,1,0,0,1,0,0,1,0,1,0,1,0,0,0,0,0,1,0,1,1],"resolution":12}}},{"size":384,"name":["k-2"],"notes":[{"position":0,"instrument":12},{"position":0,"instrument":21},{"position":0,"instrument":24},{"position":0,"instrument":25},{"position":0,"instrument":27},{"position":12,"instrument":12},{"position":12,"instrument":24},{"position":12,"instrument":25},{"position":24,"instrument":12},{"position":24,"instrument":21},{"position":24,"instrument":24},{"position":24,"instrument":25},{"position":36,"instrument":21},{"position":48,"instrument":21},{"position":48,"instrument":10},{"position":48,"instrument":23},{"position":48,"instrument":26},{"position":48,"instrument":27},{"position":72,"instrument":21},{"position":84,"instrument":21},{"position":84,"instrument":27},{"position":96,"instrument":21},{"position":96,"instrument":23},{"position":96,"instrument":26},{"position":108,"instrument":21},{"position":108,"instrument":27},{"position":120,"instrument":11},{"position":120,"instrument":21},{"position":132,"instrument":10},{"position":132,"instrument":27},{"position":144,"instrument":23},{"position":144,"instrument":26},{"position":144,"instrument":27},{"position":156,"instrument":10},{"position":168,"instrument":12},{"position":168,"instrument":21},{"position":168,"instrument":24},{"position":168,"instrument":25},{"position":180,"instrument":12},{"position":180,"instrument":24},{"position":180,"instrument":25},{"position":192,"instrument":12},{"position":192,"instrument":21},{"position":192,"instrument":24},{"position":192,"instrument":25},{"position":192,"instrument":27},{"position":216,"instrument":21},{"position":216,"instrument":11},{"position":228,"instrument":11},{"position":228,"instrument":21},{"position":228,"instrument":27},{"position":240,"instrument":21},{"position":240,"instrument":23},{"position":240,"instrument":26},{"position":240,"instrument":27},{"position":252,"instrument":10},{"position":264,"instrument":21},{"position":264,"instrument":11},{"position":276,"instrument":21},{"position":276,"instrument":27},{"position":288,"instrument":11},{"position":288,"instrument":21},{"position":288,"instrument":23},{"position":288,"instrument":26},{"position":300,"instrument":11},{"position":312,"instrument":21},{"position":324,"instrument":10},{"position":336,"instrument":11},{"position":336,"instrument":23},{"position":336,"instrument":26},{"position":360,"instrument":21}],"resolution":12,"instrumentTracks":{"10":{"rep":[0,0,0,0,1,0,0,0,0,0,0,1,0,1,0,0,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0],"resolution":12},"11":{"rep":[0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,1,1,0,0,1,0,1,1,0,0,1,0,0,0],"resolution":12},"12":{"rep":[1,1,1,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"resolution":12},"13":{"rep":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"resolution":12},"16":{"rep":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"resolution":12},"20":{"rep":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"resolution":12},"21":{"rep":[1,0,1,1,1,0,1,1,1,1,1,0,0,0,1,0,1,0,1,1,1,0,1,1,1,0,1,0,0,0,1,0],"resolution":12},"22":{"rep":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"resolution":12},"23":{"rep":[0,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0],"resolution":12},"24":{"rep":[1,1,1,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"resolution":12},"25":{"rep":[1,1,1,0,0,0,0,0,0,0,0,0,0,0,1,1,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"resolution":12},"26":{"rep":[0,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0],"resolution":12},"27":{"rep":[1,0,0,0,1,0,0,1,0,1,0,1,1,0,0,0,1,0,0,1,1,0,0,1,0,0,0,0,0,0,0,0],"resolution":12}}},{"size":192,"name":["lightbulb"],"notes":[{"position":0,"instrument":24},{"position":12,"instrument":24},{"position":24,"instrument":24},{"position":36,"instrument":24},{"position":48,"instrument":24},{"position":96,"instrument":27},{"position":144,"instrument":24},{"position":160,"instrument":24},{"position":176,"instrument":24}],"resolution":4,"instrumentTracks":{"10":{"rep":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"resolution":4},"11":{"rep":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"resolution":4},"12":{"rep":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"resolution":4},"13":{"rep":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"resolution":4},"16":{"rep":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"resolution":4},"20":{"rep":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"resolution":4},"21":{"rep":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"resolution":4},"22":{"rep":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"resolution":4},"23":{"rep":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"resolution":4},"24":{"rep":[1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,1,0,0,0,1,0,0,0],"resolution":4},"25":{"rep":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"resolution":4},"26":{"rep":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"resolution":4},"27":{"rep":[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],"resolution":4}}},{"size":192,"name":["break"],"notes":[{"position":24,"instrument":21},{"position":24,"instrument":11},{"position":24,"instrument":27},{"position":48,"instrument":21},{"position":48,"instrument":11},{"position":48,"instrument":27},{"position":96,"instrument":21},{"position":96,"instrument":11},{"position":96,"instrument":27},{"position":120,"instrument":21},{"position":120,"instrument":11},{"position":120,"instrument":27},{"position":144,"instrument":24},{"position":168,"instrument":21},{"position":168,"instrument":11},{"position":168,"instrument":24},{"position":168,"instrument":27}],"resolution":24,"instrumentTracks":{"10":{"rep":[0,0,0,0,0,0,0,0],"resolution":24},"11":{"rep":[0,1,1,0,1,1,0,1],"resolution":24},"12":{"rep":[0,0,0,0,0,0,0,0],"resolution":24},"13":{"rep":[0,0,0,0,0,0,0,0],"resolution":24},"16":{"rep":[0,0,0,0,0,0,0,0],"resolution":24},"20":{"rep":[0,0,0,0,0,0,0,0],"resolution":24},"21":{"rep":[0,1,1,0,1,1,0,1],"resolution":24},"22":{"rep":[0,0,0,0,0,0,0,0],"resolution":24},"23":{"rep":[0,0,0,0,0,0,0,0],"resolution":24},"24":{"rep":[0,0,0,0,0,0,1,1],"resolution":24},"25":{"rep":[0,0,0,0,0,0,0,0],"resolution":24},"26":{"rep":[0,0,0,0,0,0,0,0],"resolution":24},"27":{"rep":[0,1,1,0,1,1,0,1],"resolution":24}}},{"size":192,"name":["squash"],"notes":[{"position":0,"instrument":21},{"position":0,"instrument":12},{"position":0,"instrument":24},{"position":0,"instrument":27},{"position":48,"instrument":21},{"position":48,"instrument":12},{"position":48,"instrument":24},{"position":48,"instrument":27},{"position":96,"instrument":21},{"position":96,"instrument":12},{"position":96,"instrument":24},{"position":96,"instrument":27},{"position":144,"instrument":21},{"position":144,"instrument":12},{"position":144,"instrument":24},{"position":144,"instrument":27}],"resolution":48,"instrumentTracks":{"10":{"rep":[0,0,0,0],"resolution":48},"11":{"rep":[0,0,0,0],"resolution":48},"12":{"rep":[1,1,1,1],"resolution":48},"13":{"rep":[0,0,0,0],"resolution":48},"16":{"rep":[0,0,0,0],"resolution":48},"20":{"rep":[0,0,0,0],"resolution":48},"21":{"rep":[1,1,1,1],"resolution":48},"22":{"rep":[0,0,0,0],"resolution":48},"23":{"rep":[0,0,0,0],"resolution":48},"24":{"rep":[1,1,1,1],"resolution":48},"25":{"rep":[0,0,0,0],"resolution":48},"26":{"rep":[0,0,0,0],"resolution":48},"27":{"rep":[1,1,1,1],"resolution":48}}}]}')},157:function(t,e,n){"use strict";var r=n(11),i=n(17),o=n(18),a=n(35),s=n(33),u=n(0),l=n.n(u),c=n(12),m=function(){function t(){Object(i.a)(this,t)}return Object(o.a)(t,null,[{key:"createWebContext",value:function(){return new(window.AudioContext||window.webkitAudioContext||Object)}},{key:"determineMinResolution",value:function(t,e){for(var n=48,i=function(){var e=Object(r.a)(a[o],2),i=e[0],s=e[1];t.filter((function(t){return t.id.toString()===i})).length>0&&!s.empty()&&(n=Math.min(n,s.resolution))},o=0,a=Object.entries(e);o<a.length;o++)i();return n}},{key:"determineTrackLength",value:function(t,e){for(var n=48,i=function(){var e=Object(r.a)(a[o],2),i=e[0],s=e[1];t.filter((function(t){return t.id.toString()===i})).length>0&&!s.empty()&&(n=Math.max(n,s.length()))},o=0,a=Object.entries(e);o<a.length;o++)i();return n}},{key:"peakAmplitude",value:function(t){for(var e=0,n=0;n<t.numberOfChannels;n++)for(var r=t.getChannelData(n),i=0;i<r.length;++i)e=Math.max(Math.abs(r[i]),e);return e}},{key:"normalizeAudioBuffer",value:function(e){var n=t.peakAmplitude(e);if(n>1)for(var r=0;r<e.numberOfChannels;r++)for(var i=e.getChannelData(r),o=0;o<i.length;++o)i[o]=i[o]/n;return e}},{key:"createMasterTrack",value:function(e,n,i,o,a){for(var s=t.determineTrackLength(i,n),u=44100*(s*(60/a*1e3/48))/1e3,l=Math.floor(u),m=Math.floor(l/s),p=e.createBuffer(2,l,44100),f=0;f<p.numberOfChannels;f++)for(var h=p.getChannelData(f),d=function(){var t=Object(r.a)(g[v],2),e=t[0],n=t[1],a=i.filter((function(t){return t.id.toString()===e}));if(a.length>0&&a[0].id in o&&!n.empty()){var s,u=o[a[0].id],l=2===u.numberOfChannels?u.getChannelData(f):u.getChannelData(0),p=n.toPoints(),d=Object(c.a)(p);try{for(d.s();!(s=d.n()).done;)for(var b=s.value*m,k=0;k<u.length;++k)h[b+k]=h[b+k]+l[k]}catch(y){d.e(y)}finally{d.f()}}},v=0,g=Object.entries(n);v<g.length;v++)d();return t.normalizeAudioBuffer(p)}},{key:"createAudioSource",value:function(t,e){var n=t.createBufferSource();return n.buffer=e,n.loop=!0,n.connect(t.destination),n}}]),t}(),p=function(){function t(){Object(i.a)(this,t)}return Object(o.a)(t,null,[{key:"make",value:function(t){return new Promise((function(e,n){var r=new XMLHttpRequest;r.open("GET",t),r.responseType="arraybuffer",r.onload=function(){200===r.status?e(r.response):n(Error("Buffer didn't load successfully; error code:"+r.statusText))},r.onerror=function(){n(Error("There was a network error."))},r.send()}))}},{key:"parse",value:function(t,e){return new Promise((function(n,r){t.decodeAudioData(e,(function(t){t?n(t):r("buffer null")}),(function(t){r(t)}))}))}}]),t}(),f=n(46),h=n(153),d=n.n(h),v=n(154),g=n.n(v),b=["circAfrique v4","DeathMetal","The Black Pearl 1.0","GMRockKit","TR808EmulationKit"],k=function(t){Object(a.a)(n,t);var e=Object(s.a)(n);function n(t){var r;return Object(i.a)(this,n),(r=e.call(this,t)).state={audioBuffer:null,audioSource:null,soundsPopulated:!1},r.sounds={},r.audioContext=null,r}return Object(o.a)(n,[{key:"populateSounds",value:function(){var t=this;null===this.audioContext&&(this.audioContext=m.createWebContext());for(var e=[],n=function(){var n=Object(r.a)(o[i],1)[0],a=t.props.instrumentIndex.filter((function(t){return t.id.toString()===n}));if(a.length>0){var s=a[0];if("drumkit"in s&&"filename"in s&&b.includes(s.drumkit)){var u=s.filename.replace(".flac",".wav");if(!(s.id in t.sounds)){var l="/tabit/wav/"+s.drumkit+"/"+u,c=t.audioContext,m=t.sounds;e.push(p.make(l).then((function(t){return p.parse(c,t)})).then((function(t){m[s.id]=t})).catch((function(t){console.log(t)})))}}}},i=0,o=Object.entries(this.props.tracks);i<o.length;i++)n();var a=this.sounds,s=this.props.instrumentIndex,u=this.props.tracks,l=this;Promise.all(e).then((function(){var t=m.createMasterTrack(l.audioContext,u,s,a,100);l.setState({audioBuffer:t,resolution:m.determineMinResolution(s,u),length:m.determineTrackLength(s,u),soundsPopulated:!0})}))}},{key:"stop",value:function(){this.state.audioSource&&(this.state.audioSource.stop(),null!=this.timeoutID&&(clearTimeout(this.timeoutID),this.timeoutID=null),this.playPos=0,this.setState({audioSource:null}))}},{key:"componentDidUpdate",value:function(t,e,n){var r=t.tracks!==this.props.tracks;if(r&&this.stop(),r&&this.state.soundsPopulated){var i=m.createMasterTrack(this.audioContext,this.props.tracks,this.props.instrumentIndex,this.sounds,100);this.setState({audioBuffer:i,resolution:m.determineMinResolution(this.props.instrumentIndex,this.props.tracks),length:m.determineTrackLength(this.props.instrumentIndex,this.props.tracks)}),e.audioSource&&this.playBuffer(i)}}},{key:"componentDidMount",value:function(){this.populateSounds()}},{key:"playBuffer",value:function(t){var e=this,n=m.createAudioSource(this.audioContext,t);n.start(),this.startTime=this.audioContext.currentTime;this.props.onPlaybackPositionChange&&function t(){var n=e.audioContext.currentTime,r=(n-e.startTime)/e.state.audioBuffer.duration%1,i=(n-e.startTime)/.15,o=Math.round(i),a=e.startTime+.15*(o+1);e.timeoutID=setTimeout(t,Math.floor(1e3*(a-m.context.currentTime))),e.props.onPlaybackPositionChange&&e.props.onPlaybackPositionChange(r)}(),this.setState({audioSource:n})}},{key:"render",value:function(){var t=this;return l.a.createElement(l.a.Fragment,null,l.a.createElement("div",null,l.a.createElement(f.a,{color:"primary","aria-label":"play",onClick:function(e){!t.state.audioSource&&t.state.audioBuffer&&t.playBuffer(t.state.audioBuffer)}},l.a.createElement(d.a,null)),l.a.createElement(f.a,{color:"secondary","aria-label":"stop",onClick:function(e){t.stop()}},l.a.createElement(g.a,null))))}}]),n}(l.a.Component);e.a=k},183:function(t,e,n){t.exports=n(221)},188:function(t,e,n){},207:function(t,e){},209:function(t,e){},219:function(t,e,n){},221:function(t,e,n){"use strict";n.r(e);var r=n(0),i=n.n(r),o=n(10),a=n.n(o),s=(n(188),n(140));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));a.a.render(i.a.createElement(i.a.StrictMode,null,i.a.createElement(s.a,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(t){t.unregister()})).catch((function(t){console.error(t.message)}))},36:function(t,e,n){"use strict";var r=n(11),i=n(17),o=n(18),a=function(){function t(){Object(i.a)(this,t)}return Object(o.a)(t,null,[{key:"validateConfig",value:function(t,e){if(null!=e&&t.beatResolution%e!==0)throw new Error("patternResolution doesn't divide beatResolution");if(t.lineResolution<=0)throw new Error("config.lineResolution must be greater than zero")}},{key:"chunkString",value:function(t,e){if(e<=0)throw new Error("chunkSize must be > 0");return t.match(new RegExp(".{1,"+e+"}","g"))}},{key:"createNumberMarker",value:function(t,e,n,r){if(r<=0)throw new Error("lineLength <= 0");if(e%n!==0)throw new Error("patternResolution "+n.toString()+" does not divide beatResolution "+e.toString());for(var i=Math.ceil(r/e),o=Array.from(Array(r/n),(function(e){return t})),a=0;a<i;a++)o[a*(e/n)]=((a+1)%10).toString();return o.join("")}},{key:"formatLineWithMarkers",value:function(e,n,r,i){t.validateConfig(e);for(var o=e.beatResolution/r,a=i?function(t,e){return"<span class='note-"+(n=e,((n+="").length>=(r=4)?n:new Array(r-n.length+1).join("0")+n)+"'>")+t+"</span>";var n,r}:function(t,e){return t},s="",u=0;u<n.length;++u){var l=r*u;s+=a(n.charAt(u),l)}var c=e.showBeatMark?t.chunkString(s,o*a("X",0).length).join(e.beatMark):s;return e.lineMark+c+e.lineMark}},{key:"defaultLineResolution",value:function(t,e){var n=Object.values(t);if(0===n.length)return 384;var r=n[0].length(),i=r/e;return i<=12?r:i>32?768:[r,r/2,r/3,r/2,r,r/3,r,r/4,r/3,r/2,r,r/3,r/5,r,r/3,r/4,r,r/6,r,r/4][i-13]}},{key:"guessPerPatternSettings",value:function(e){return{lineResolution:t.defaultLineResolution(e,48),beatResolution:48}}},{key:"fromInstrumentAndTrack",value:function(e,n,i){for(var o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=0,s=Object.keys(o);a<s.length;a++){var u=s[a];if(!t.DEFAULT_FORMAT_CONFIG.hasOwnProperty(u))throw new Error("passed unrecognised property "+u)}var l=Object.assign(Object.assign({},t.DEFAULT_FORMAT_CONFIG),o),c=Object.values(n);if(0===c.length)return"";for(var m=c[0].length(),p=c[0].resolution,f=c[0].length()/c[0].resolution,h=Array(f).fill(l.restMark),d=0;d<h.length;++d)for(var v=0,g=Object.entries(e);v<g.length;v++){var b=Object(r.a)(g[v],2),k=b[0],y=b[1],O=n[k];null!=O&&1===O.rep[d]&&(h[d]=y)}var E=h.join(""),S=t.chunkString(E,l.lineResolution/p),j=[];l.showBeatNumbers&&j.push(t.formatLineWithMarkers(l,t.createNumberMarker(l.numberRestMark,l.beatResolution,p,Math.min(l.lineResolution,m)),p,i));for(var w=0;w<S.length;++w)j.push(t.formatLineWithMarkers(l,S[w],p,i));return j.join("\n")}}]),t}();a.DEFAULT_FORMAT_CONFIG={restMark:"-",beatMark:"|",lineMark:"|",numberRestMark:"-",beatResolution:48,showBeatMark:!0,showBeatNumbers:!0,lineResolution:384},a.FORMAT_CONFIG_STRINGS=[["restMark",["-","."," "]],["numberRestMark",["-","."," "]]],a.FORMAT_CONFIG_BOOLS=["showBeatMark","showBeatNumbers"],e.a=a},45:function(t,e,n){"use strict";n.d(e,"b",(function(){return l})),n.d(e,"a",(function(){return o})),n.d(e,"c",(function(){return c}));var r=n(11),i=n(12),o={"Djembe Slap":"S","Djembe Tone":"t","Djembe Bass":"O","Snare Ghost":"-","Snare Accent":"X","Shaker Ghost":"x","Shaker Accent":"X",Click:"X",Bass:"O",Tom:"O",Default:"X"};function a(t){var e,n=[],r=Object(i.a)(t);try{for(r.s();!(e=r.n()).done;){var o=e.value,a=Object.assign({},o);a.name=a.name[0].toLowerCase(),n.push(a)}}catch(s){r.e(s)}finally{r.f()}return n}function s(t,e,n,r){var o=[];if(2===t.length){var a=t[0],s=t[1],u=a.volume>s.volume||a.volume===s.volume&&a.gain>s.gain,l={};l[a.id.toString()]=u?n:r,l[s.id.toString()]=u?r:n,o.push([e,l])}else{var c,m=Object(i.a)(t);try{for(m.s();!(c=m.n()).done;){var p=c.value,f={};f[p.id.toString()]=n,o.push([e,f])}}catch(h){m.e(h)}finally{m.f()}}return o}function u(t){var e,n=new Set,o=Object(i.a)(t);try{for(o.s();!(e=o.n()).done;)for(var a=e.value,s=0,u=Object.entries(a.instrumentTracks);s<u.length;s++){var l=Object(r.a)(u[s],2),c=l[0];l[1].empty()||n.add(parseInt(c))}}catch(m){o.e(m)}finally{o.f()}return n}function l(t,e){var n,r=u(e),o=[],a=Object(i.a)(t);try{for(a.s();!(n=a.n()).done;){var s=n.value;r.has(s.id)&&o.push(s)}}catch(l){a.e(l)}finally{a.f()}return o}function c(t,e,n){var r=[];r=(r=(r=(r=r.concat(function(t,e,n){for(var r=a(t),i=u(n),o=r.filter((function(t){return i.has(t.id)&&!t.name.includes("djembe")&&(t.name.includes("click")||t.name.includes("stick")||t.name.includes("tom")||t.name.includes("bass")||t.name.includes("kick"))})),s=Array.from(o,(function(t){return t.name.includes("click")||t.name.includes("stick")})),l=[],c=0;c<Math.floor(o.length/2);++c)if(s[2*c]!==s[2*c+1]){var m=s[2*c]?o[2*c]:o[2*c+1],p=s[2*c]?o[2*c+1]:o[2*c],f=p.name.includes("tom")?"Tom":"Bass",h={};h[p.id.toString()]=e[f],h[m.id.toString()]=e.Click,l.push([f,h])}if(o.length%2!==0&&!s[o.length-1]){var d=o[o.length-1],v=d.name.includes("tom")?"Tom":"Bass",g={};g[d.id.toString()]=e[v],l.push([v,g])}return l}(t,e,n))).concat(function(t,e){var n=a(t).filter((function(t){return t.name.includes("djembe")}));if(0===n.length)return[];if(n.length<=3){for(var r=Array.from(n,(function(t){return t.name.includes("slap")})),i=Array.from(n,(function(t){return t.name.includes("tone")})),o=Array.from(n,(function(t){return t.name.includes("bass")})),s=0;s<n.length;++s){if(1!==r[s]+i[s]+o[s])return[]}for(var u={},l=0;l<n.length;++l)r[l]?u[n[l].id.toString()]=e["Djembe Slap"]:i[l]?u[n[l].id.toString()]=e["Djembe Tone"]:o[l]&&(u[n[l].id.toString()]=e["Djembe Bass"]);return[["Djembe",u]]}return[]}(t,e))).concat(function(t,e){return s(a(t).filter((function(t){return t.name.includes("snare")})),"Snare",e["Snare Accent"],e["Snare Ghost"])}(t,e))).concat(function(t,e){return s(a(t).filter((function(t){return t.name.includes("shaker")})),"Shaker",e["Shaker Accent"],e["Shaker Ghost"])}(t,e));var o,l=u(n),c=Object(i.a)(t);try{for(c.s();!(o=c.n()).done;){var m=o.value;if(l.has(m.id)){var p,f=!1,h=Object(i.a)(r);try{for(h.s();!(p=h.n()).done;){var d=p.value;m.id.toString()in d[1]&&(f=!0)}}catch(g){h.e(g)}finally{h.f()}if(!1===f){var v={};v[m.id.toString()]=e.Default,r.push([m.name[0],v])}}}}catch(g){c.e(g)}finally{c.f()}return r}},65:function(t,e,n){"use strict";n.d(e,"b",(function(){return N})),n.d(e,"a",(function(){return B}));var r=n(89),i=n(11),o=n(0),a=n.n(o),s=n(160),u=n(162),l=n(240),c=n(230),m=n(232),p=n(66),f=n(229),h=n(231),d=n(117),v=n(151),g=n.n(v),b=n(114),k=n.n(b),y=n(67),O=n(46),E=n(150),S=n.n(E),j=n(171),w=n(163),C=n(168),M=n(166),T=n(167),A=n(165),x=n(4),P=n(28),I=Object(s.a)((function(t){return{root:{display:"flex"}}})),R=Object(x.a)({root:{marginLeft:0,marginRight:0}})(u.a),F=Object(x.a)({root:{padding:2}})(O.a),D=Object(x.a)({root:{textAlign:"center"}})(p.a);function B(t){var e=I(),n=a.a.useState(-1),o=Object(i.a)(n,2),s=o[0],u=o[1],v=a.a.useState(""),b=Object(i.a)(v,2),E=b[0],x=b[1],B=function(e,n){return a.a.createElement(p.a,{align:"center",key:"instrumentPanel-cell-"+n.toString()+"-"+e.toString()},a.a.createElement(R,{control:a.a.createElement(l.a,{checked:t.instrumentMask[e]===n,onChange:function(r){return function(e,n,r){var i=t.instrumentIndex[e].id,o=t.instruments.findIndex((function(t){return i in t[1]})),a=n;if(o!==a){var s=t.instruments[o],u=["",{}];if(null!=s){u[0]=s[0];for(var l=0,c=Object.keys(s[1]);l<c.length;l++){var m=c[l];m!==i.toString()&&(u[1][m]=s[1][m])}}var p=[t.instruments[a][0],Object.assign({},t.instruments[a][1])];p[1][i.toString()]=null!=s?s[1][i]:"X";for(var f=[],h=0;h<t.instruments.length;++h)h===o?f.push(u):h===a?f.push(p):f.push(t.instruments[h]);t.onChange(f)}}(e,n)},name:e+","+n.toString()})}))},N=function(e){return a.a.createElement(d.a,{key:"instrumentPanel-row-"+e.toString()},a.a.createElement(p.a,{component:"th",scope:"row",key:"instrumentPanel-row-"+e.toString()+"-name"},a.a.createElement(P.a,null,t.instruments[e][0]),a.a.createElement(F,{onClick:function(t){return u(e)}},a.a.createElement(k.a,{fontSize:"small"})),a.a.createElement(F,{onClick:function(n){!function(e){var n=t.instruments.slice(0,e).concat(t.instruments.slice(e+1));t.onChange(n)}(e)}},a.a.createElement(S.a,{fontSize:"small"}))),Object(r.a)(Array(t.instrumentIndex.length).keys()).map((function(t){return B(t,e)})))},_=a.a.useState(-1),L=Object(i.a)(_,2),z=L[0],G=L[1],K=a.a.useState(""),W=Object(i.a)(K,2),X=W[0],q=W[1];return a.a.createElement(a.a.Fragment,null,a.a.createElement(w.a,{open:s>=0,onClose:function(t){return u(-1)},"aria-labelledby":"form-dialog-title"},a.a.createElement(A.a,{id:"form-dialog-title"}),a.a.createElement(M.a,null,a.a.createElement(T.a,null,"Enter instrument name"),a.a.createElement(j.a,{autoFocus:!0,margin:"dense",id:"name",fullWidth:!0,value:E,onChange:function(t){return x(t.target.value)}})),a.a.createElement(C.a,null,a.a.createElement(y.a,{onClick:function(t){return u(-1)},color:"primary"},"Cancel"),a.a.createElement(y.a,{onClick:function(e){var n=E.trim();if(n.length>0)if(s===t.instruments.length){var r=[n,{}],i=Array.from(t.instruments);i.push(r),t.onChange(i)}else{var o=Array.from(t.instruments);o[s][0]=n,t.onChange(o)}u(-1),x("")},color:"primary"},"Confirm"))),a.a.createElement(w.a,{open:z>=0,onClose:function(t){return G(-1)},"aria-labelledby":"form-dialog-title"},a.a.createElement(A.a,{id:"form-dialog-title"}),a.a.createElement(M.a,null,a.a.createElement(T.a,null,"Enter notation symbol"),a.a.createElement(j.a,{autoFocus:!0,margin:"dense",id:"name",fullWidth:!0,value:X,onChange:function(t){return q(t.target.value)}})),a.a.createElement(C.a,null,a.a.createElement(y.a,{onClick:function(t){return G(-1)},color:"primary"},"Cancel"),a.a.createElement(y.a,{onClick:function(e){var n=X;if(1===n.length){var r=t.instrumentIndex[z].id,i=t.instruments.findIndex((function(t){return r in t[1]})),o=Array.from(t.instruments);o[i][1][r]=X,t.onChange(o)}else alert('You selected an invalid symbol "'+n+'".\nSymbols must be precisely 1 character.');G(-1)},color:"primary"},"Confirm"))),a.a.createElement(f.a,null,a.a.createElement(c.a,{className:e.table,"aria-label":"simple table"},a.a.createElement(h.a,null,a.a.createElement(d.a,{key:"instrumentPanel-row-header"},a.a.createElement(p.a,{key:"instrumentPanel-row-instrument"}," Instrument "),Object(r.a)(Array(t.instrumentIndex.length).keys()).map((function(e){return a.a.createElement(D,{key:"instrumentPanel-row-header-cell-"+e.toString()},a.a.createElement(P.a,null,t.instrumentIndex[e].name),a.a.createElement(F,{onClick:function(n){return function(e){var n=t.instrumentIndex[e].id,r=t.instruments.findIndex((function(t){return n in t[1]})),i=t.instruments[r][1][n];q(i),G(e)}(e)}},a.a.createElement(k.a,{fontSize:"small"})))})))),a.a.createElement(m.a,null,Object(r.a)(Array(t.instruments.length).keys()).map((function(t){return N(t)})),a.a.createElement(d.a,{key:"instrumentPanel-row-edit"},a.a.createElement(p.a,{component:"th",scope:"row",key:"instrumentPanel-row-edit-cell"},a.a.createElement(O.a,{onClick:function(e){return u(t.instruments.length)},"aria-label":"add"},a.a.createElement(g.a,null))))))))}function N(t,e){for(var n=Array(t.length),r=0;r<t.length;++r)for(var i=t[r].id,o=0;o<e.length;++o){var a=e[o];i.toString()in a[1]&&(n[r]=o)}return n}},81:function(t,e,n){"use strict";var r=n(12),i=n(17),o=n(18),a=n(82);var s=function(){function t(e,n){if(Object(i.a)(this,t),0===e.length)throw new Error("patternArray must not be zero length");this.rep=e,this.resolution=n}return Object(o.a)(t,[{key:"length",value:function(){return this.rep.length*this.resolution}},{key:"empty",value:function(){return 0===this.rep.reduce((function(t,e){return t+e}))}},{key:"_sumOverlapsOfArrays",value:function(t,e){for(var n=0,r=0;r<t.length;++r)t[r]&&e[r]&&n++;return n}},{key:"countOverlaps",value:function(t){if(this.resolution===t.resolution)return this._sumOverlapsOfArrays(this.rep,t.rep);var e=function(t,e){if(t<1||e<1)throw new Error("x<1 || y<1");for(;Math.max(t,e)%Math.min(t,e)!==0;)t>e?t%=e:e%=t;return Math.min(t,e)}(this.resolution,t.resolution),n=this.formatResolution(e),r=t.formatResolution(e);return this._sumOverlapsOfArrays(n.rep,r.rep)}},{key:"format",value:function(e){var n=this.resolution*this.rep.length,r=this.toPoints(),i=t.representPoints(r,e,n);return i?new t(i,e):null}},{key:"toPoints",value:function(){var t,e=[],n=Object(r.a)(Array(this.rep.length).keys());try{for(n.s();!(t=n.n()).done;){var i=t.value;this.rep[i]&&e.push(this.resolution*i)}}catch(o){n.e(o)}finally{n.f()}return e}}],[{key:"representPoints",value:function(t,e,n){if(n<=0)throw new Error("size must be greater than zero");if(n<e||n%e!==0)throw new Error("resolution must be less than size and divide it evenly");var i,o=new Array(n/e).fill(0),a=Object(r.a)(t);try{for(a.s();!(i=a.n()).done;){var s=i.value;if(s%e!==0)throw new Error("Failed to represent point "+s.toString()+" at resolution "+e.toString());if(s>=n)throw new Error("Failed to represent point "+s.toString()+" for invalid specified size "+n.toString());o[s/e]=1}}catch(u){a.e(u)}finally{a.f()}return o}},{key:"fromPositions",value:function(e,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=null!==r&&void 0!==r?r:Object(a.a)(e,n);return new t(t.representPoints(e,i,n),i)}}]),t}();e.a=s},82:function(t,e,n){"use strict";n.d(e,"a",(function(){return i}));var r=n(12);function i(t,e){for(var n=t.concat([e]),i=0,o=[48,24,16,12,8,6,4,3,2,1];i<o.length;i++){var a,s=o[i],u=!0,l=Object(r.a)(n);try{for(l.s();!(a=l.n()).done;){if(a.value%s!==0){u=!1;break}}}catch(c){l.e(c)}finally{l.f()}if(u)return s}throw new Error("Failed to predict base")}}},[[183,1,2]]]);
//# sourceMappingURL=main.4b0a548c.chunk.js.map